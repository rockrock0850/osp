/**
 * thunder v1.1.0.dev
 * ===============================
 * Copyright (c) 2014 Far Eastone Telecommunications Co., Ltd.
 * All Rights Reserved.
 * build time: 2014-11-03 15:58:29 
 */

!function(a,b){"use strict";define("thunder",["initConfig"],function(c){function d(a,b){return a?b?a+(a.indexOf("?")>-1?"&":"?")+b:a:""}function e(){var a,c,d="Unknown",e="";screen.width&&(a=screen.width?screen.width:"",c=screen.height?screen.height:"",e+=""+a+" x "+c);var f,g,h,i=navigator.appVersion,j=navigator.userAgent,k=navigator.appName,l=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10);-1!=(g=j.indexOf("Opera"))?(k="Opera",l=j.substring(g+6),-1!=(g=j.indexOf("Version"))&&(l=j.substring(g+8))):-1!=(g=j.indexOf("MSIE"))?(k="Microsoft Internet Explorer",l=j.substring(g+5)):"Netscape"==k&&-1!=j.indexOf("Trident/")?(k="Microsoft Internet Explorer",l=j.substring(g+5),-1!=(g=j.indexOf("rv:"))&&(l=j.substring(g+3))):-1!=(g=j.indexOf("Chrome"))?(k="Chrome",l=j.substring(g+7)):-1!=(g=j.indexOf("Safari"))?(k="Safari",l=j.substring(g+7),-1!=(g=j.indexOf("Version"))&&(l=j.substring(g+8)),-1!=j.indexOf("CriOS")&&(k="Chrome")):-1!=(g=j.indexOf("Firefox"))?(k="Firefox",l=j.substring(g+8)):(f=j.lastIndexOf(" ")+1)<(g=j.lastIndexOf("/"))&&(k=j.substring(f,g),l=j.substring(g+1),k.toLowerCase()==k.toUpperCase()&&(k=navigator.appName)),-1!=(h=l.indexOf(";"))&&(l=l.substring(0,h)),-1!=(h=l.indexOf(" "))&&(l=l.substring(0,h)),-1!=(h=l.indexOf(")"))&&(l=l.substring(0,h)),m=parseInt(""+l,10),isNaN(m)&&(l=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10));var n=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),o=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||o||(b.cookie="testcookie",o=-1!=b.cookie.indexOf("testcookie")?!0:!1);var p=d,q=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in q){var s=q[r];if(s.r.test(j)){p=s.s;break}}var t=d;switch(/Windows/.test(p)&&(t=/Windows (.*)/.exec(p)[1],p="Windows"),p){case"Mac OS X":t=/Mac OS X (10[\.\_\d]+)/.exec(j)[1];break;case"Android":t=/Android ([\.\_\d]+)/.exec(j)[1];break;case"iOS":t=/OS (\d+)_(\d+)_?(\d+)?/.exec(i),t=t[1]+"."+t[2]+"."+(0|t[3])}var u=b.documentMode?b.documentMode:"N/A",v={screen:e,browser:k,browserVersion:l,browserDocMode:u,mobile:n,os:p,osVersion:t,cookies:o};return v}var f=a.thunder||(a.thunder={}),g=angular.module("thunder",[]),h=[].slice,i=c.versionStr||"v=undefined",j=c.flipAsset||"//flip-test.fareastone.com.tw/flip-asset",k="_ctid",l="_ip",m="_platinfo",n="_objectid",o={LOAD_APPART_CONFIG:"LOAD_APPART_CONFIG",LOADED_APPART_CONFIG:"LOADED_APPART_CONFIG",LOAD_APPART_CONTROLLER:"LOAD_APPART_CONTROLLER",LOADED_APPART_CONTROLLER:"LOADED_APPART_CONTROLLER",LOAD_APPART_VIEW:"LOAD_APPART_VIEW",LOADED_APPART_VIEW:"LOADED_APPART_VIEW",LOADED_APPART_VIEW_FROM_CACHE:"LOADED_APPART_VIEW_FROM_CACHE",REQUEST_AJAX:"REQUEST_AJAX",REQUESTED_AJAX:"REQUESTED_AJAX"},p={full:"1.1.0.dev",major:1,minor:1,dot:0};return Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.remove||(Array.prototype.remove=function(a){var b=this.indexOf(a);return-1!==b?this.splice(b,1):!1}),Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1===RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},g.directive("appPart",["$templateCache","httpService","appPartService","loggingService",function(a,b,e,f){var g;return g=function(a){var b,c,d,e,f,g;if(g={},a&&(e=/\+/g,d=/([^&=]+)=?([^&]*)/g,b=function(a){return decodeURIComponent(a.replace(e," "))},f=a.split("?")[1],null!==f))for(;c=d.exec(f);)g[b(c[1])]=b(c[2]);return g},{restrict:"A",scope:{src:"=",random:"@",loadingeffect:"@"},template:'<div t-Block="loadingeffect"><div ng-include src="viewUrl" autoscroll=""></div></div>',link:function(h){return h.$watch("src",function(j){"undefined"==typeof h.loadingeffect?(h.loadingeffect=!0,f.debug("Use default Scope Loading effect Setting:",h.loadingeffect)):f.debug("Use Config Scope Loading effect Setting:",h.loadingeffect);var k,l=j,m="true"===h.random;return m&&(l=d(l,k="r="+Math.random())),l?(f.debug("[appPart] _configUrl: ",l),e.load(l,g(l),k).then(function(e){var g=d(e.viewUrl,i);if(m&&(g=d(g,k)),"undefined"!=typeof g&&g){f.debug("[appPart] _viewUrl: ",g);var j={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartnm:e.name,appartview:g}}};if(f.analysis(o.LOAD_APPART_VIEW+" "+e.name,j),j=null,"undefined"!=typeof a.get("_arrViewUrl_")&&a.get("_arrViewUrl_")){var l=[];for(l=a.get("_arrViewUrl_"),index=0;index<l.length;++index)a.remove(l[index]);l=null}if("undefined"!=typeof a.get(g)&&a.get(g)){var j={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartnm:e.name,appartview:g}}};return f.analysis(o.LOADED_APPART_VIEW_FROM_CACHE+" "+e.name,j),j=null,h.loadingeffect=!1,h.viewUrl=g}return b.get(g).then(function(b){var d={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartnm:e.name,appartview:g}}};f.analysis(o.LOADED_APPART_VIEW+" "+e.name,d),d=null,a.put(g,'<div id="'+e.name+'" ng-controller="'+e.name+'">'+b.data+"</div>");var i=[g];return a.put("_arrViewUrl_",i),i=null,h.loadingeffect=!1,h.viewUrl=g},function(a){return f.error("_viewUrl: "+g,a.message),h.loadingeffect=!1,""})}h.loadingeffect=!1})):(h.loadingeffect=!1,f.warning("[appPart] _configUrl is empty! ","_configUrl: "+l),null)})}}}]),g.provider("httpService",[function(){var a,b;return b=6e4,a=function(a,c,d,e,f){var g=null;null!=d&&null!=d.data&&(g=d.data);var h={msg:{requestinfo:{reqparam:g,requesturl:c}}};e.analysis(o.REQUEST_AJAX+" "+c,h),h=null,g=null;var i;return i={method:a,url:c,timeout:b},null!=d?null!=d.headers?d.headers._ctid=f.get():d.headers={_ctid:f.get()}:d={headers:{_ctid:f.get()}},jQuery.extend(i,d)},{timeout:function(a){return b=a},$get:["$http","loggingService","ctidService",function(b,c,d){return{get:function(e,f){return null==f&&(f={}),b(a("GET",e,f,c,d))},put:function(e,f){return null==f&&(f={}),b(a("PUT",e,f,c,d))},post:function(e,f){return null==f&&(f={}),b(a("POST",e,f,c,d))},jsonp:function(e,f){return null==f&&(f={}),f.params={callback:"JSON_CALLBACK"},b(a("JSONP",e,f,c,d))}}}]}}]),g.provider("appPartService",["$provide",function(a){var b,e,f;return b={},e={},f={},a.decorator("$controller",["$delegate",function(a){return function(b,c){return"string"==typeof b&&(c.controllerName=b),e[b]&&(c.config=e[b]),f[b]&&(c.params=f[b]),a(b,c)}}]),{$get:["httpService","controllerLoader","eventBusService","loggingService",function(a,g,h,i){return{load:function(j,k,l,m){if(null==k&&(k={}),null==m&&(m=!1),b[j]&&!m)return f[b[j].name]=k,b[j];var n={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartconfig:j}}};return i.analysis(o.LOAD_APPART_CONFIG,n),n=null,b[j]=a.get(j).then(function(a){var b={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartnm:a.data.name,appartconfig:j}}};i.analysis(o.LOADED_APPART_CONFIG+" "+a.data.name,b),b=null;var m=a.data.controllerUrl;a.data.config&&(e[a.data.name]=a.data.config),f[a.data.name]=k,m=l?d(m,l):m,i.debug("[appPart] _controllerUrl: ",m);var b={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartnm:a.data.name,appartconfig:j,appartcontroller:m}}};return i.analysis(o.LOAD_APPART_CONTROLLER+" "+a.data.name,b),b=null,g.load(a.data.name,m).then(function(){var b={lap:{clientapinfo:{sysid:c.logConfig.systemName,appartnm:a.data.name,appartconfig:j,appartcontroller:m}}};return i.analysis(o.LOADED_APPART_CONTROLLER+" "+a.data.name,b),b=null,h.publish("httpService","appPart.loaded",a.data.name),a.data})},function(a){return i.error("url: "+j,a.message),""})}}}]}}]),g.provider("loggingService",[function(){var a,b,d,f,g,h=100,i=[],j=[],k={logAggregatorHost:"",logInfoActionUrl:"/ClientLogServlet",logReceiverActionUrl:"/ClientLogServlet",logServletUrl:"ClientLogServlet",systemName:"unknown",systemContextPath:"unknown",consoleAppenderStatus:"OFF",logLevel:"DEBUG",logCenterAppenderStatus:"ON",logAnalyzeLevel:"DEBUG",logDumpSize:h};return g=jQuery.extend(!0,{},k,(c||{}).logConfig||{}),a=function(a){switch(a){case"DEBUG":return 0;case"INFO":return 1;case"WARNING":return 2;case"ERROR":return 3;case"ANALYSIS":return 4;case"PDP":return 5;default:return 0}},g.logLevel=a(g.logLevel),g.logAnalyzeLevel=a(g.logAnalyzeLevel),f=function(a){return angular.isNumber(a)?0>a||a>h?!1:!0:!1},f(g.logDumpSize)||(g.logDumpSize=h),d=function(a){if(b=a.get(l),!b){var c=g.logAggregatorHost+g.systemContextPath+g.logInfoActionUrl;jQuery.get(c).success(function(c){return b=c.ip,a.set(l,b),b}).error(function(){})}},{addAppender:function(a){return i.push.apply(i,a)},setLevel:function(b){return g.logLevel=a(b)},setLogAnalyzeLevel:function(b){return g.logAnalyzeLevel=a(b)},setLogAggregatorHost:function(a){return g.logAggregatorHost=a},setLogDumpSize:function(a){f(a)&&(g.logDumpSize=a)},setConsoleAppenderStatus:function(a){return g.consoleAppenderStatus=a},setLogCenterAppenderStatus:function(a){return g.logCenterAppenderStatus=a},$get:["cookieService","ctidService",function(f,h){d(f),h.get(),"ON"===g.consoleAppenderStatus&&i.push(function(){if("undefined"==typeof console||"undefined"==typeof console.log)return function(){};var b;return b=function(a){var b="warning"===a.toLowerCase()?"warn":a.toLowerCase(),c=console[b]||console.log;return c},function(c,d,e){if(a(c)>=g.logLevel){var f=c+": "+d+" -> "+e;try{return b(c)(f)}catch(h){return b(c).call(console,f)}}}}()),"ON"===g.logCenterAppenderStatus&&i.push(function(){var d,i,k,l,o;return d=function(){return f.getAll()},i=function(){var a=f.getFromJSON(m);a||(a=e(),f.setToJSON(m,a));var c=l(),d={clientip:b,browserinfo:{availablewidth:c.availWidth,screenwidth:c.width,browsernm:a.browser,screenheight:c.height,osinfo:{osname:a.os,osversion:a.osVersion},version:a.browserVersion,versiondocmode:a.browserDocMode,availableheight:c.availHeight}};return d},l=function(){var a,b,c,d;return screen.width&&(a=screen.width?screen.width:"",b=screen.height?screen.height:"",c=screen.availWidth?screen.availWidth:"",d=screen.availHeight?screen.availHeight:""),{width:a,height:b,availWidth:c,availHeight:d}},k=function(){return(new Date).format("yyyy-MM-dd hh:mm:ss.S")},o=function(){return f.get(n)},function(b,d,e){if(a(b)>=g.logAnalyzeLevel){var f={};if(a(b)<=a("WARNING")?f={msg:{debuginfo:{debugmsg:d+" -> "+e}}}:a(b)==a("ERROR")?f={msg:{errorinfo:{errorcode:d,errormsg:e,stacktrace:""}}}:a(b)>=a("ANALYSIS")&&(e=e||{},e&&e.msg&&e.msg.analysisinfo?e.msg.analysisinfo.eventinfo=d:f={msg:{analysisinfo:{eventinfo:d}}},jQuery.extend(f,e)),null!=f.lap)null!=f.lap.clientapinfo&&(f.lap.clientapinfo.sysid=g.systemName,f.lap.clientapinfo.appname="thunder",f.lap.clientapinfo.appver=p.full);else{var l={lap:{clientapinfo:{sysid:c.logConfig.systemName,appname:"thunder",appver:p.full}}};jQuery.extend(f,l)}var m={lpr:{clientprinfo:i()},ver:"1.0",ctid:h.get(),lvl:b,lct:k(),lur:{objectid:o()}};if(jQuery.extend(m,f),j.push(m),j.length>=g.logDumpSize){var n={logmsg:JSON.stringify(j)},q=jQuery.param(n);try{var r=g.logAggregatorHost+g.systemContextPath+g.logReceiverActionUrl;jQuery.support.cors=!0,jQuery.ajax({type:"POST",async:!0,url:r,cache:!1,contentType:"application/x-www-form-urlencoded","dataType:":"json",crossDomain:!0,timeout:600,data:q}).done(function(){}).fail(function(){})}catch(s){}finally{q=null,n=null,m=null,f=null,e=null}j=[]}}}}());var k;return k=function(a,b,c){return angular.forEach(i,function(d){return d(a,b,c)})},{debug:function(a,b){return k("DEBUG",a,b)},info:function(a,b){return k("INFO",a,b)},warning:function(a,b){return k("WARNING",a,b)},error:function(a,b){return k("ERROR",a,b)},analysis:function(a,b){return k("ANALYSIS",a,b)},pdp:function(a,b){return k("PDP",a,b)}}}]}}]),g.provider("cookieService",[function(){return{$get:[function(){return{get:function(a){try{var c=a+"=",d=b.cookie.split(";");if(null!=d&&""!=d&&"undefined"!=d&&"undefined"!=typeof d)for(var e=0;e<d.length;e++)if(null!=d[e]&&"undefined"!=d[e]){var f=jQuery.trim(d[e]);if(0==f.indexOf(c))return f.substring(c.length,f.length)}}catch(g){}return""},getFromJSON:function(a){try{var b=this.get(a);if(null!=b&&""!=b&&"undefined"!=b&&"undefined"!=typeof b)return JSON.parse(b)}catch(c){}return""},set:function(a,c,d){try{var e="";if(d){var f=new Date;f.setTime(f.getTime()+24*d*60*60*1e3),e="expires="+f.toGMTString()}b.cookie=a+"="+c+"; "+e}catch(g){}},setToJSON:function(a,b,c){try{this.set(a,JSON.stringify(b),c)}catch(d){}},getAll:function(){var a,c={};try{a=b.cookie.split(";");for(var d=0;d<a.length;d++){var e=a[d].split("=");""!=e[0]&&"undefined"!=e[0]&&(c[e[0]]=unescape(e[1]))}}catch(f){}finally{e=null}return c}}}]}}]),g.provider("ctidService",[function(){return{$get:["cookieService",function(a){return{create:function(){for(var a=[],b="0123456789abcdef",c=0;36>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);return a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-",a.join("")},getFromCookie:function(){return a.get(k)},get:function(){var b=this.getFromCookie();return null!=b&&""!=b&&"undefined"!=b?b:(b=this.create(),a.set(k,b,30),b)}}}]}}]),g.provider("eventBusService",[function(){var a;return a=10,{maxEvent:function(b){return a=b},$get:["$rootScope","circularListService",function(b,c){var d,e,f;return d=c.create(a),e={},f=function(a,b){return e[a]&&e[a][b]&&(e[a][b](),delete e[a][b]),e[a]==={}?delete e[a]:void 0},{publish:function(a,c,e){return d.add({publisher:a,name:c,args:e}),b.$broadcast(c,e)},subscribe:function(a,c,d){var f;return f=e[a]||{},"function"==typeof f[c]&&f[c](),f[c]=b.$on(c,d),e[a]=f},unsubscribe:f,unsubscribeAll:function(a){var b,c,d;c=e[a],d=[];for(b in c)__hasProp.call(c,b)&&d.push(f(a,b));return d},events:function(){return d.getAll()},removeeventAll:function(){return d.removeAll()},subscribers:function(){var a,b,c,d;c=[];for(b in e)if(__hasProp.call(e,b)){d=e[b];for(a in d)__hasProp.call(d,a)&&c.push({subscriber:b,name:a})}return c}}}]}}]),g.factory("circularListService",[function(){return{create:function(a){var b,c;return c=[],b=0,{add:function(d){return c[b]=d,b=(b+1)%a},getAll:function(){var a,d,e;return a=c.slice(b),[].splice.apply(a,[d=a.length,9e9].concat(e=c.slice(0,b))),e,a},removeAll:function(){return c=[],b=0,c}}}}}]),g.provider("controllerLoader",["$controllerProvider",function(a){return{$get:["$q","$rootScope","$controller",function(b,c){return{load:function(d,e){var f;return f=b.defer(),require([e],function(b){var e,g;return angular.isArray(b)&&(g=b.indexOf("$scope"),-1!==g&&(e=b[b.length-1],b[b.length-1]=function(){var a,b;return a=1<=arguments.length?h.call(arguments,0):[],b=a[g],b._controllerName=d,e.apply(null,a)})),a.register(d,b),f.resolve(),c.$apply()}),f.promise}}}]}}]),g.directive("tBlock",function(){return{restrict:"CA",link:function(b,c,d){var e;b.$watch(d.tBlock,function(b){e=b,"true"===e||e===!0?c.block({message:'<div><img id="displayBox" src="'+j+'/img/loading.gif"></div>',css:{width:"100%",top:($(a).height()-400)/2+"px",left:($(a).width()-400)/2+"px",right:"10px",border:"none",padding:"5px",backgroundColor:"#fff",opacity:.7,color:"#fff"},overlayCSS:{backgroundColor:"#fff"}}):c.unblock()})}}}),g.factory("cacheService",["$cacheFactory",function(a){return{create:function(b,c){return a(b,{capacity:c})}}}]),g.config(["$provide","$httpProvider",function(a,b){a.factory("httpMonitorInterceptor",["$q","loggingService",function(a,b){var c=function(a,b,c){var d=a.config.method,e=a.config.url,f=a.config.data,g=a.status,h=a.config.timeout,i={msg:{requestinfo:{requesturl:e,method:d,status:g,defaultTimeout:h},analysisinfo:{duration:c}}};b.analysis(o.REQUESTED_AJAX+" "+e,i),i=null,d=null,e=null,f=null,g=null,h=null},d=null;return{request:function(a){return d=new Date,a},requestError:function(b){return a.reject(b)},response:function(a){var e=new Date-d;return c(a,b,e),e=null,d=null,a},responseError:function(e){var f=new Date-d;return c(e,b,f),f=null,d=null,a.reject(e)}}}]),b.interceptors.push("httpMonitorInterceptor")}]),function(){var a,b=e()||{};"Microsoft Internet Explorer"===b.browser&&-1!=="789".indexOf(a=b.browserVersion.substr(0,1))&&jQuery("html").addClass("ie"+a)}(),f.version=p,f.appendUrlParams=d,f.getPlatformInfo=e,f})}(window,document);
//# sourceMappingURL=thunder.min.js.map