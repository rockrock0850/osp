/**
 * thunder v1.1.3
 * ===============================
 * Copyright (c) 2014 Far Eastone Telecommunications Co., Ltd.
 * All Rights Reserved.
 * build time: 2015-01-15 10:32:09 
 */
!function(a,b,c){"use strict";define("thunderUi",["initConfig"],function(){var a=angular.module("thunder.ui",[]);a.directive("fetAccordion",["$fetUI","$timeout",function(a,b){return{priority:102,name:"fet-accordion",scope:{accordionId:"@",allClose:"@",accordionTheme:"@",sAccordionDisplay:"="},restrict:"EA",replace:!0,transclude:!0,template:'<div class="panel-group accordion" id="{{accordionId}}" ng-transclude></div>',link:function(c,d,e){var f=c.accordionId,g=c.accordionTheme,h=c.$eval(a.getValue(c,e,"index")),i=c.sAccordionDisplay,j=a.getOptionManager().getOption("accordionDisplayOption",i),k=j.isBorder,l=j.fixed,m=1;l="auto"==angular.lowercase(l)?!1:l,g=angular.isString(g)?g:"default",b(function(){h=angular.isNumber(h)&&h<$("[accordion-id="+f+"] [fet-accordion-item]").length?h:1}),d.on("fetInitAccordion",function(){m==h&&d.find(".panel").length>=h&&d.find(".in").length<1&&d.find("[fet-accordion-item]:eq("+(m-1)+") .panel-collapse").collapse("show"),m++,k||d.find(".panel").css("border-style","none")})}}}]),a.factory("accordionService",["$fetUI",function(a){var b={};return b.collapse=function(a,b){var c="[accordion-id="+a+"] #"+b;$(c).collapse("hide")},b.expand=function(b,c,d){d=a.isTrue(d)?!0:!1;var e="[accordion-id="+b+"] #"+c;0!==$(e).length&&(d?($("[fet-accordion-item]:not([item-id="+c+"]) ").find(".panel-collapse.in").collapse("hide"),$(e).collapse("show")):$(e).collapse("show"))},b.expandAll=function(a){$("[accordion-id="+a+"]").find(".panel-collapse").collapse("show")},b.collapseAll=function(a){$("[accordion-id="+a+"]").find(".panel-collapse.in").collapse("hide")},b}]),a.directive("fetAccordionItem",["$fetUI","$compile","httpService","$parse","$timeout",function(a,b,c,d,e){var f="fetAccordionItem";return{priority:104,name:f,scope:!1,require:"?fetAccordion",restrict:"A",link:function(d,f,g){function h(a){var b="<div><h4><a>"+a+"</a></h4></div>";return b=a?v.length>1?null:'<div data-type="title"><h4><a>'+a+"</a></h4></div>":1==v.length?'<div data-type="title">'+v.eq(0).html()+"</div>":0==v.length?'<div data-type="title"><a>&nbsp</a></div>':null}var i=f.parent().attr("accordion-theme"),j=(f.parent().attr("accordion-id"),a.getValue(d,g,"itemId")),k=d.$eval(f.parent().attr("item-toggle")),l=a.isTrue(g.itemDisabled),m=a.getValue(d,g,"itemTitle"),n=a.getExpression(d,g,"onAccordionShow"),o=a.getExpression(d,g,"onAccordionShown"),p=a.getExpression(d,g,"onAccordionHide"),q=a.getExpression(d,g,"onAccordionHidden"),r=a.getValue(d,g,"itemType"),s=a.getValue(d,g,"itemPreload"),t=a.getValue(d,g,"itemAction"),u="#"+j;r=angular.isString(r)?r:"inline",i=angular.isString(i)?i:"dafault",f.addClass("panel panel-"+i);var v=f.children();f.prepend(h(m));var w=f.find("div:first"),x=f.children("div:odd").addClass("panel-body");w.addClass("panel-heading").children().addClass("panel-title"),l?(x.wrapAll('<div class="collapse" id="'+j+'"></div>'),w.find("a")?w.find("a").addClass("collapsed").attr({"data-toggle":"collapse"}):w.children().attr({"data-toggle":"collapse"})):(x.wrapAll('<div class="panel-collapse collapse" id="'+j+'"></div>'),w.find("a")?w.find("a").addClass("accordion-toggle collapsed").attr({"data-toggle":"collapse",href:"#"+j}):w.children().addClass("accordion-toggle").attr({"data-toggle":"collapse",href:"#"+j}));var y='<div class="panel-collapse collapse" id="'+j+'"><div class="panel-body"></div></div>';0===$(u).length&&f.append($(y));var z=function(){t?c.get(t,{}).success(function(a){var c=b(a)(d);$(u).find(".panel-body").html(c)}).error(function(){$(u).find(".panel-body").html("URL路徑錯誤,請再次確認")}):$(u).find(".panel-body").html("item-action不得為空值,請再次確認")},A=function(a){if(t){var c=b(a)(d);$(u).find(".panel-body").html(c)}else $(u).find(".panel-body").html("item-action不得為空值,請再次確認")};if("html"==angular.lowercase(r))a.isFalse(s)?f.one("show.bs.collapse",function(){z()}):z();else if("apppart"==angular.lowercase(r)){var B="<div app-part src=\"'"+t+"'\"></div>";a.isFalse(s)?f.one("show.bs.collapse",function(){A(B)}):A(B)}f.on("click",function(){k&&f.siblings().find(".panel-collapse.in").collapse("hide")}),f.on("show.bs.collapse",function(){n&&n(),f.find('[data-toggle="collapse"]').removeClass("collapsed").addClass("collapse")}),f.on("shown.bs.collapse",function(){o&&o()}),f.on("hide.bs.collapse",function(){p&&p(),f.find('[data-toggle="collapse"]').removeClass("collapse").addClass("collapsed")}),f.on("hidden.bs.collapse",function(){q&&q()}),e(function(){f.parent().triggerHandler("fetInitAccordion")})}}}]),a.directive("fetAlert",["$fetUI","$timeout",function(a,b){return{name:"fetAlert",priority:99,template:'<div role="alert" class="alert alert-{{alertTheme}} {{widthStyle}}"  ><div ng-show="sAlertDisplay.closable" id="{{alertId}}_close_btn"><button type="button" class="close" ng-click="hideCloseAction()"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button></div> <div   name="content" ng-transclude></div></div>',replace:!0,transclude:!0,restrict:"EA",scope:!0,link:function(c,d,e){function f(d){k&&1==d&&c.$apply(function(){k()}),d&&p.show(o.duration),p.data("fetIsShow",!0),a.isTrue(o.autoHide)&&(o.autoHide=5e3),angular.isNumber(o.autoHide)&&(q=b(function(){p.triggerHandler("fetHideEvent")},o.autoHide)),l&&1==d&&c.$apply(function(){l()})}function g(a){m&&1==a&&c.$apply(function(){m()}),p.hide(o.duration),p.data("fetIsShow",!1),angular.isNumber(o.autoHide)&&b.cancel(q),n&&1==a&&c.$apply(function(){n()})}var h=a.getValue(c,e,"alertId"),i=a.getValue(c,e,"alertTheme"),j=a.getScope(c,e,"sAlertDisplay"),k=a.getExpression(c,e,"onAlertShow"),l=a.getExpression(c,e,"onAlertShown"),m=a.getExpression(c,e,"onAlertHide"),n=a.getExpression(c,e,"onAlertHidden"),o=a.getOptionManager().getOption("alertDisplay",j);c.sAlertDisplay=o,c.alertTheme=i?i:"default",c.alertId=h;var p=$(d);c.hideCloseAction=function(){p.triggerHandler("fetHideEvent")};var q="";p.on("fetShowEvent",function(){b(function(){f(!0)},o.show)}).on("fetHideEvent",function(){b(function(){g(!0)},o.hide)}),p.hasClass("default-hide")?g(!1):f(!1)}}}]),a.directive("fetAlertTrigger",["$fetUI","$triggerService",function(a,b){return{name:"fetAlertTrigger",restrict:"A",priority:99,link:function(c,d,e){var f=a.getValue(c,e,"targetId");if(f){var g=a.getScope(c,e,"sAlertEvent"),h=$(d),i=a.getOptionManager().getOption("alertEvent",g);i.show==i.hide&&"click"==i.show?b.registerEvent("",i.show,h,f,"alert-id"):(b.registerEvent("show",i.show,h,f,"alert-id"),b.registerEvent("hide",i.hide,h,f,"alert-id"))}}}}]),a.directive("fetButtonGroup",["$compile","$parse","$fetUI",function(a,b,c){var d={$setViewValue:angular.noop};return{restrict:"A",require:["fetButtonGroup","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var e,f=this,g=d,h=[],i=[],j="radio"===angular.lowercase(c.buttonType)?"radio":"checkbox";f.init=function(a){g=a},f.addChild=function(a,b){return i.push(b),h.push(a)-1},f.existChildIndex=function(a){return h.indexOf(a)},f.removeChild=function(a){var c=f.existChildIndex(a);if(-1!==c){h.splice(c,1),i.splice(c,1);var d=f.inModelIndex(a);if(-1!==d){var e=g.$viewValue;e.splice(d,1),b.$evalAsync(function(){g.$setViewValue(e)})}}},f.updateChild=function(a,c){var d=h[a];if(d!==c){h[a]=c;var e=g.$viewValue;angular.isArray(e)&&(e[e.indexOf(d)]=c,b.$evalAsync(function(){g.$setViewValue(e)}))}},f.inModelIndex=function(a){var b=g.$viewValue;return b?b.indexOf(a):-1},f.select=function(a){if("radio"===j)b.$evalAsync(function(){g.$setViewValue([a])});else{var c=g.$viewValue;c&&angular.isArray(c)||(c=[]),c.push(a),b.$evalAsync(function(){g.$setViewValue(c)})}},f.unSelect=function(a){if("radio"===j)b.$evalAsync(function(){g.$setViewValue([])});else{var c=g.$viewValue;c&&angular.isArray(c)||(c=[]),c.splice(c.indexOf(a),1),b.$evalAsync(function(){g.$setViewValue(c)})}},f.getTheme=function(){return c.buttonTheme},f.getSize=function(){return c.buttonSize},e=b.$watch(function(){return g.$viewValue},function(a){var b=a;b&&angular.isArray(b)||(b=[]),angular.forEach(h,function(a,c){-1!==b.indexOf(a)?i[c].active():i[c].inactive()})}),a.on("$destroy",function(){angular.isFunction(e)&&e()})}],link:function(a,b,d,e){var f=(d.buttonType,d.buttonTheme,d.buttonJustified),g=e[0],h=e[1];c.isTrue(f)&&b.addClass("btn-group-justified"),b.addClass("btn-group btn-inline").attr("data-toggle","buttons"),h&&g.init(h)}}}]),a.directive("fetButtonItem",["$fetUI",function(a){var b={addChild:angular.noop,removeChild:angular.noop,updateChild:angular.noop,getTheme:angular.noop,inModelIndex:angular.noop,select:angular.noop,unSelect:angular.noop};return{restrict:"A",require:["fetButtonItem","^fetButtonGroup"],scope:!1,controller:["$element","$scope","$attrs",function(a){var b=this;b.inactive=function(){a.hasClass("active")&&a.removeClass("active")},b.active=function(){a.addClass("active")}}],link:function(c,d,e,f){var g,h,i,j=d.parent(),k="radio"===angular.lowercase(j.attr("button-type"))?"radio":"checkbox",l=f[0],m=f[1],n=a.getButtonSize(m.getSize()),o=e.buttonTheme||m.getTheme()||"default";h=function(){return e.ngValue?function(){return c.$eval(e.ngValue)}:function(){return d.attr("value")}}(),d.addClass("btn btn-"+o).addClass(n),(!m||m.databound)&&(m=b),g=m.addChild(h(),l),d.on("click",function(){var a=h(),b="radio"===k;return-1!==m.inModelIndex(a)?(b||(m.unSelect(a),d.removeClass("active")),!1):(m.select(a),void(b&&d.siblings(".active").removeClass("active")))}),m!==b&&(i=c.$watch(function(){return h()},function(a){m.updateChild(g,a)})),d.on("$destroy",function(){m.removeChild(h()),angular.isFunction(i)&&(i||angular.noop)()})}}}]),a.directive("fetCarousel",["$fetUI","$timeout",function(a,b){var c="fetCarousel";return{priority:102,name:c,scope:!0,restrict:"EA",replace:!0,transclude:!0,template:'<div class="carousel slide ui-ticker" data-ride="carousel" id="{{carouselId}}"><div ><div class="carousel-inner" ng-transclude></div><a class="carousel-control left" href="#{{carouselId}}" data-slide="prev"><i class="fa fa-angle-left"></i></a><a class="carousel-control right" href="#{{carouselId}}" data-slide="next"><i class="fa fa-angle-right"></i></a></div></div>',link:function(c,d,e){var f=a.getValue(c,e,"carouselId"),g=c.$eval(a.getValue(c,e,"showSpeed")),h=(a.getValue(c,e,"loop"),c.$eval(a.getValue(c,e,"index"))),i=a.getExpression(c,e,"onCarouselSilde"),j=a.getExpression(c,e,"onCarouselSild");g=angular.isNumber(g)?g:5e3,b(function(){h=angular.isNumber(h)&&h<d.find(".carousel-inner").children().length?h:1,d.find(".carousel-inner").children().addClass("item"),d.find(".carousel-inner").children().length>=h&&d.find(".active").length<1&&d.find(".carousel-inner").children(":eq("+(h-1)+")").addClass("active")}),c.carouselId=f,$(d).carousel({interval:g,pause:"hover",keyboard:!0}),d.on("slide.bs.carousel",function(){i&&angular.isFunction(i)&&i()}),d.parent().on("slid.bs.carousel",function(){j&&angular.isFunction(j)&&j()})}}}]),a.filter("slice",function(){return function(a,b,c){return(a||[]).slice(b,c)}}),a.directive("fetDataGrid",["$fetUI","httpService","$filter",function(a,b,c){var d="fetDataGrid";return{priority:100,name:d,restrict:"EA",scope:!0,link:function(d,e,f){function g(a,c){var f=function(a,b){d.status=b},g=function(a,b){d.status=b,d.result=a.result,"client"==j?d.pagination.totalCount=a.result.length>0?a.result.length:0:(d.pagination.totalCount=a.result.length,d.pagination.totalCount>d.pagination.pageSize&&n("回傳的資料筆數和分頁設定有錯誤","warning")),(c||angular.noop)(),e.find("[fet-data-pagination]").trigger("fetUpdatePagination",d.pagination,d.actionType)};if("post"===l)b.post(k,a).success(function(a,b){g(a,b)}).error(function(a,b){f(a,b)});else{var h={param:a};b.get(k,h).success(function(a,b){g(a,b)}).error(function(a,b){f(a,b)})}}function h(){if(null==d.result)g($.extend(m,d.pagination),function(){var a=1==d.pagination.currentPage?1:(d.pagination.currentPage-1)*d.pagination.pageSize,b=a+d.pagination.pageSize,f=c("slice")(d.result,a,b);console.log(f);var g={result:f};e.find("table").trigger("fetRenderResult",g)});else{var a=1==d.pagination.currentPage?1:(d.pagination.currentPage-1)*d.pagination.pageSize,b=a+d.pagination.pageSize,f=c("slice")(d.result,a,b),h={result:f};e.find("table").trigger("fetRenderResult",h)}}function i(){g($.extend(m,d.pagination),function(){var a=1,b=a+d.pagination.pageSize,f=c("slice")(d.result,a,b);console.log(f);var g={result:f};e.find("table").trigger("fetRenderResult",g)})}d.name="fetDataGrid";{var j=angular.lowercase(f.actionType)||"client",k=f.actionUrl,l=angular.lowercase(f.actionMethod)||"get",m=a.getScope(d,f,"sActionParam");a.getScope(d,f,"sActionConfig")}if(d.modelName=a.getValue(d,f,"ngModel"),console.log(d),k){0==e.find("[fet-data-pagination]").length&&g(m),d.result=null;var n=function(a,b){var c="";0===e.find('div[name="result-msg"] > .alert').length&&(c='<div name="result-msg" ><div name="result-msg" class="alert alert-'+b+'"><h4>警告！</h4><p>'+a+"</p></div></div>"),e.prepend(c)};e.on("fetChangePageEvent",function(a,b){console.log("data grid fetChangePageEvent"),a.isPropagationStopped()&&a.stopPropagation(),a.isDefaultPrevented&&a.preventDefault(),d.pagination=b,"server"==j?i():h()})}}}}]),a.directive("fetDataPagination",["$fetUI","$timeout",function(a,b){var c="fetDataPagination";return{name:c,priority:98,template:'<ul name="pagination" ><li class="{{str}}"><a href="" ng-click="goFirst()" >‹‹&nbsp第一頁</a></li><li class="{{str}}"><a href="" ng-click="previous()">‹&nbsp上一頁</a></li><li name="pageNumber-{{number}}"  ng-repeat="number in pageNumber track by $index"><a href="" ng-click="goNumber(number,true)">{{number}}</a></li><li  class="{{eStr}}"><a href="" ng-click="next()">下一頁&nbsp›</a></li><li class="{{eStr}}"><a href="" ng-click="goLast()">最後一頁&nbsp››</a></li></ul>',restrict:"EA",scope:!0,require:"?fetDataGrid",link:function(c,d,e){function f(a){return a.miniPage=1,angular.isNumber(a.totalCount)?(a.totalCount=parseInt(a.totalCount),a.pageSize=angular.isNumber(a.pageSize)?a.pageSize:20,a.currentPage=angular.isNumber(a.currentPage)?a.currentPage:1,a.maxPage=t(),a.pageCount=s(),a):void 0}var g=a.getValue(c,e,"totalCount"),h=a.getValue(c,e,"pageSize"),i=a.getValue(c,e,"pageCount"),j=a.getValue(c,e,"currentPage"),k=a.getValue(c,e,"displaySize");c.paginationOption={totalCount:g?parseInt(g):0,pageSize:h?parseInt(h):20,pageCount:i?parseInt(i):10,currentPage:j?parseInt(j):1};var l=null,m=null,n=null;c.name="fetPagination",console.log(c),"s"==angular.lowercase(k)?n="pagination pagination-sm":"m"==angular.lowercase(k)||null==angular.lowercase(k)?n="pagination":"l"==angular.lowercase(k)&&(n="pagination pagination-lg"),d.find("ul[name=pagination]").addClass(n),c.goFirst=function(){c.goNumber(c.paginationOption.miniPage,!0)},c.previous=function(){var a=c.paginationOption;a.currentPage>a.miniPage&&c.goNumber(a.currentPage-1,!0)},c.next=function(){var a=c.paginationOption;a.currentPage<a.maxPage&&c.goNumber(a.currentPage+1,!0)},c.goLast=function(){c.goNumber(c.paginationOption.maxPage,!0)},c.goNumber=function(b,e){c.paginationOption.currentPage=b;var f=c.pageNumber,g=c.paginationOption;f&&0!=f.length||q(),b==g.maxPage||b==g.miniPage?q():f[g.pageCount-1]==b?(f.push(b+1),f.shift(0)):f[0]==b&&(f.pop(),f.unshift(b-1)),r(),a.isTrue(e)&&d.triggerHandler("fetChangePageEvent",g)};var o=function(a){return f(a)},p=function(){return new Array(c.paginationOption.pageCount)};c.pageNumber=p();var q=function(){c.pageNumber=[];c.paginationOption.currentPage;if(0!=c.paginationOption.currentPage)for(var a=0;a<c.paginationOption.pageCount;a++){var b=c.paginationOption.currentPage;c.paginationOption.currentPage===c.paginationOption.miniPage?b=1:c.paginationOption.currentPage+c.paginationOption.pageCount>c.paginationOption.maxPage?b=1:c.paginationOption.currentPage===c.paginationOption.maxPage&&(b=c.paginationOption.maxPage-c.paginationOption.pageCount+1),c.pageNumber[a]=b+a}},r=function(){var a=c.paginationOption;a.currentPage==a.miniPage?(l="prev disabled",m=null):a.currentPage==a.maxPage?(l=null,m="prev disabled"):(l=null,m=null),c.str=l,c.eStr=m},s=function(){var a,b=e.pageCount||10;return angular.isNumber(c.paginationOption.pageCount)?b=c.paginationOption.pageCount:e.pageCount&&(b=parseInt(e.pageCount)),a=t(),angular.isNumber(a)&&b>a&&(b=a),b},t=function(){var a,b=c.paginationOption;return a=angular.isNumber(b.maxPage)?b.maxPage:b.totalCount%b.pageSize==0?b.totalCount/b.pageSize:Math.floor(b.totalCount/b.pageSize)+1},u=function(){c.paginationOption=o(c.paginationOption),q(),r(),d.triggerHandler("fetChangePageEvent",c.paginationOption),b(function(){d.find('li[name="pageNumber-'+c.paginationOption.currentPage+'"]').addClass("active").siblings().removeClass("active")})};b(function(){u()}),d.on("fetUpdatePagination",function(a,b,f){console.log("pagination fetUpdatePagination"),"server"==f&&(e.totalCount=b.totalCount),c.paginationOption=o(b),c.paginationOption.maxPage=null,c.paginationOption.pageCount=null,c.paginationOption.maxPage=t(),c.paginationOption.pageCount=s(),c.goNumber(c.paginationOption.currentPage,!1),d.find('[name="pageNumber-'+c.paginationOption.currentPage+'"]').addClass("active").siblings().removeClass("active")}),d.on("fetChangePageEvent",function(a,b){console.log("pagination fetChangePageEvent"),d.parent().triggerHandler("fetChangePageEvent",b),d.find('li[name="pageNumber-'+c.paginationOption.currentPage+'"]').addClass("active").siblings().removeClass("active")}),d.on("fetShownPageEvent",function(){d.find("li[name=pageNumber-"+c.paginationOption.currentPage+"]").addClass("active").siblings().removeClass("active")})}}}]),a.directive("fetDatepicker",["$fetUI","$timeout","$compile",function(a,b){var c="fetDatepicker";return{priority:102,require:"?ngModel",name:c,scope:!0,restrict:"EA",template:'<div ng-switch on="dateType" ><div class="{{isRadius}}" ng-switch-when="popover"><input type="text" name="datepicker" class="form-control date date-picker" fet-input-mask mask-format="{{dateFormat}}"><span class="input-group-btn"><button ng-if="dateBtn" class="btn btn-default" type="button" name="datepickerButton"><i class="fa fa-calendar"></i></button></span></div><div class="input-group date date-picker" ng-switch-default></div></div>',link:function(c,d,e){var f=angular.lowercase(a.getValue(c,e,"dateType")),g=a.getScope(c,e,"sDatepickerDisplay"),h=(a.getScope(c,e,"swDatepickerDisable"),a.getOptionManager().getOption("datepickerDisplayOption",g)),i=angular.lowercase(h.direction),j=angular.lowercase(h.clearBtn),k=angular.lowercase(h.autoShow),l=angular.lowercase(h.dateBtn),m=angular.lowercase(h.autoClose),n=a.getValue(c,e,"startDate"),o=a.getValue(c,e,"endDate"),p=(a.getValue(c,e,"ngModel"),a.getValue(c,e,"dateFormat")),q=a.getExpression(c,e,"onDateShow"),r=a.getExpression(c,e,"onDateHide"),s=a.getExpression(c,e,"onDateSelect");k=a.isTrue(k)?!0:!1,l=a.isTrue(l)?!0:!1,m=a.isTrue(m)?!0:!1,j=a.isTrue(j)?!0:!1,f=angular.isString(f)?f:"inline",i=angular.isString(i)?i:"auto",p=angular.isString(p)?p:"yyyy/mm/dd",n=angular.isString(n)?n:!1,o=angular.isString(o)?o:!1,c.dateBtn=l,c.dateFormat=p;var t="input-btn";l&&(t="input-group",b(function(){y()||d.find(".input-group-btn").on("click",function(){d.find(".form-control").datepicker("show")})})),c.isRadius=t,c.dateType=f;var u=function(){var a=null;return e.ngModel&&(a=c.$eval("$parent."+e.ngModel)),angular.isDate(a)||(a=d.find(".date-picker").datepicker("getDate")),a},v={show:function(){q&&c.$evalAsync(function(){q()})},changeDate:function(){if(s&&c.$evalAsync(function(){s()}),"popover"===f){var a=$.inputmask.isValid(d.find(".date-picker").val(),{alias:c.dateFormat});a?C(!0):A(null)}else B(!1)},hide:function(){r&&c.$evalAsync(function(){r()})},clearDate:function(){B(!0)}},w={startDate:n,format:p,autoclose:m,orientation:i,todayHighlight:!0,language:"zh-TW",clearBtn:j,keyboardNavigation:!0,endDate:o};b(function(){d.find(".date-picker").datepicker(w).on("changeDate",function(a){v.changeDate(a)}).on("show",function(a){var b=c.$eval("$parent."+e.ngModel);null==b&&(d.find(".date-picker").find("td.active").removeClass("active"),$(".datepicker-dropdown table.table-condensed td").removeClass("active")),y()?($(".datepicker-dropdown table.table-condensed th").addClass("disabled"),d.find(".date-picker").attr("disabled",!0)):$(".datepicker-dropdown table.table-condensed th").removeClass("disabled"),v.show(a)}).on("hide",function(a){v.hide(a)}).on("clearDate",function(a){v.clearDate(a)});var a=null;if(e.ngModel&&(a=c.$eval("$parent."+e.ngModel)),angular.isDate(a)){var b=u(),f=new Date(b.getTime());f.setHours(0,0,0,0),d.find(".date-picker").datepicker("update",f)}else d.find(".date-picker").val("").datepicker("update");k&&d.find(".date-picker").datepicker("show")});var x=c.$watch(function(){var a=c.$eval("$parent."+e.ngModel);return angular.isDate(a)?a.getTime():null},function(a,b){if(a!==b)if(a){var c=new Date(a);c.setHours(0,0,0),d.find(".date-picker").datepicker("update",c)}else d.find(".date-picker").val("").datepicker("update")}),y=function(){var b,d;return b=a.getScope(c,e,"swDatepickerDisable"),d=a.isTrue(b)?!0:!1},z=c.$watch(function(){var a=y();return a},function(c){c=a.isTrue(c)?!0:!1,b(function(){d.find(".date-picker").datepicker(w),"popover"===f?c?(d.find(".date-picker").datepicker("setDaysOfWeekDisabled","0,1,2,3,4,5,6"),d.find(".date-picker").attr("disabled",!0),d.find('[name="datepickerButton"]').attr("disabled",!0),d.find(".input-group-btn").on("click",function(){d.find(".form-control").datepicker("hide")})):(d.find(".date-picker").datepicker("setDaysOfWeekDisabled",""),d.find(".date-picker").attr("disabled",!1),d.find('[name="datepickerButton"]').attr("disabled",!1),d.find(".input-group-btn").on("click",function(){d.find(".form-control").datepicker("show")})):c?(d.find(".date-picker").find(".table-condensed td").addClass("disabled"),d.find(".date-picker").find(".table-condensed th").addClass("disabled")):(d.find(".date-picker").find(".table-condensed td").removeClass("disabled"),d.find(".date-picker").find(".table-condensed th").removeClass("disabled"))})});d.on("$destroy",function(){(x||angular.noop)(),(z||angular.noop)()});var A=function(a){var b=u();a||(b=null),b?(a.setHours(b.getHours(),b.getMinutes(),b.getSeconds()),c.datePickerValue=a):(c.datePickerValue=null,d.find(".date-picker").find("td.active").removeClass("active")),e.ngModel&&c.$eval("$parent."+e.ngModel+"=datePickerValue")},B=function(a){c.$evalAsync(function(){var b=d.find(".date-picker").datepicker("getDate");A(a?null:b)})},C=function(){c.$evalAsync(function(){var a=d.find(".date-picker").val(),b=d.find(".date-picker").datepicker("getDate");A(""===a?null:b)})}}}}]),a.directive("fetDatepickerRange",["$fetUI","$timeout","$compile",function(a,b,d){var e="fetDatepickerRange";return{priority:102,require:"?ngModel",name:e,scope:!0,restrict:"EA",template:'<div class="row"><div class="date-picker input-group input-daterange"></div></div>',link:function(e,f,g){{var h=angular.lowercase(a.getValue(e,g,"dateType")),i=a.getScope(e,g,"sDatepickerDisplay"),j=(a.getScope(e,g,"swDatepickerDisable"),a.getOptionManager().getOption("datepickerRangeDisplayOption",i)),k=angular.lowercase(j.direction),l=angular.lowercase(j.clearBtn),m=angular.lowercase(j.autoShow),n=angular.lowercase(j.dateBtn),o=angular.lowercase(j.autoClose),p=a.getValue(e,g,"dateFormat"),q=a.getValue(e,g,"startDate"),r=a.getValue(e,g,"endDate"),s=a.getExpression(e,g,"onDateShow"),t=a.getExpression(e,g,"onDateHide"),u=a.getExpression(e,g,"onDateSelect"),v=f.find(".date-picker"),w=null;new Array}n=a.isTrue(n)?!0:!1,o=a.isTrue(o)?!0:!1,l=a.isTrue(l)?!0:!1,m=a.isTrue(m)?!0:!1,h=angular.isString(h)?h:"inline",k=angular.isString(k)?k:"auto",p=angular.isString(p)?p:"yyyy/mm/dd",q=angular.isString(q)?q:!1,r=angular.isString(r)?r:!1;var x=function(a){e.dates=a,e.$evalAsync(function(){e.$eval("$parent."+g.ngModel+"= dates")})},y=function(a){var b=F();"start"==a?b[0]=null:b[1]=null},z=e.$watch(function(){var a=F();return a},function(a,b){if(!angular.equals(a,b)&&2==a.length){var c=null!=a[0]?new Date(a[0]):null,d=null!=a[1]?new Date(a[1]):null;if(null!=c&&null!=d&&c.getTime()>d.getTime()){c=new Date(d.getTime());var e=[];e=[c,d],x(e)}D(c,d),E(c,d)}},!0),A=function(){var b,c;return b=a.getScope(e,g,"swDatepickerDisable"),c=a.isTrue(b)?!0:!1},B=e.$watch(function(){var a=A();return a},function(c){c=a.isTrue(c)?!0:!1,b(function(){"popover"===h?c?(f.find(".date-picker").find("input").datepicker("setDaysOfWeekDisabled","0,1,2,3,4,5,6"),f.find(".date-picker input").attr("disabled",!0),f.find('[name="datepickerButtonFrom"]').attr("disabled",!0),f.find('[name="datepickerButtonTo"]').attr("disabled",!0),f.find(".input-group-btn.start").on("click",function(){f.find('[name="from"]').datepicker("hide")}),f.find(".input-group-btn.end").on("click",function(){f.find('[name="to"]').datepicker("hide")})):(f.find(".date-picker").find("input").datepicker("setDaysOfWeekDisabled",""),f.find(".date-picker input").attr("disabled",!1),f.find('[name="datepickerButtonFrom"]').attr("disabled",!1),f.find('[name="datepickerButtonTo"]').attr("disabled",!1),f.find(".input-group-btn.start").on("click",function(){f.find('[name="from"]').datepicker("show")}),f.find(".input-group-btn.end").on("click",function(){f.find('[name="to"]').datepicker("show")})):c?(f.find(".date-picker").find(".table-condensed td").addClass("disabled"),f.find(".date-picker").find(".table-condensed th").addClass("disabled")):(f.find(".date-picker").find(".table-condensed td").removeClass("disabled"),f.find(".date-picker").find(".table-condensed th").removeClass("disabled"))})}),C=function(a){function b(){return null!=i&&null!=j&&i.getTime()>j.getTime()&&(i=new Date(j.getTime())),n[0]=angular.isDate(i)?e(n[0],i):null,n}function d(){x(n)}function e(a,b){return null===a||a===c?b:(a.setFullYear(b.getFullYear()),a.setMonth(b.getMonth()),a.setDate(b.getDate()),a)}function g(){n[1]=angular.isDate(j)?e(n[1],j):null}var i,j,k=h,l=null,m=null,n=F();if("inline"===k)"start"===a?(l=f.find(".date-picker").find(".range-start").datepicker("getDate"),i=null==l?null:l,b(),d()):(m=f.find(".date-picker").find(".range-end").datepicker("getDate"),j=null==m?null:m,g(),d());else{var o=$.inputmask.isValid(f.find(".date-picker").find('[name="from"]').val(),{alias:p});i=o?f.find('[name="from"]').datepicker("getDate"):null,o=$.inputmask.isValid(f.find(".date-picker").find('[name="to"]').val(),{alias:p}),j=o?f.find('[name="to"]').datepicker("getDate"):null,b(),g(),d()}},D=function(a){if(null==a)f.find(".date-picker").find('[name="from"]').val("").datepicker("update"),f.find(".date-picker").find(".range-start").datepicker("update",null);else{var b=new Date(a.getTime());b.setHours(0,0,0,0),f.find(".date-picker").find('[name="from"]').datepicker("update",b),f.find(".date-picker").find(".range-start").datepicker("update",b)}f.find(".date-picker").datepicker("updateDates")},E=function(a,b){if(null==b)f.find(".date-picker").find('[name="to"]').val("").datepicker("update"),f.find(".date-picker").find(".range-end").datepicker("update",null);else{var c=new Date(b.getTime());c.setHours(0,0,0,0),f.find(".date-picker").find('[name="to"]').datepicker("update",c),f.find(".date-picker").find(".range-end").datepicker("update",c)}f.find(".date-picker").datepicker("updateDates")},F=function(){var a=[];return g.ngModel?(a=e.$eval("$parent."+g.ngModel),angular.isArray(a)&&2==a.length?a:[null,null]):null};if("popover"==h){w='<input type="text" class="form-control" name="from" fet-input-mask mask-format="'+p+'" style="text-align: left;" ><span class="input-group-addon"> 至 </span><input type="text" class="form-control" name="to" fet-input-mask mask-format="'+p+'" style="text-align: left">';var G=d(w)(e);if(v.append(G),v.datepicker({startDate:q,autoclose:o,endDate:r,format:p,orientation:k,todayHighlight:"true",language:"zh-TW",clearBtn:l}).on("changeDate",function(){C()}).on("clearDate",function(a){y("from"==a.target.name||"range-start"==a.target.className?"start":"end")}),b(function(){var a=F();if(angular.isDate(a[1])){var b=a[1],c=new Date(b.getTime());c.setHours(0,0,0,0),f.find(".date-picker").find('[name="to"]').datepicker("update",c)}else f.find(".date-picker").find('[name="to"]').val("").datepicker("update"),f.find(".date-picker").find(".range-end").find("td.active").removeClass("active");if(angular.isDate(a[0])){var d=a[0],c=new Date(d.getTime());c.setHours(0,0,0,0),f.find(".date-picker").find('[name="from"]').datepicker("update",c)}else f.find(".date-picker").find('[name="from"]').val("").datepicker("update"),f.find(".date-picker").find(".range-start").find("td.active").removeClass("active");m&&f.find(".date-picker input").datepicker("show")}),n){var H="";A()&&(H="disabled");var I='<span class="input-group-btn start"><button class="btn btn-default" type="button" name="datepickerButtonFrom" style="border-top-left-radius: 0; border-bottom-left-radius: 0;" '+H+'><i class="fa fa-calendar"></i></button></span>',J='<span class="input-group-btn end"><button class="btn btn-default" type="button" name="datepickerButtonTo" '+H+'><i class="fa fa-calendar"></i></button></span>';f.find('[name="from"]').after(I),f.find('[name="to"]').after(J),A()||(f.find(".input-group-btn.start").on("click",function(){f.find('[name="from"]').datepicker("show")}),f.find(".input-group-btn.end").on("click",function(){f.find('[name="to"]').datepicker("show")}))}}else w='<div class="range-start"></div><span class="input-group-addon"> 至 </span><div class="range-end"></div>',v.append(w),v.datepicker({startDate:q,autoclose:o,inputs:[v.find(".range-start"),v.find(".range-end")],endDate:r,format:p,orientation:k,todayHighlight:"true",language:"zh-TW",clearBtn:l}).on("changeDate",function(a){C("range-start"==a.target.className?"start":"end")}).on("clearDate",function(a){"range-start"==a.target.className||"from"==a.target.name?(y("start"),f.find(".date-picker").find(".range-start").find("td.active").removeClass("active")):(y("end"),f.find(".date-picker").find(".range-end").find("td.active").removeClass("active"))}),b(function(){var a=F();if(angular.isDate(a[1])){var b=a[1],c=new Date(b.getTime());c.setHours(0,0,0,0),f.find(".date-picker").find(".range-end").datepicker("update",c)}else f.find(".date-picker").find(".range-end").find("td.active").removeClass("active");if(angular.isDate(a[0])){var d=a[0],c=new Date(d.getTime());c.setHours(0,0,0,0),f.find(".date-picker").find(".range-start").datepicker("update",c)}else f.find(".date-picker").find(".range-start").find("td.active").removeClass("active")});f.on("$destroy",function(){(z||angular.noop)(),(B||angular.noop)()}),f.find('[name="from"]').on("show",function(){A()?($(".datepicker-dropdown table.table-condensed th").addClass("disabled"),f.find(".date-picker").attr("disabled",!0)):$(".datepicker-dropdown table.table-condensed th").removeClass("disabled"),s&&e.$evalAsync(function(){s()})}),f.find('[name="to"]').on("show",function(){A()?($(".datepicker-dropdown table.table-condensed th").addClass("disabled"),f.find(".date-picker").attr("disabled",!0)):$(".datepicker-dropdown table.table-condensed th").removeClass("disabled"),s&&e.$evalAsync(function(){s()})}),v.on("hide",function(){$(".datepicker-dropdown table.table-condensed th").removeClass(A()?"disabled":"disabled"),t&&e.$evalAsync(function(){t()})}),v.on("changeDate",function(){u&&e.$evalAsync(function(){u()})})}}}]),a.directive("fetDropdown",["$fetUI",function(a){return{name:"fet-dropdown",scope:!0,restrict:"EA",replace:!0,transclude:"element",template:'<div class="btn-group drop{{sDropdownDisplay.direction}}"><button type="button" class="btn btn-{{dropdownTheme}} {{sDropdownDisplay.size}}">{{dropdownText}}</button><button type="button" class="btn btn-{{dropdownTheme}} {{sDropdownDisplay.size}} dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-{{sDropdownDisplay.direction}}"></i></button></div>',compile:function(b,c,d){return{post:function(b,c,e){var f=a.getScope(b,e,"sDropdownDisplay"),g=a.getValue(b,e,"dropdownTheme"),h=a.getValue(b,e,"dropdownText").toString(),i=a.getExpression(b,e,"onDropdownShow"),j=a.getExpression(b,e,"onDropdownShown"),k=a.getExpression(b,e,"onDropdownHide"),l=a.getExpression(b,e,"onDropdownHiden");
f.direction="down"==angular.lowercase(f.direction)?"bottom":f.direction;var m="";d(b.$parent,function(a){var b=a;b.addClass("dropdown-menu"),b.attr("role","menu"),m=b}),angular.isString(g)||(g="default");a.getOptionManager().getOption("dropdownDisplay",{});angular.isString(f.size)&&("l"==angular.lowercase(f.size)?f.size="btn-lg":"s"==angular.lowercase(f.size)&&(f.size="btn-sm")),angular.isString(f.direction)&&(f.direction="bottom"==f.direction.toLowerCase()?"down":"up"),b.sDropdownDisplay=f,b.dropdownTheme=g,b.dropdownText=h,c.append(m),c.on("show.bs.dropdown",function(){i&&angular.isFunction(i)&&i()}),c.on("shown.bs.dropdown",function(){j&&angular.isFunction(j)&&j()}),c.on("hide.bs.dropdown",function(){k&&angular.isFunction(k)&&k()}),c.on("hidden.bs.dropdown",function(){l&&angular.isFunction(l)&&l()})}}}}}]),a.factory("$optionManager",function(){var a={};return a.tooltipDefault={animation:!0,container:"body",html:"false",placement:"auto",trigger:"click"},a.tooltipEventDefault={toggle:"click"},a.gritterDefault={image:null,sticky:!1,class_name:""},a.gritterDisplayDefault={show:100,hide:100,duration:500,theme:"black",autoShow:!1,autoHide:!0,position:"top-right"},a.gritterEventDefault={show:"click"},a.popoverDefault={animation:!0,container:"body",html:"true",placement:"auto"},a.popoverEventDefault={toggle:"click"},a.modalDefault={backdrop:"static",keyboard:!0,show:!1},a.alertDefault={autoShow:!1,hideDelaly:null,closable:!0,duration:0},a.selectDefault={},a.displayDefault={placement:"auto",show:200,hide:200,autoShow:!1},a.alertDisplayDefault={autoShow:!0,hideDelaly:null,closable:!0,show:0,hide:0},a.modalDisplayDefault={show:200,hide:200,autoShow:!1,esc:!0,closable:!0},a.dropdownDisplayDefault={direction:"top",size:"m"},a.fileuploadOptionsDefault={remove:"移除",selected:"選擇了:",invalid:"此檔案類型不允許上傳",toomany:"上傳檔案數量過多",tip:!1},a.alertTriggerEventDefault={show:"click",hide:"click"},a.tabDisplayOptionDefault={direction:"top",fixed:"auto",isBorder:!1,navDirection:""},a.accordionDisplayOptionDefault={fixed:"auto",isBorder:!1},a.fancyboxDefault={type:null,title:null,content:null,padding:10,loop:!1,scrolling:"auto",mouseWheel:!1,autoSize:!1,helpers:{title:{type:"outside"}},iframe:{scrolling:"auto",preload:!0},openEffect:"fade",closeEffect:"fade",nextEffect:"elastic",prevEffect:"elastic",nextSpeed:"500",prevSpeed:"500",closeMethod:"zoomOut",openMethod:"zoomIn",nextMethod:"changeIn",prevMethod:"changeOut",beforeLoad:null,afterLoad:null,beforeShow:null,afterShow:null,beforeClose:null,afterClose:null},a.fancyboxDisplayDefault={show:500,hide:500,autoShow:!1,autoHide:null,autoPlay:!1,high:600,width:800,esc:!0,fullScreen:!0,playSpeed:5e3},a.datepickerDisplayOptionDefault={direction:"auto",clearBtn:!0,autoShow:!1,dateBtn:!1,autoClose:!0,disabled:!1},a.datepickerRangeDisplayOptionDefault={direction:"auto",clearBtn:!0,autoShow:!1,dateBtn:!1,autoClose:!0,disabled:!1},a.timepickerDefault={title:null,container:"body",html:!0,delay:{show:0,hide:0}},a.timepickerDisplayDefault={autoShow:!1,autoHide:null,direction:"top",clearBtn:!0,timeBtn:!1,secSelect:!0,disabled:!1},a.getOption=function(a,b){var c={};switch(a){case"gritterDefault":$.extend(c,this.gritterDefault,b);break;case"gritterDisplayDefault":$.extend(c,this.gritterDisplayDefault,b);break;case"fetTooltip":$.extend(c,this.tooltipDefault,b);break;case"fetTooltipEvent":$.extend(c,this.tooltipEventDefault,b);break;case"fetPopover":$.extend(c,this.popoverDefault,b);break;case"fetPopoverEvent":$.extend(c,this.popoverEventDefault,b);break;case"fetModal":$.extend(c,this.modalDefault,b);break;case"fetAlert":$.extend(c,this.alertDefault,b);break;case"display":$.extend(c,this.displayDefault,b);break;case"alertDisplay":$.extend(c,this.alertDisplayDefault,b);break;case"alertEvent":$.extend(c,this.alertTriggerEventDefault,b);break;case"modalDisplay":$.extend(c,this.modalDisplayDefault,b);break;case"dropdownDisplay":$.extend(c,this.dropdownDisplayDefault,b);break;case"fileuploadOptions":$.extend(c,this.fileuploadOptionsDefault,b);break;case"fetFancybox":$.extend(c,this.fancyboxDefault,b);break;case"fetFancyboxDisplay":$.extend(c,this.fancyboxDisplayDefault,b);break;case"tabDisplayOption":$.extend(c,this.tabDisplayOptionDefault,b);break;case"accordionDisplayOption":$.extend(c,this.accordionDisplayOptionDefault,b);break;case"datepickerDisplayOption":$.extend(c,this.datepickerDisplayOptionDefault,b);break;case"datepickerRangeDisplayOption":$.extend(c,this.datepickerRangeDisplayOptionDefault,b);break;case"fetTimepicker":$.extend(c,this.timepickerDefault,b);break;case"fetTimepickerDisplay":$.extend(c,this.timepickerDisplayDefault,b)}return c},a}),a.factory("$fetUI",["$parse","$optionManager","loggingService","validateService",function(a,b,d,e){var f={};return f.isFalse=function(a){return a===!1||"false"==angular.lowercase(a)},f.isTrue=function(a){return a===!0||"true"==angular.lowercase(a)},f.getButtonSize=function(a){switch(a=angular.lowercase(a)){case"l":return"btn-lg";case"f":return"btn-block";case"s":return"btn-sm";default:return""}},f.log=function(a,b){alert(b+":"+a)},f.error=function(a,b){d.error(b,a)},f.debug=function(a,b){d.debug(b,a)},f.info=function(a,b){d.info(b,a)},f.warn=function(a,b){d.warn(b,a)},f.getValidateManager=function(){return e},f.getOptionManager=function(){return b},f.getValue=function(a,b,c){return b[c]},f.getScope=function(a,b,c){return a.$eval(b[c])},f.getExpression=function(b,d,e){if(d[e]){var f=d[e];f=f.replace(/\([a-zA-Z0-9,;.]*\)/,"(params)");var g=a(f);return function(a){g(b,a)}}return c},f.callBackEventByExpression=function(a,b){b&angular.isFunction(b)&&a.$apply(function(){})},f}]),a.factory("gritterService",["$fetUI",function(a){var b={},c=function(b,c,d,e){var f=a.getOptionManager(),g=f.getOption("gritterDefault",{title:b,text:c,image:d}),h=f.getOption("gritterDisplayDefault",e);if(h&&(angular.isNumber(h.autoHide)?(g.time=h.autoHide,g.sticky=!1,g._autoHide=!0):0==h.autoHide||"false"==angular.lowercase(h.autoHide)?(g.sticky=!0,g._autoHide=!1):(g.sticky=!1,g.time=6e3,g._autoHide=!0),angular.isNumber(h.duration)&&(g.fade_in_speed=h.duration,g.fade_out_speed=h.duration),angular.isString(e.theme)))switch(e.theme){case"info":case"warning":case"success":case"danger":g.class_name="alert alert-"+e.theme;break;case"white":g.class_name="gritter-light"}return g};return b.gritterOption={},b.promiseArray=[],b.add=function(a){var b;return b=$.gritter.add(a),0==a._autoHide&&this.promiseArray.push(b),b},b.addImageMessage=function(a,b,d,e){return this.add(c(a,b,d,e))},b.addMessage=function(a,b,d){return this.add(c(a,b,"",d))},b.getOption=function(a,b,d,e){return c(a,b,d,e)},b.removeAll=function(){$.gritter.removeAll(),this.promiseArray=[]},b.remove=function(a){$.gritter.remove(a)},b.getPromiseArray=function(){return this.promiseArray},b.removeFirstPromiseArray=function(){return this.promiseArray.shift()},b.removeLastPromiseArray=function(){return this.promiseArray.pop()},b.removeFirst=function(){var a=this.promiseArray.shift();angular.isUndefined(a)?b.removeAll():$.gritter.remove(a)},b.removeLast=function(){var a=this.promiseArray.pop();angular.isUndefined(a)?b.removeAll():$.gritter.remove(a)},b}]),a.factory("jqueryInputmaskProvider",["loggingService",function(a){var b="success",c="error";$.extend($.inputmask.defaults.definitions,{r:{validator:function(a){var b=function(a){var b=0,c="ABCDEFGHJKLMNPQRSTUVXYWZIO";b=c.indexOf(a.substr(0,1))+10,b=Math.floor(b/10)+b%10*9;for(var d=1;d<a.length-1;d++)b+=a.substr(d,1)*(9-d);return b+=1*a.substr(9,1)},c=!0,d=new RegExp("[A-Za-z][12]\\d{8}");if(d.test(a)){var e=b(a);if(e%10!=0)for(var f=1*a.substr(9,1),g=0;10>g;g++){var h=e-f+g;if(h%10==0){c=!1;break}}}else c=!1;return c},cardinality:10,casing:"upper",prevalidator:[{validator:"[A-Za-z]",cardinality:1},{validator:"[A-Za-z][12]",cardinality:2},{validator:"[A-Za-z][12]\\d",cardinality:3},{validator:"[A-Za-z][12]\\d{2}",cardinality:4},{validator:"[A-Za-z][12]\\d{3}",cardinality:5},{validator:"[A-Za-z][12]\\d{4}",cardinality:6},{validator:"[A-Za-z][12]\\d{5}",cardinality:7},{validator:"[A-Za-z][12]\\d{6}",cardinality:8},{validator:"[A-Za-z][12]\\d{7}",cardinality:9}]},m:{validator:"[0][9]\\d{8}",cardinality:10,prevalidator:[{validator:"[0]",cardinality:1},{validator:"[0][9]",cardinality:2},{validator:"[0][9]\\d",cardinality:3},{validator:"[0][9]\\d{2}",cardinality:4},{validator:"[0][9]\\d{3}",cardinality:5},{validator:"[0][9]\\d{4}",cardinality:6},{validator:"[0][9]\\d{5}",cardinality:7},{validator:"[0][9]\\d{6}",cardinality:8},{validator:"[0][9]\\d{7}",cardinality:9}]},t:{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9][:][0-5][0-9]",cardinality:8,prevalidator:[{validator:"[0-2]",cardinality:1},{validator:"[0][0-9]|[1][0-9]|[2][0-3]",cardinality:2},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:]",cardinality:3},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5]",cardinality:4},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9]",cardinality:5},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9][:]",cardinality:6},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9][:][0-5]",cardinality:7}]}}),$.extend($.inputmask.defaults.aliases,{thousands:{greedy:!1,prefix:"",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:"*",digitsOptional:!0,clearMaskOnLostFocus:!1},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1}}}});var d={};return d.rocid={validate:function(a){if(!a)return b;var d=$.inputmask.isValid(a,{mask:"r"});return d?b:c},successMessage:"",errorMessage:"身份證字號檢核失敗，請確認填入內容是否正確",warningMessage:""},d.email={validate:function(a){if(!a)return b;var d=$.inputmask.isValid(a,{alias:"email"});return d?b:c},successMessage:"",errorMessage:"e-mail檢核失敗，請確認填入內容是否正確",warningMessage:""},d.mobile={validate:function(d){if(!d)return b;var e=$.inputmask.isValid(d,{alias:"decimal"});if(e){var f=$.inputmask.isValid(d,{mask:"m"});return f?b:c}return a.debug("mobile","參數型態只能為number"),c},successMessage:"",errorMessage:"手機號碼檢核失敗，請確認填入內容是否正確",warningMessage:""},d.number={validate:function(a){if(!a)return b;var d=$.inputmask.isValid(a,{alias:"decimal"});return d?b:c},successMessage:"",errorMessage:"數字型態檢核失敗，請確認填入內容是否正確",warningMessage:""},d.telephone={validate:function(a){var d=!1;if(angular.isString(a)){var e,f=!1;"(02)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||8==e.length&&(d=!0)):"(037)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||6==e.length&&(d=!0)):"(03)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(049)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||7==e.length&&(d=!0)):"(04)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||(7==e.length||8==e.length)&&(d=!0)):"(05)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(06)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(07)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(0826)"==a.substring(0,6)?(e=a.substring(6),f=isNaN(e),f||5==e.length&&(d=!0)):"(0836)"==a.substring(0,6)?(e=a.substring(6),f=isNaN(e),f||5==e.length&&(d=!0)):"(082)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||6==e.length&&(d=!0)):"(089)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||6==e.length&&(d=!0)):"(08)"==a.substring(0,4)&&(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0))}return d?b:c},successMessage:"",errorMessage:"電話號碼型態檢核失敗，請確認填入內容是否正確",warningMessage:""},d.date={validate:function(a,d){if(!a)return b;var e=angular.isString(d)?d:"yyyy/mm/dd";if(angular.isDate(a))return b;var f=$.inputmask.isValid(a,{alias:e});return f?b:c},successMessage:"",errorMessage:"日期型態檢核失敗，請確認填入內容是否正確",warningMessage:""},d.required={validate:function(a){var d=!0;return(angular.isUndefined(a)||null==a||""==a)&&(d=!1),d?b:c},successMessage:"",errorMessage:"必填狀態檢核失敗，請確認是否確實填入內容",warningMessage:""},d["max-length"]={validate:function(d,e){if(!d)return b;if(angular.isString(d)){var f=!0,g=!0;return g=$.inputmask.isValid(e,{alias:"decimal"}),g?(d.length>e&&(f=!1),f?b:c):(a.debug("max-length","第二參數型態只能為number"),c)}return c},successMessage:"",errorMessage:"最大長度檢核失敗，請確認填入內容是否正確",warningMessage:""},d["min-length"]={validate:function(d,e){if(!d)return b;if(angular.isString(d)){var f=!0,g=!0;return g=$.inputmask.isValid(e,{alias:"decimal"}),g?(d.length<e&&(f=!1),f?b:c):(a.debug("min-length","第二參數型態只能為number"),c)}return c},successMessage:"",errorMessage:"最小長度檢核失敗，請確認填入內容是否正確",warningMessage:""},d.time={validate:function(a){if(!a)return b;var d;d=angular.isDate(a)?a.format("hh:mm:ss"):a;var e=$.inputmask.isValid(d,{mask:"t"});return e?b:c},successMessage:"",errorMessage:"時間檢核失敗，請確認填入內容是否正確",warningMessage:""},d}]),a.factory("validateService",["jqueryInputmaskProvider",function(a){var b=[],d={};return d.getValidators=function(){return b},d.register=function(a,b){if(this.getValidators[a])throw"Error,Validator can't duplicate";return b?void(this.getValidators[a]=b):c},d.getValidator=function(a){return this.getValidators[a]?this.getValidators[a]:c},d.validate=function(a){var b=$('[validate-id="'+a+'"]');b.triggerHandler("fetValidateEvent");var c={status:b.attr("validate-status"),message:b.attr("validate-message"),id:a};return c},d._validate=function(a){a.triggerHandler("fetValidateEvent");var b={status:a.attr("validate-status"),message:a.attr("validate-message"),id:a.attr("validate-id")};return b},d.validateList=function(a){for(var b=[],c=0,e=a.length;e>c;c++)b.push(d.validate(a[c]));return b},d.validateForm=function(a){var b=[];return $('[form-id="'+a+'"] [fet-validate]').each(function(){b.push(d._validate($(this)))}),b},d.register("rocid",a.rocid),d.register("date",a.date),d.register("email",a.email),d.register("number",a.number),d.register("mobile",a.mobile),d.register("telephone",a.telephone),d.register("required",a.required),d.register("max-length",a["max-length"]),d.register("min-length",a["min-length"]),d.register("time",a.time),d}]),a.factory("$triggerService",function(){return{registerEvent:function(a,b,c,d,e){var f=a+b;f=f.toLowerCase();var g,h;switch(f){case"click":case"hideclick":case"showclick":c.on("click",function(){g=$("["+e+'="'+d+'"]'),h=g.data("fetIsShow"),g.triggerHandler(0==h?"fetShowEvent":"fetHideEvent")});break;case"hidehover":c.on("mouseleave",function(){g=$("#"+d),g.triggerHandler("fetHideEvent")});break;case"showhover":c.on("mouseenter",function(){g=$("#"+d),g.triggerHandler("fetShowEvent")});case"showfocus":c.on("focusin",function(){g=$("#"+d),g.triggerHandler("fetShowEvent")});break;case"hidefocus":c.on("focusout",function(){g=$("#"+d),g.triggerHandler("fetHideEvent")})}},showById:function(a){this.show($("#"+a))},hideById:function(a){this.hide($("#"+a))},showByTrigger:function(a,b){var c="["+a+'-id="'+b+'"]';this.show(c)},show:function(a){a.triggerHandler("fetShowEvent")},hide:function(a){a.triggerHandler("fetHideEvent")},load:function(a){a.triggerHandler("fetLoadEvent")},reload:function(a){a.triggerHandler("fetReloadEvent")},upload:function(a){a.triggerHandler("fetUploadEvent")}}}),a.factory("FetAlertService",function(a){return{show:function(b){var c={id:b};a.$broadcast("onAlertShow",c)},hide:function(b){var c={id:b};a.$broadcast("onAlertHide",c)}}}),a.factory("labelFactory",function(){return{getCssString:function(a,b){var c="";return a=angular.isUndefined(a)||""==a?"label":a.toLowerCase(),b=angular.isUndefined(b)||""==b?"default":b.toLowerCase(),c=a+" "+a+"-"+b}}}),a.directive("fetFancybox",["$fetUI","$timeout","fancyboxService",function(a,c,d){var e="fetFancybox";return{name:e,restrict:"A",priority:99,scope:!0,replace:!1,transclude:!1,link:function(e,f,g){function h(){var b=a.getScope(e,g,"swFancyboxTitle");return b?b:""}function i(){var b=a.getScope(e,g,"swFancyboxContent");return b?b:""}var j=(a.getValue(e,g,"fancyboxId"),a.getScope(e,g,"swFancyboxTitle")),k=a.getScope(e,g,"swFancyboxContent"),l=a.getValue(e,g,"fancyboxType"),m=a.getScope(e,g,"sFancyboxDisplay"),n=a.getValue(e,g,"fancyboxTrigger"),o=a.getExpression(e,g,"onFancyboxShow"),p=a.getExpression(e,g,"onFancyboxShown"),q=a.getExpression(e,g,"onFancyboxHide"),r=a.getExpression(e,g,"onFancyboxHidden"),s=($(f).attr("fet-type","fancybox"),a.getOptionManager()),t=s.getOption("fetFancyboxDisplay",m),u=d.getOption(k,j,l,t);n=n?angular.lowercase(n):"click",o&&angular.isFunction(o)&&(u.beforeShow=function(){c(function(){o()})}),p&&angular.isFunction(p)&&(u.afterShow=function(){c(function(){p()})}),q&&angular.isFunction(q)&&(u.beforeClose=function(){c(function(){q()})}),r&&angular.isFunction(r)&&(u.afterClose=function(){c(function(){r()})});var v=$(f);"click"==n?v.on("click",function(){v.triggerHandler("fetFancyboxShowEvent")}):"focus"==n?v.on("focusin",function(){v.triggerHandler("fetFancyboxShowEvent")}):"hover"==n&&v.on("mouseenter",function(){v.triggerHandler("fetFancyboxShowEvent")}),a.isTrue(t.esc)&&$(b).keyup(function(a){27==a.keyCode&&v.triggerHandler("fetFancyboxHideEvent")});var w="";v.on("fetFancyboxShowEvent",function(){d.open(i(),h(),u),angular.isNumber(t.autoHide)&&(w=c(function(){v.triggerHandler("fetFancyboxHideEvent")},t.autoHide))}).on("fetFancyboxHideEvent",function(){d.close(),angular.isNumber(t.autoHide)&&c.cancel(w)}),a.isTrue(t.autoShow)&&v.triggerHandler("fetFancyboxShowEvent")}}}]),a.factory("fancyboxService",["$fetUI",function(a){var b={},c="fetFancybox",d=function(b,d,e,f){var g=a.getOptionManager(),h=g.getOption(c,{});return h.type=e?e:"html",h.openSpeed=f.show,h.closeSpeed=f.hide,a.isTrue(f.esc)&&(h.keys={close:[27]}),angular.isNumber(f.high)&&(h.height=f.high),angular.isNumber(f.width)&&(h.width=f.width),h.autoPlay=f.autoPlay,h.playSpeed=f.playSpeed,f.fullScreen&&(h.height=9999,h.width=9999),h};return b.getOption=function(a,b,c,e){return d(a,b,c,e)},b.open=function(a,b,c){var d={};d=c,d.title=b,"html"===angular.lowercase(d.type)?(d.content=a,$.fancybox.open(d)):(d.content=null,"inline"===angular.lowercase(d.type)?$.fancybox.open("#"+a,d):$.fancybox.open(a,d))},b.show=function(a,b,c,e){var f={};f=d(a,b,c,e),f.title=b,"html"===angular.lowercase(f.type)?(f.content=a,$.fancybox.open(f)):(f.content=null,"inline"===angular.lowercase(f.type)?$.fancybox.open("#"+a,f):$.fancybox.open(a,f))},b.close=function(){$.fancybox.close()},b.trigger=function(a,b){$('[fancybox-id="'+a+'"]').triggerHandler("open"===angular.lowercase(b)?"fetFancyboxShowEvent":"fetFancyboxHideEvent")},b}]),a.directive("fetField",["$fetUI",function(){var a="fetField";return{priority:99,name:a,restrict:"EA",scope:!1,compile:function(a){return a.addClass("form-group"),{post:function(a,b){b.on("fetValidateErrorEvent",function(a,c){b.attr("class","has-error"),b.find(".help-block").triggerHandler("fetValidateErrorEvent",[c])}).on("fetValidateWarningEvent",function(a,c){b.attr("class","has-warning"),b.find(".help-block").triggerHandler("fetValidateWarningEvent",[c])}).on("fetValidateSuccessEvent",function(a,c){b.attr("class","has-success"),b.find(".help-block").triggerHandler("fetValidateSuccessEvent",[c])})}}}}}]),a.directive("fetFileUpload",["$fetUI","$parse",function(a){var b="fetFileUpload";return{priority:101,name:b,scope:{fileuploadId:"@",fileType:"@",fileCount:"@",fileuploadTip:"@",fileuploadAction:"@",sMessageOption:"=",onFileuploadRemove:"&",onFileuploadAppend:"&",onFileuploadSelect:"&",onFileInvalid:"&",onFileTooMany:"&"},restrict:"EA",replace:!0,template:'<form id="{{fileuploadId}}" action="{{fileuploadAction}}" method="post" enctype="multipart/form-data" target="upload-frame" ng-model="isShowHelp" ng-init="isShowHelp=true"><div class="row-fluid"><input type="file" /><input type="submit"  value="Submit" class="btn btn-info"/><span class="help-block" ng-show= "isShowHelp"  >{{fileuploadTip}}</span><br></div><div class="col-md-8"><iframe  ng-show= "isIframe" id="upload-frame" name="upload-frame" src="javascript: void(0)" style="border:#ccc solid 1px; height:70px; width:auto;"></iframe><div id="message"></div></div></form>',link:function(b,c,d){b.fileuploadId,b.fileType;if("file"!=d.type){var e='<div class="alert alert-block alert-danger"><h4>錯誤！</h4><p>fet-fileupload directive不支援此類型標籤，請參考api文件</p></div>';return void c.replaceWith(e)}b.isIframe=!1,c.submit(function(){c.find("iframe").removeClass("ng-hide")}),b.isShowHelp=angular.isString(b.fileuploadTip)&&"false"!=b.fileuploadTip.toLowerCase()?!0:!1;var f=b.sMessageOption,g=a.getOptionManager().getOption("fileuploadOptions",f);b.fileCount||(b.fileCount="1"),c.find('input[type="file"]').MultiFile({accept:b.fileType,max:b.fileCount,STRING:{remove:g.remove,selected:g.selected},error:function(a){b.error=!0,b.errorMsg=a},onFileInvalid:function(){c.find("#message").html(g.invalid),b.onFileInvalid&&angular.isFunction(b.onFileInvalid)&&b.onFileInvalid()},onFileTooMany:function(){c.find("#message").html(g.toomany),b.onFileTooMany&&angular.isFunction(b.onFileTooMany)&&b.onFileTooMany()},onFileRemove:function(){b.onFileuploadRemove&&angular.isFunction(b.onFileuploadRemove)&&b.onFileuploadRemove()},onFileAppend:function(){b.onFileuploadAppend&&angular.isFunction(b.onFileuploadAppend)&&b.onFileuploadAppend()},onFileSelect:function(){b.onFileuploadSelect&&angular.isFunction(b.onFileuploadSelect)&&b.onFileuploadSelect()}})}}}]),a.factory("fileuploadService",[function(){var a={};return a.upload=function(a){$("#"+a).submit()},a}]),a.directive("fetGritter",["$fetUI","$timeout","gritterService",function(a,b,c){var d="fetGritter";return{name:d,restrict:"A",priority:99,scope:!0,replace:!1,transclude:!1,link:function(d,e,f){function g(a){return a.image=i(),a.title=j(),a.text=k(),c.add(a)}function h(a){c.remove(a)}function i(){var b=a.getScope(d,f,"swGritterImage");return b?b:""}function j(){var b=a.getScope(d,f,"swGritterTitle");return b?b:""}function k(){var b=a.getScope(d,f,"swGritterContent");return b?b:""}var l,m=(a.getValue(d,f,"gritterId"),a.getScope(d,f,"swGritterTitle")),n=a.getScope(d,f,"swGritterContent"),o=a.getScope(d,f,"swGritterImage"),p=a.getValue(d,f,"gritterTheme"),q=a.getScope(d,f,"sGritterDisplay"),r=a.getValue(d,f,"gritterTrigger"),s=a.getExpression(d,f,"onGritterShow"),t=a.getExpression(d,f,"onGritterShown"),u=a.getExpression(d,f,"onGritterHide"),v=a.getExpression(d,f,"onGritterHidden"),w=$(e),x=a.getOptionManager(),y=x.getOption("gritterDisplayDefault",q),z=c.getOption(m,n,o,p,y);switch(z.before_open=function(){s&&d.$apply(function(){s()})},z.after_open=function(){t&&b(function(){t(l)},0)},z.before_close=function(a,c){z._before_close(a,c),u&&b(function(){u()},0)},z.after_close=function(){v&&b(function(){v()},0)},w.on("fetGritterShowEvent",function(){l=g(z)}),w.on("fetGritterHideEvent",function(){h(l)}),r){case"hover":w.on("mouseenter",function(){w.triggerHandler("fetGritterShowEvent")});break;case"focus":w.on("focusin",function(){w.triggerHandler("fetGritterShowEvent")});break;default:w.on("click",function(){w.triggerHandler("fetGritterShowEvent")})}a.isTrue(y.autoShow)&&b(function(){w.triggerHandler("fetGritterShowEvent")},0)}}}]),a.factory("gritterService",["$fetUI",function(a){var b={},c=function(c,d,e,f,g){var h=a.getOptionManager(),i=h.getOption("gritterDefault",{title:d,text:c,image:e}),j=h.getOption("gritterDisplayDefault",g);if(j)switch(angular.isNumber(j.autoHide)?(i.time=j.autoHide,i.sticky=!1,i._autoHide=!0):a.isFalse(j.autoHide)?(i.sticky=!0,i._autoHide=!1):(i.sticky=!1,i.time=6e3,i._autoHide=!0),angular.isNumber(j.duration)&&(i.fade_in_speed=j.duration,i.fade_out_speed=j.duration),angular.lowercase(f)){case"info":case"warning":case"success":case"danger":i.class_name="alert alert-"+f;break;case"white":i.class_name="gritter-light";break;default:i.class_name=""}return i._before_close=function(c,d){a.isTrue(d)&&b._removeUIDArray(c.selector.split("-")[2])},i};return b.gritterOption={},b.uidArray=[],b.add=function(b){var c;return c=$.gritter.add(b),a.isFalse(b._autoHide)&&this.uidArray.push(c),c},b.addImageMessage=function(a,b,d,e,f){var g=this.add(c(a,b,d,e,f));return g},b.addMessage=function(a,b,d,e){return this.add(c(a,b,"",d,e))},b.getOption=function(a,b,d,e,f){return c(a,b,d,e,f)},b.removeAll=function(){$.gritter.removeAll(),this.uidArray=[]},b.remove=function(a){var b=this.uidArray.indexOf(a);this._removeUIDArray(b),$.gritter.remove(a)},b._removeUIDArray=function(a){var b=this.uidArray.indexOf(parseInt(a));b>-1&&this.uidArray.splice(b,1)},b.getGritterKeys=function(){return this.uidArray},b.removeFirst=function(){var a=this.uidArray.shift();angular.isUndefined(a)||$.gritter.remove(a)},b.removeLast=function(){var a=this.uidArray.pop();angular.isUndefined(a)||$.gritter.remove(a)},b}]),a.directive("fetInputMask",["$fetUI",function(a){var b="fetInputMask";return{priority:99,name:b,restrict:"A",link:function(b,c,d){var e=a.getExpression(b,d,"onBeforeMask"),f=a.getExpression(b,d,"onKeyValidation"),g=null,h=angular.lowercase(a.getValue(b,d,"maskType")),i=angular.lowercase(a.getValue(b,d,"maskFormat"));"mobile"==h?g="m":"rocid"==h?g="r":"thousands"==h?d.maskDigits?$(c).inputmask("thousands",{digits:d.maskDigits,onBeforeMask:function(){e&&angular.isFunction(e)&&e()},onKeyValidation:function(){f&&angular.isFunction(f)&&f()}}):g=h:"email"==h?g=h:"integer"==h?g=h:"date"==h?g=null!=i?i:h:"number"==h?(g=h,g=i?i:"9999999999"):g="decimal"==h?i?i:"9.99":"time"==h?"t":i,$(c).inputmask(g,{onBeforeMask:function(){e&&e()},onKeyValidation:function(){f&&f()}})}}}]),a.directive("fetModal",["$fetUI","$timeout",function(a,b){return{name:"fetModal",scope:!0,restrict:"EA",priority:99,replace:!0,transclude:!0,template:' <div  class="modal {{animation}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true"><div class="modal-dialog {{widthStyle}}"><div class="modal-content" ng-transclude></div></div></div>',link:function(c,d,e){function f(b){b.keyboard=b.esc,c.widthStyle="";var d=angular.lowercase(b.size);switch(d){case"l":c.widthStyle="modal-wide";break;case"s":c.widthStyle="modal-small";break;case"f":c.widthStyle="modal-full"}c.animation=a.isFalse(b.animation)?"":"fade in",b.show=a.isTrue(b.autoShow)?!0:!1,a.isFalse(b.closable)&&n.find(".modal-header >.close").hide(),n.modal(b)}var g=(a.getValue(c,e,"modalId"),a.getScope(c,e,"sModalDisplay")),h=a.getExpression(c,e,"onModalShow"),i=a.getExpression(c,e,"onModalShown"),j=a.getExpression(c,e,"onModalHide"),k=a.getExpression(c,e,"onModalHidden"),l=a.getOptionManager(),m=l.getOption("modalDisplay",g),n=$(d);f(m),n.on("show.bs.modal",function(){n.data("fetIsShow",!0),h&&b(function(){h()})}),n.on("shown.bs.modal",function(){i&&b(function(){i()})}),n.on("hide.bs.modal",function(){n.data("fetIsShow",!1),j&&b(function(){j()})}),n.on("hidden.bs.modal",function(){k&&b(function(){k()})}),n.on("fetReloadEvent",function(a){n.modal(a)}).on("fetModalShowEvent",function(){n.modal("show")}).on("fetModalHideEvent",function(){n.modal("hide")}).on("fetShowEvent",function(){n.modal("show")}).on("fetHideEvent",function(){n.modal("hide")})}}}]),a.factory("modalService",[function(){var a={};return a.open=function(a){var b='[modal-id="'+a+'"]';$(b).triggerHandler("fetModalShowEvent")},a.close=function(a){var b='[modal-id="'+a+'"]';$(b).triggerHandler("fetModalHideEvent")},a}]),a.directive("fetModalBody",function(){return{name:"fetModalBody",require:"?fetModal",scope:!1,restrict:"A",priority:99,replace:!0,transclude:!0,template:'<div class="modal-body" ng-transclude></div>',link:function(){}}}),a.directive("fetModalFooter",function(){return{name:"fetModalFooter",restrict:"A",require:"?fetModal",scope:!1,priority:99,replace:!0,transclude:!0,template:'<div class="modal-footer" ng-transclude></div>',link:function(){}}}),a.directive("fetModalTitle",function(){return{name:"fetModalTitle",require:"?fetModal",scope:!1,restrict:"EA",priority:99,replace:!0,transclude:!0,template:'<div class="modal-header" > <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>   <div class="modal-title"  ng-transclude></div></div>',link:function(){}}}),a.directive("fetModalTrigger",["$fetUI",function(a){return{name:"fetModalTrigger",restrict:"A",priority:101,link:function(b,c,d){function e(a){c.attr("data-toggle","modal"),c.attr("data-target",'[modal-id="'+a+'"]')}var f=a.getValue(b,d,"targetId");if(f){{a.getOptionManager().getOption("fetModal",{})}e(f)}}}}]),a.directive("fetNavbar",["$fetUI","$timeout",function(){return{name:"fetNavbar",priority:99,template:'<div class="navbar navbar-default" role="navigation" ng-transclude></div>',replace:!0,transclude:!0,restrict:"EA",scope:!0,link:function(){}}}]),a.directive("fetNavbarItem",["$fetUI","$timeout",function(a){return{name:"fetNavbarItem",priority:99,restrict:"A",scope:!1,require:"?fetNavbar",link:function(b,c,d){{var e=(a.getValue(b,d,"itemActive"),a.getValue(b,d,"itemAlign"));a.getValue(b,d,"itemDisabled")}$(c).addClass("right"==angular.lowercase(e)?"navbar-right":"navbar-left"),$(c).hover(function(){$(this).attr("disabled",!0)},function(){$(this).attr("disabled",!1)})}}}]),a.directive("fetPopover",["$fetUI","$timeout",function(a,b){var c="fetPopover";return{name:c,restrict:"A",priority:99,scope:!0,replace:!1,transclude:!1,link:function(d,e,f){var g=(a.getValue(d,f,"popoverId"),a.getScope(d,f,"swPopoverTitle"),a.getScope(d,f,"swPopoverContent"),a.getScope(d,f,"sPopoverDisplay")),h=a.getValue(d,f,"popoverTrigger"),i=a.getExpression(d,f,"onPopoverShow"),j=a.getExpression(d,f,"onPopoverShown"),k=a.getExpression(d,f,"onPopoverHide"),l=a.getExpression(d,f,"onPopoverHidden"),m=$(e),n=a.getOptionManager(),o=n.getOption("display",g);h=h?angular.lowercase(h):"click";var p=n.getOption(c,{title:function(){var b=a.getScope(d,f,"swPopoverTitle");return b||(b="&nbsp;"),b},content:function(){var b=a.getScope(d,f,"swPopoverContent");return b},placement:o.placement});p.delay={show:o.show,hide:o.hide},p.trigger=h,m.popover(p);var q;m.on("show.bs.popover",function(){m.data("fetIsShow",!0),i&&b(function(){i()}),angular.isNumber(o.autoHide)&&(q=b(function(){m.triggerHandler("fetHideEvent")},o.autoHide))}).on("shown.bs.popover",function(){j&&b(function(){j()})}).on("hide.bs.popover",function(){k&&b(function(){k()}),b.cancel(q)}).on("hidden.bs.popover",function(){m.data("fetIsShow",!1),l&&b(function(){l()})}).on("fetPopoverShowEvent",function(){m.popover("show")}).on("fetPopoverHideEvent",function(){m.popover("hide")}).on("fetShowEvent",function(){m.popover("show")}).on("fetHideEvent",function(){m.popover("hide")}),a.isTrue(o.autoShow)&&m.triggerHandler("fetShowEvent")}}}]),a.directive("fetSelect",["$fetUI","$timeout",function(a){return{priority:99,name:"fetSelect",scope:{swCount:"=",swPlaceholder:"=",options:"=",onSelectShow:"&",onSelectShown:"&",onSelectHide:"&",onSelectHidden:"&",onSelectHighlight:"&",onSelectChoose:"&",onSelectClearing:"&",onSelectRemoving:"&",onSelectRemoved:"&",onSelectFocus:"&",onSelectBlur:"&",onSelectChange:"&"},restrict:"EA",link:function(b,c,d){var e=c.attr("fet-type","select");if(!c.is("select")){var f="<div class='alert alert-danger'><h4>錯誤！</h4><p>fet-select不支援此類型標籤，請參考api文件</p></div>";return void c.replaceWith(f)}{var g=d.id,h=!0;b.swCount}a.isFalse(d.selectClear)&&(h=!1);var i="<option></option>";e.prepend(i),a.isFalse(d.enable)&&$("#"+g).select2("enable",!1);var j=function(){var a,c;return a=b.swPlaceholder,c=angular.isString(a)?a:!1},k=function(){var a,c;return a=b.swCount,c=a?a:1},l=b.$watch(function(){var a=j();return a},function(a,b){if(a!=b){var c=a,d=k();o(d,c)}}),m=b.$watch(function(){var a=k();return a},function(a,b){if(a!=b){var c=j(),d=a;o(d,c)}});c.on("$destroy",function(){(l||angular.noop)(),(m||angular.noop)()});var n=b.options;if(n){var i='<input type="text" id="'+g+'" class="populate placeholder">';c.replaceWith(i)}var o=function(a,b){$("#"+g).select2(n?{allowClear:h,placeholder:b,multiple:d.multiple,maximumSelectionSize:a,width:"100%",query:function(a){var b={results:[]};$.each(n,function(){(0==a.term.length||this.text.toUpperCase().indexOf(a.term.toUpperCase())>=0)&&b.results.push({id:this.id,text:this.text})}),a.callback(b)
}}:{allowClear:h,placeholder:b,maximumSelectionSize:a,width:"100%"})};o(k(),j()),e.addClass("row"),e.addClass("populate"),e.addClass("placeholder"),e.on("select2-opening",function(){b.onSelectShow&&b.onSelectShow()}),e.on("select2-open",function(){b.onSelectShown&&b.onSelectShown()}),e.on("select2-close",function(){b.onSelectHide&&b.onSelectHide()}),e.on("",function(){b.onSelectHidden&&b.onSelectHidden()}),e.on("select2-highlight",function(){b.onSelectHighlight&&b.onSelectHighlight()}),e.on("select2-selecting",function(){b.onSelectChoose&&b.onSelectChoose()}),e.on("select2-clearing",function(){b.onSelectClearing&&b.onSelectClearing()}),e.on("select2-removing",function(){b.onSelectRemoving&&angular.isFunction(b.onSelectRemoving)&&b.onSelectRemoving()}),e.on("select2-removed",function(){b.onSelectRemoved&&b.onSelectRemoved()}),e.on("select2-focus",function(){b.onSelectFocus&&b.onSelectFocus()}),e.on("select2-blur",function(){b.onSelectBlur&&b.onSelectBlur()}),e.on("change",function(a){b.onSelectChange&&(b.onSelectChange(),a.added)})}}}]),a.directive("fetSlider",["$timeout","$fetUI",function(a,b){({$setViewValue:angular.noop});return{restrict:"A",require:["fetSlider","?ngModel"],controller:angular.noop,link:function(c,d,e,f){var g,h=f[1],i=function(a){return b.getScope(c,e,a)},j=function(a){return b.getValue(c,e,a)},k=[],l={min:i("swSliderMin"),max:i("swSliderMax"),range:j("sliderRange")||!1,step:parseInt(j("sliderStep"),10)||1,disabled:i("swSliderDisabled")},m=i("sSliderDisplay"),n=["swSliderMin","swSliderMax","swSliderDisabled"],o=[function(a){d.slider("option","min",parseInt(a,10))},function(a){d.slider("option","max",parseInt(a,10))},function(a){d.slider("option","disabled",b.isTrue(a))}],p=function(a){return!(isNaN(a)||null===a)},q=function(a){p(a)&&d.slider("value",parseInt(a,10))};return angular.isNumber(l.min)&&angular.isNumber(l.max)?(l.range=b.isTrue(l.range)?!0:l.range,m&&(l.orientation=angular.lowercase(m.orientation),"vertical"===l.orientation&&d.css("height",m.height||"100px")),l.range===!0&&(q=function(a){if(angular.isArray(a))for(var b=0;2>b;b++)p(a[b])&&d.slider("values",b,parseInt(a[b],10))}),void a(function(){d.slider(l),h&&(d.on("slide",function(a,b){c.$evalAsync(function(){h.$setViewValue(l.range===!0?[b.values[0],b.values[1]]:b.value)})}),g=c.$watch(function(){return h.$viewValue},q,!0),angular.forEach(n,function(a,b){k.push(c.$watch(function(){return i(a)},o[b]))}),d.on("$destroy",function(){angular.isFunction(g)&&g(),angular.forEach(k,function(a){angular.isFunction(a)&&a()})}))})):void b.debug("swSliderMin, swSliderMax are required and must be {Number} !","fetSlider")}}}]),a.directive("fetTab",["$fetUI","$compile","$timeout",function(a){var b="fetTab";return{name:b,scope:!0,restrict:"A",compile:function(){return{post:function(b,c,d){var e=(a.getValue(b,d,"tabId"),a.getScope(b,d,"sTabDisplay")),f=angular.lowercase(a.getValue(b,d,"tabType")),g=a.getValue(b,d,"index"),h=a.getOptionManager().getOption("tabDisplayOption",e),i=angular.lowercase(h.direction),j=h.fixed,k=h.isBorder,l=null;g=g<c.find("[fet-tab-item]").length?g:1;var m=c.find(".tab-content").children();m.addClass("tab-pane fade"),m.length>=g&&c.find("[fet-tab-item]:eq("+(g-1)+") a").tab("show"),"bottom"==i&&(i="below"),"portlet"==f?l="portlet-tabs":"pill"==f?l="nav nav-tabs":i&&(l="tabbable tabs-"+i),c.addClass(l);if("below"==i){var n=c.find(".tab-content").detach();c.prepend(n)}"pill"!=f&&"portlet"!=f&&k&&c.find(".tab-content").addClass("border"),j&&c.find(".tab-content").height(j+"px").css("overflowY","auto")}}}}}]),a.factory("tabService",[function(){var a={};return a.open=function(a,b){var c="[tab-id="+a+"] [fet-tab-item]:eq("+(b-1)+") a";b=angular.isNumber(b)&&b<$("[tab-id="+a+"] [fet-tab-item]").length?b:1,0!==$(c).length&&$(c).tab("show")},a}]),a.directive("fetTabItem",["$fetUI","httpService","$compile","$interpolate",function(a,b,c){var d="fetTabItem";return{priority:99,name:d,scope:!1,restrict:"A",compile:function(){return{post:function(d,e,f){var g=d.$eval(e.parents("[fet-tab]").attr("s-tab-display")),h=a.getOptionManager().getOption("tabDisplayOption",g),i=h.direction,j=a.isTrue(f.tabDisabled),k=a.getValue(d,f,"itemType"),l=a.getValue(d,f,"itemAction"),m=a.isTrue(f.itemPreload),n=a.getValue(d,f,"itemAlign"),o=a.getExpression(d,f,"onTabShow"),p=a.getExpression(d,f,"onTabShown"),q=a.getExpression(d,f,"onTabHide"),r=a.getExpression(d,f,"onTabHidden"),s=null,t=e.find("a").attr("href"),u=t.substring(1),v=e.find("a"),w=e.closest("[fet-tab-list]").siblings(".tab-content");n=angular.isString(n)?n:"",l=angular.isString(l)?l:!1,j&&(s="btn disabled"),j||v.attr({role:"tab","data-toggle":"tab"}),v.addClass(s),n&&(n="pull-"+n),"left"!=i&&"right"!=i&&(e.parent().is(".dropdown-menu")&&n?e.parents(".dropdown").addClass(n):e.addClass(n)),k=angular.isString(k)?angular.lowercase(k):"inline";var x='<div class="tab-pane fade" id="'+u+'"></div>';if(0===$(t).length&&(console.log(w.html()),w.append(x)),"html"==k){var y=function(){l?b.get(l,{}).success(function(a){var b=c(a)(d);$(t).html(b)}).error(function(){}):$(t).html("未指定Action,請再次確認")};a.isFalse(m)?e.one("show.bs.tab",function(){y()}):y()}else if("apppart"==k){var z="<div app-part src=\"'"+l+"'\"></div>",A=function(){if(l){var a=c(z)(d);$(t).html(a)}else $(t).html("未指定Action,請再次確認")};a.isFalse(m)?e.one("show.bs.tab",function(){A()}):A()}v.on("show.bs.tab",function(){o&&o()}),v.on("shown.bs.tab",function(){p&&p()}),v.on("hide.bs.tab",function(){q&&q()}),v.on("hidden.bs.tab",function(){r&&r()})}}}}}]),a.directive("fetTabList",[function(){var a="fetTabList";return{name:a,scope:!1,restrict:"A",compile:function(a){var b=a.parent("[fet-tab]").attr("tab-type"),c="nav nav-tabs";return"pill"==b&&(c="nav nav-pills"),a.addClass(c),{post:function(){}}}}}]),a.directive("fetTable",["$fetUI","$timeout","$filter",function(a,b,c){return{name:"fetTable",priority:99,template:'<div class="{{portlet}}"><div class="row"><div ng-show="isShowFilter" class="col-md-6"><div class="dataTables_length"><label>filter： <select ng-model="criteriaCol" ng-change="filter()" size="1" name="data_table_1_length" aria-controls="data_table_1" class="form-control input-small"><option ng-repeat="col in filterCols" value="{{col.value}}">{{col.text}}</option></select><input   type="text" aria-controls="data_table_1" class="form-control input-small" ng-model="criteriaText" value="{{criteriaText}}" /></label></div></div></div><table class="{{classNme}}" ng-transclude></table> ',replace:!0,require:"?ngModel",transclude:!0,scope:!0,restrict:"EA",link:function(d,e,f,g){g||(g={$setViewValue:angular.noop});var h=a.getValue(d,f,"tableType"),i=a.getValue(d,f,"tableSorting"),j=a.getValue(d,f,"tableFilter"),k=a.getExpression(d,f,"onTableBeforeUpdate"),l=a.getExpression(d,f,"onTableAfterUpdate"),m='<span class="t-current"></span>',n=null,o=null;switch(h=angular.lowercase(h),d.filterCols=[],h){case"device":n="table table-advance table-hover table-bordered table-striped table-condensed flip-content",o="dataTables_wrapper form-inline";break;case"advance":n="table table-striped table-bordered table-hover",o="dataTables_wrapper form-inline";break;default:n="table table-advance table-hover",o="dataTables_wrapper form-inline"}d.classNme=n,d.portlet=o,d.isShowFilter=!0,a.isFalse(j)&&(d.isShowFilter=!1),d.filter=function(){var a={};a[d.criteriaCol]=d.criteriaText;var b,e=d.originalResult.slice(0);d.criteriaText&&""!=d.criteriaText?(b=c("filter")(e,a),d.result=b):d.result=d.originalResult,g.$setViewValue(d.result)};var p=d.$watch("criteriaText",function(a,b){a!=b&&d.filter()});b(function(){e.find("th[data-title]").each(function(){var a={value:$(this).attr("data-title"),text:$(this).html()};d.filterCols.push(a)}),a.isTrue(i)&&e.find("th").addClass("sorting").on("click",function(){var a=$(this),b="",e=a.attr("data-title");if(a.hasClass("sorting_asc")?(b="desc",a.removeClass("sorting_asc").addClass("sorting_desc").siblings().removeClass("sorting_asc").removeClass("sorting_desc")):(b="asc",a.removeClass("sorting_desc").addClass("sorting_asc").siblings().removeClass("sorting_asc").removeClass("sorting_desc")),e){e="asc"==b?"+"+e:"-"+e;var f=c("orderBy")(d.result,e);d.result=f,d.$apply(function(){g.$setViewValue(d.result)})}}),e.on("click","tr",function(){var a=$(this);a.find("td span").hasClass("t-current")||(e.find("tr").removeAttr("style"),(h="device")&&(e.find(".t-current").remove(),a.find("td").eq(0).prepend(m)))}),e.on("fetTableDataLoad",function(a,b){$(this).triggerHandler("fetTableBeforeLoad",b),d.result=b,$(this).triggerHandler("fetTableAfterLoad",b)}).on("fetTableBeforeLoad",function(a,b){k&&k(b)}).on("fetTableAfterLoad",function(a,b){l&&l(b)}).on("fetRenderResult",function(a,b){e.find("th").siblings().removeClass("sorting_asc").removeClass("sorting_desc"),d.result=b.result,d.originalResult=b.result;var c=d.$parent;c[c.modelName]=b.result});e.on("$destroy",function(){(p||angular.noop)()})})}}}]),a.directive("fetTimepicker",["$fetUI","$compile","$timeout","validateService",function(a,c,d,e){var f="fetTimepicker";return{priority:102,name:f,require:"?ngModel",scope:!0,restrict:"EA",template:'<div class="{{isRadius}}"><input class="form-control" name="timepicker"  data-toggle="popover" fet-input-mask mask-type="time"><span ng-if="timeBtn == true" class="input-group-btn" ><button class="btn btn-default" type="button" name="timepickerButton" ><i class="fa fa-clock-o"></i></button></span></div>',compile:function(c,g){return{post:function(c,h,i,j){if(j){var k=a.getValue(c,i,"timepickerTitle"),l=a.getScope(c,i,"sTimepickerDisplay"),m=a.getScope(c,i,"swTimepickerDisable"),n=a.isTrue(m)?!0:!1,o=a.getValue(c,i,"timepickerTrigger"),p=a.getExpression(c,i,"onBeginSelect"),q=a.getExpression(c,i,"onEndSelect"),r=angular.lowercase(a.getValue(c,i,"timeType"));r=r?r:"inline";var s=a.getOptionManager(),t=s.getOption(f,{}),u=s.getOption("fetTimepickerDisplay",l);o=o?angular.lowercase(o):"click";{var v;a.getScope(c,i,"ngModel")}v=c.$id+"_";var w=a.isTrue(u.secSelect)?!0:!1,x=function(){var a=g.ngModel?c.$eval("$parent."+i.ngModel):null;return angular.isDate(c.timeValue)?c.timeValue:angular.isDate(a)?a:null},y=function(){g.ngModel&&c.$eval("$parent."+i.ngModel+"=timeValue")},z=function(a){var b="",c="";n&&(c="disabled"),b="<select name='"+v+"hours' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+c+">";for(var d=0;24>d;d++)b+=d==a?"<option value='"+d+"' selected>"+d+"</option>":"<option value='"+d+"'>"+d+"</option>";return b+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>時</label>"},A=function(a){var b="",c="";n&&(c="disabled"),b="<select name='"+v+"minutes' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+c+">";for(var d=0;60>d;d++)b+=a==d?"<option value='"+d+"' selected>"+d+"</option>":"<option value='"+d+"'>"+d+"</option>";return b+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>分</label>"},B=function(a){var b="",c="";if(n&&(c="disabled"),w){b="<select name='"+v+"seconds' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+c+">";for(var d=0;60>d;d++)b+=a==d?"<option value='"+d+"' selected>"+d+"</option>":"<option value='"+d+"'>"+d+"</option>";b+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>秒</label>"}return b},C=function(a){var b="",c="";n&&(c="disabled");var d="",e=a?a.getHours():0,f=a?a.getMinutes():0,g=a?a.getSeconds():0;return u.clearBtn&&(d="<div class='col-md-12 timepicker-footer'><button type='button' name='"+v+"clean' class='btn btn-info btn-sm'"+c+">清除</button><div>"),b="<button type='button' name='"+v+"destroy' class='close' aria-hidden='true'></button><br><div>"+z(e)+A(f)+B(g)+"</div>"+d};d(function(){x()&&I(x().getHours(),x().getMinutes(),x().getSeconds());var a=0,b=0,d=0;$("body").on("change",'[name="'+v+'hours"],[name="'+v+'minutes"],[name="'+v+'seconds"]',function(){p&&angular.isFunction(p)&&p(),a="00"|$("body").find('[name="'+v+'hours"]').val(),b="00"|$("body").find('[name="'+v+'minutes"]').val(),d="00"|$("body").find('[name="'+v+'seconds"]').val(),I(a,b,d),q&&angular.isFunction(q)&&q()});var e="input-btn";u.timeBtn&&(e="input-group",h.find('[name="timepickerButton"]').on("click",function(){h.find('[name="timepicker"]').popover("show")})),n&&("popover"==r?(h.find('[name="timepicker"]').attr("disabled",!0),h.find('[name="timepickerButton"]').attr("disabled",!0)):(h.find("select").attr("disabled",!0),h.find("button").attr("disabled",!0))),c.isRadius=e}),"inline"==r&&(u.timeBtn=!1),c.timeBtn=u.timeBtn;var D="";if(u.clearBtn&&(D="<div class='col-md-12 timepicker-footer'><button type='button' name='"+v+"clean' class='btn btn-info btn-sm'>清除</button><div>"),c.timepickerID="timepicker-popver-"+v,"popover"==r){t.title=k,t.content=function(){return C(x())},t.template=w?'<div class="popover" style="max-width:270px" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+v+'" class="popover-content row"></div></div>':'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+v+'" class="popover-content row"></div></div>',t.trigger=o,t.placement=u.direction,h.find("input").popover(t),$("body").on("click",'[name="'+v+'destroy"]',function(){h.find("input").popover("hide")});var E;$(b).on("mousedown touchstart",function(a){h.is(a.target)||h.find(a.target).length||$("[role=tooltip]").find(a.target).length||$("[role=tooltip] select").find(a.target).length||$("[role=tooltip] option").find(a.target).length||(h.find("input").popover("hide"),a.stopPropagation())}),h.find('input[name="timepicker"]').on("show.bs.popover",function(){angular.isNumber(u.autoHide)&&(E=d(function(){h.find("input").triggerHandler("fetHideEvent")},u.autoHide))}),h.find('input[name="timepicker"]').on("change",function(){var a=$(this).val();"success"===e.getValidator("time").validate(a)?(H($(this).val()),c.popoverContentHtml=$('[name="'+c.timepickerID+'"]').html()):J()}).on("hide.bs.popover",function(){d.cancel(E)}).on("fetTimePickerShowEvent",function(){$(this).popover("show")}).on("fetTimePickerHideEvent",function(){$(this).popover("hide")}),a.isTrue(u.autoShow)&&h.find("input").triggerHandler("fetTimePickerShowEvent")}else if("inline"==r){var F=x(),G=!1;angular.isDate(F)&&(G=!0),h.find("input").replaceWith(z(G?x().getHours():0)+A(G?x().getMinutes():0)+B(G?x().getSeconds():0)+D)}$("body").on("click",'[name="'+v+'clean"]',function(){J()});var H=function(a){var b=a.split(":"),c=b[0]||"00",d=b[1]||"00",e=b[2]||"00";I(c,d,e)},I=function(a,b,e){var f=x()||new Date;w||(e=0),f.setHours(a,b,e),c.timeValue=f,$('[name="'+v+'hours"]').val(a),$('[name="'+v+'minutes"]').val(b),$('[name="'+v+'seconds"]').val(e),h.find('input[name="timepicker"]').val(f.format("hh:mm:ss")),d(function(){y()})},J=function(){c.timeValue=null,$('[name="'+v+'hours"]').val(0),$('[name="'+v+'minutes"]').val(0),$('[name="'+v+'seconds"]').val(0),h.find('input[name="timepicker"]').val(null),c.$apply(function(){y()})},K=c.$watch(function(){var a=c.$eval("$parent."+i.ngModel);return angular.isDate(a)?a.getTime():null},function(a,b){if(a!==b)if(a){var d=new Date(a);c.timeValue=d,I(d.getHours(),d.getMinutes(),d.getSeconds())}else $('[name="'+v+'hours"]').val(0),$('[name="'+v+'minutes"]').val(0),$('[name="'+v+'seconds"]').val(0),h.find('input[name="timepicker"]').val(null)}),L=function(){var b,d;return b=a.getScope(c,i,"swTimepickerDisable"),d=a.isTrue(b)?!0:!1,n=d,d},M=c.$watch(function(){var a=L();return a},function(b){b=a.isTrue(b)?!0:!1,d(function(){"popover"==r?b?(h.find('[name="timepicker"]').attr("disabled",!0),h.find('[name="timepickerButton"]').attr("disabled",!0)):(h.find('[name="timepicker"]').attr("disabled",!1),h.find('[name="timepickerButton"]').attr("disabled",!1)):b?(h.find("select").attr("disabled",!0),h.find("button").attr("disabled",!0)):(h.find("select").attr("disabled",!1),h.find("button").attr("disabled",!1))})});h.on("$destroy",function(){(K||angular.noop)(),(M||angular.noop)()})}}}}}}]),a.directive("fetTimepickerRange",["$fetUI","$timeout","$compile","validateService",function(a,d,e,f){var g="fetTimepickerRange";return{priority:102,require:"?ngModel",name:g,scope:!0,restrict:"EA",template:'<div class="row"><div class="input-group col-md-12"><input type="text" class="form-control" name="from" fet-input-mask mask-type="time"><span ng-if="timeBtn == true" class="input-group-btn"><button type="button" class="btn btn-default" type="button" name="timepickerButtonFrom" style="border-top-left-radius: 0; border-bottom-left-radius: 0;"><i class="fa fa-clock-o"></i></button></span><span class="input-group-addon"> 至 </span><input type="text" class="form-control" name="to" fet-input-mask mask-type="time"><span ng-if="timeBtn == true" class="input-group-btn"><button type="button" class="btn btn-default" type="button" name="timepickerButtonTo"><i class="fa fa-clock-o"></i></button></span></div></div>',link:function(e,g,h,i){function j(a,b){var c="",d="";n&&(d="disabled"),c="<select name='"+b+"hours' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+d+">";for(var e=0;24>e;e++)c+=e==a?"<option value='"+e+"' selected>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>";return c+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>時</label>"}function k(a,b){var c="",d="";n&&(d="disabled"),c="<select name='"+b+"minutes' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+d+">";for(var e=0;60>e;e++)c+=a==e?"<option value='"+e+"' selected>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>";return c+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>分</label>"}function l(a,b){var c="",d="";if(n&&(d="disabled"),A){c="<select name='"+b+"seconds' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+d+">";for(var e=0;60>e;e++)c+=a==e?"<option value='"+e+"' selected>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>";c+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>秒</label>"}return c}if(i){var m=a.getScope(e,h,"swTimepickerDisable"),n=a.isTrue(m)?!0:!1,o=a.getScope(e,h,"sTimepickerDisplay"),p=a.getValue(e,h,"timepickerTrigger"),q=(a.getScope(e,h,"ngModel"),angular.lowercase(a.getValue(e,h,"timeType"))),r=a.getOptionManager(),s=r.getOption("fetTimepicker",{}),t=r.getOption("fetTimepickerDisplay",o),u=angular.lowercase(t.timeBtn),v=angular.lowercase(t.clearBtn);u=a.isTrue(u)?!0:!1,v=a.isTrue(v)?!0:!1;var w=a.getExpression(e,h,"onBeginSelect"),x=a.getExpression(e,h,"onEndSelect");q=angular.isString(q)?q:"inline",p=p?angular.lowercase(p):"click","inline"==q&&(u=!1),e.timeBtn=u;var y,z;y=e.$id+"_start_",z=e.$id+"_end_";var A=a.isTrue(t.secSelect)?!0:!1,B=function(a){e.times=a,e.$evalAsync(function(){e.$eval("$parent."+h.ngModel+"= times")})},C=e.$watch(function(){var a=F();return a},function(a,b){if(!angular.equals(a,b)){var c,d=null;2==a.length&&(c=null!=a[0]?new Date(a[0]):null,d=null!=a[1]?new Date(a[1]):null,e.$evalAsync(function(){H(c,d,y,"start"),H(c,d,z,"end")}))}},!0),D=function(a){var b=F();"start"==a?(b[0]=null,H(null,null,y,"start")):(b[1]=null,H(null,null,z,"end"))},E=function(a){function b(){return k[0]=angular.isDate(g)?e(k[0],g):null,k}function d(){B(k)}function e(a,b){return null===a||a===c?b:(a.setHours(b.getHours(),b.getMinutes(),b.getSeconds()),a)}function f(){k[1]=angular.isDate(h)?e(k[1],h):null}var g,h,i=null,j=null,k=F();if("start"===a){var l,m,n,o,p,q;l="00"|$("body").find('[name="'+y+'hours"]').val(),m="00"|$("body").find('[name="'+y+'minutes"]').val(),n=A?$("body").find('[name="'+y+'seconds"]').val():0,i=new Date,i.setHours(l,m,n),g=null==i?null:i,b(),d()}else{var l,m,n,o,p,q;o="00"|$("body").find('[name="'+z+'hours"]').val(),p="00"|$("body").find('[name="'+z+'minutes"]').val(),q=A?$("body").find('[name="'+z+'seconds"]').val():0,j=new Date,j.setHours(o,p,q),h=null==j?null:j,f(),d()}},F=function(){var a=[];return h.ngModel?(a=e.$eval("$parent."+h.ngModel),angular.isArray(a)&&2==a.length?a:[null,null]):null},G=function(a,b){var c="",d="",e="";n&&(e="disabled");var f=a?a.getHours():0,g=a?a.getMinutes():0,h=a?a.getSeconds():0;return v&&(d="<div class='col-md-12 timepicker-footer'><button type='button' name='"+b+"clean' class='btn btn-info btn-sm'"+e+">清除</button><div>"),c="<button type='button' name='"+b+"destroy' class='close' aria-hidden='true'></button><br><div>"+j(f,b)+k(g,b)+l(h,b)+"</div>"+d},H=function(a,b,c,d){e.$evalAsync(function(){if("start"==d)if(null==a)g.find('[name="from"]').val(null),$('[name="'+c+'hours"]').val(0),$('[name="'+c+'minutes"]').val(0),$('[name="'+c+'seconds"]').val(0);else{var e=0,f=0,h=0;h=A?a.getSeconds():0,e=a.getHours(),f=a.getMinutes(),$('[name="'+c+'hours"]').val(e),$('[name="'+c+'minutes"]').val(f),$('[name="'+c+'seconds"]').val(h),g.find('[name="from"]').val(a.format("hh:mm:ss"))}else if("end"==d)if(null==b)g.find('[name="to"]').val(null),$('[name="'+c+'hours"]').val(0),$('[name="'+c+'minutes"]').val(0),$('[name="'+c+'seconds"]').val(0);else{var e=0,f=0,h=0;h=A?b.getSeconds():0,e=b.getHours(),f=b.getMinutes(),$('[name="'+c+'hours"]').val(e),$('[name="'+c+'minutes"]').val(f),$('[name="'+c+'seconds"]').val(h),g.find('input[name="to"]').val(b.format("hh:mm:ss"))}})},I=function(a,b,c,d){var e,f=F();"start"==d?e=f[0]:"end"==d&&(e=f[1]),A||(c=0),null===e&&(e=new Date),e&&(e.setHours(a,b,c),"start"==d?f[0]=e:"end"==d&&(f[1]=e),B(f))};d(function(){$("body").on("change",'[name="'+y+'hours"],[name="'+y+'minutes"],[name="'+y+'seconds"]',function(){w&&angular.isFunction(w)&&w(),E("start"),x&&angular.isFunction(x)&&x()}),$("body").on("change",'[name="'+z+'hours"],[name="'+z+'minutes"],[name="'+z+'seconds"]',function(){w&&angular.isFunction(w)&&w(),E("end"),x&&angular.isFunction(x)&&x()}),$("body").on("click",'[name="'+y+'clean"]',function(){D("start")}),$("body").on("click",'[name="'+z+'clean"]',function(){D("end")}),u&&(g.find('[name="timepickerButtonFrom"]').on("click",function(){g.find('[name="from"]').popover("show")}),g.find('[name="timepickerButtonTo"]').on("click",function(){g.find('[name="to"]').popover("show")})),n&&("popover"==q?(g.find('[name="from"]').attr("disabled",!0),g.find('[name="timepickerButtonFrom"]').attr("disabled",!0),g.find('[name="to"]').attr("disabled",!0),g.find('[name="timepickerButtonTo"]').attr("disabled",!0)):(g.find("select").attr("disabled",!1),g.find("button").attr("disabled",!1)))});var J="",K="";if(v&&(J="<div class='col-md-12 timepicker-footer'><button type='button' name='"+y+"clean' value='清除' class='btn btn-info btn-sm'>清除</button></div>",K="<div class='col-md-12 timepicker-footer'><button type='button' name='"+z+"clean' value='清除' class='btn btn-info btn-sm'>清除</button></div>"),e.startTimepickerID="timepicker-popver-"+y,e.endTimepickerID="timepicker-popver-"+z,"popover"==q){var L,M=F();if(y){s.content=function(){return M=F(),G(M[0],y)},s.template=A?'<div class="popover" style="max-width:270px" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+y+'" class="popover-content row"></div></div>':'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+y+'" class="popover-content row"></div></div>',s.placement=t.direction,s.trigger=p,g.find('[name="from"]').popover(s),L=null!=M[0]?M[0].format("hh:mm:ss"):M[0],g.find('[name="from"]').val(L),$("body").on("click",'[name="'+y+'destroy"]',function(){g.find('[name="from"]').popover("hide")}),$("body").on("click",'[name="'+y+'clear"]',function(){g.find('[name="from"]').val("")});var N;g.find('[name="from"]').on("show.bs.popover",function(){angular.isNumber(t.autoHide)&&(N=d(function(){g.find('[name="from"]').triggerHandler("fetHideEvent")},t.autoHide))}),g.find('[name="from"]').on("change",function(){var a=$(this).val();"success"===f.getValidator("time").validate(a)?(T($(this).val()),e.popoverContentHtml=$('[name="'+e.startTimepickerID+'"]').html()):D("start")}).on("hide.bs.popover",function(){d.cancel(N)}).on("hidden.bs.popover",function(){}).on("fetShowEvent",function(){$(this).popover("show")}).on("fetHideEvent",function(){$(this).popover("hide")}),a.isTrue(t.autoShow)&&g.find('[name="from"]').triggerHandler("fetShowEvent")}if(z){s.content=function(){return M=F(),G(M[1],z)},s.template=A?'<div class="popover" style="max-width:270px" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+z+'" class="popover-content row"></div></div>':'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+z+'" class="popover-content row"></div></div>',s.placement=t.direction,s.trigger=p,g.find('[name="to"]').popover(s),L=null!=M[1]?M[1].format("hh:mm:ss"):M[1],g.find('[name="to"]').val(L),$("body").on("click",'[name="'+z+'destroy"]',function(){g.find('[name="to"]').popover("hide")}),$("body").on("click",'[name="'+z+'clear"]',function(){g.find('[name="to"]').val("")});var O;g.find('[name="to"]').on("show.bs.popover",function(){angular.isNumber(t.autoHide)&&(O=d(function(){g.find('[name="to"]').triggerHandler("fetHideEvent")},t.autoHide))}),g.find('[name="to"]').on("change",function(){var a=$(this).val();"success"===f.getValidator("time").validate(a)?(U($(this).val()),e.popoverContentHtml=$('[name="'+e.endTimepickerID+'"]').html()):D("end")}).on("hide.bs.popover",function(){d.cancel(O)}).on("hidden.bs.popover",function(){}).on("fetShowEvent",function(){$(this).popover("show")}).on("fetHideEvent",function(){$(this).popover("hide")}),a.isTrue(t.autoShow)&&g.find('[name="to"]').triggerHandler("fetShowEvent")}$(b).on("mousedown touchstart",function(a){g.is(a.target)||g.find(a.target).length||$("[role=tooltip]").find(a.target).length||$("[role=tooltip] select").find(a.target).length||$("[role=tooltip] option").find(a.target).length||(g.find('[name="from"]').popover("hide"),g.find('[name="to"]').popover("hide"),a.stopPropagation())})}else if("inline"==q){var P=F(),Q=P[0],R=P[1],S=!1;(angular.isDate(Q)||angular.isDate(R))&&(S=!0),y&&g.find('[name="from"]').replaceWith(j(S?Q.getHours():0,y)+k(S?Q.getMinutes():0,y)+l(S?Q.getSeconds():0,y)+J),z&&g.find('[name="to"]').replaceWith(j(S?R.getHours():0,z)+k(S?R.getMinutes():0,z)+l(S?R.getSeconds():0,z)+K)}var T=function(a){var b=a.split(":"),c=b[0]||"00",d=b[1]||"00",e=b[2]||"00";I(c,d,e,"start")},U=function(a){var b=a.split(":"),c=b[0]||"00",d=b[1]||"00",e=b[2]||"00";I(c,d,e,"end")},V=function(){var b,c;return b=a.getScope(e,h,"swTimepickerDisable"),c=a.isTrue(b)?!0:!1,n=c,c},W=e.$watch(function(){var a=V();return a},function(b){b=a.isTrue(b)?!0:!1,d(function(){"popover"==q?b?(g.find('[name="from"]').attr("disabled",!0),g.find('[name="timepickerButtonFrom"]').attr("disabled",!0),g.find('[name="to"]').attr("disabled",!0),g.find('[name="timepickerButtonTo"]').attr("disabled",!0)):(g.find('[name="from"]').attr("disabled",!1),g.find('[name="timepickerButtonFrom"]').attr("disabled",!1),g.find('[name="to"]').attr("disabled",!1),g.find('[name="timepickerButtonTo"]').attr("disabled",!1)):b?(g.find("select").attr("disabled",!0),g.find("button").attr("disabled",!0)):(g.find("select").attr("disabled",!1),g.find("button").attr("disabled",!1))})});g.on("$destroy",function(){(C||angular.noop)(),(W||angular.noop)()})}}}}]),a.directive("fetTooltip",["$fetUI","$timeout",function(a,b){var c="fetTooltip";return{name:c,scope:!0,priority:99,restrict:"A",replace:!1,transclude:!1,link:function(d,e,f){function g(a){n.tooltip("destroy"),n.tooltip(a)}var h=(a.getValue(d,f,"tooltipId"),a.getScope(d,f,"swTooltipContent"),a.getScope(d,f,"sTooltipDisplay")),i=a.getValue(d,f,"tooltipTrigger"),j=a.getExpression(d,f,"onTooltipShow"),k=a.getExpression(d,f,"onTooltipShown"),l=a.getExpression(d,f,"onTooltipHide"),m=a.getExpression(d,f,"onTooltipHidden"),n=$(e).attr("data-fet-type","tooltip"),o=a.getOptionManager();i=i?angular.lowercase(i):"click";var p=o.getOption("display",h),q=o.getOption(c,{title:function(){return a.getScope(d,f,"swTooltipContent")},placement:p.placement});q.delay={show:p.show,hide:p.hide},q.trigger=i,n.tooltip(q);var r;n.on("show.bs.tooltip",function(){n.data("fetIsShow",!0),p.autoHide&&angular.isNumber(p.autoHide)&&(r=b(function(){n.triggerHandler("fetHideEvent")},p.autoHide)),b(function(){(j||angular.noop)()})}).on("shown.bs.tooltip",function(){b(function(){(k||angular.noop)()})}).on("hide.bs.tooltip",function(){n.data("fetIsShow",!1),p.autoHide&&angular.isNumber(p.autoHide)&&r&&b.cancel(r),b(function(){(l||angular.noop)()})}).on("hidden.bs.tooltip",function(){b(function(){(m||angular.noop)()})}).on("fetTooltipShowEvent",function(){n.tooltip("show")}).on("fetTooltipHideEvent",function(){n.tooltip("hide")}).on("fetShowEvent",function(){n.tooltip("show")}).on("fetHideEvent",function(){n.tooltip("hide")}).on("fetReloadEvent",function(a,b){g(b)}),a.isTrue(p.autoShow)&&n.triggerHandler("fetShowEvent")}}}]),a.directive("fetValidate",["$fetUI","$timeout",function(a,b){var c="fetValidate";return{priority:99,name:c,require:["?ngModel"],restrict:"A",link:function(c,d,e,f){function g(a){var b=[];b=t.split("|");for(var c=0;c<b.length;c++){var e=[],f=angular.lowercase(b[c]);angular.isString(f)&&(f=$.trim(f)),f.indexOf(":")>0&&(e=f.split(":"),f=e[0]);var g,h;g=x().getValidator(f);var i=!1;if(m)for(var j in m)m[j]&&angular.lowercase(j)==angular.lowercase(f)&&(angular.isUndefined(g)?(g=m[j],h=g):h=m[j],i=!0);i||angular.isUndefined(g)||(h=$.extend(g,m));var k,l=[];if(e.length>1){l=e.splice(1,1)}if(l.unshift(a),!g)return;if(k=g.validate.apply(g.validate,l),k=angular.lowercase(k),k===w?d.trigger("fetValidateWarningEvent",h.warningMessage):k===u?d.trigger("fetValidateSuccessEvent",h.successMessage):d.trigger("fetValidateErrorEvent",h.errorMessage),k!==u)return}}function h(){var a;return f.$viewValue&&(a=f.$viewValue),a||(a=c.$eval(e.ngModel)),a}if(f){var i,j=a.getExpression(c,e,"onError"),k=a.getExpression(c,e,"onSuccess"),l=a.getExpression(c,e,"onWarning"),m=a.getScope(c,e,"sValidator"),n=e.sValidateStatus,o=e.sValidateMessage,p=(a.getValue(c,e,"validateId"),!1),q=!0,r=function(){var b,d;return b=a.getScope(c,e,"swValidateInit"),d=angular.isUndefined(b)?p:a.isTrue(b)?!0:!1},s=function(){var b,d;return b=a.getScope(c,e,"swValidateAuto"),d=angular.isUndefined(b)?q:a.isTrue(b)?!0:!1},t=a.getValue(c,e,"validateType"),u="success",v="error",w="warning",x=a.getValidateManager;i&&c.$evalAsync(function(){d.triggerHandler("fetValidateEvent")}),d.on("fetValidateEvent",function(){g(h())}),d.on("fetValidateSuccessEvent",function(a,b){d.attr("validate-status",u),d.attr("validate-message",b),n&&(c.$parent.sValidateStatus=u),o&&(c.$parent.sValidateMessage=b),k&&k({params:{message:b,type:u}})}),d.on("fetValidateErrorEvent",function(a,b){d.attr("validate-status",v),d.attr("validate-message",b),n&&(c.$parent.sValidateStatus=v),o&&(c.$parent.sValidateMessage=b),j&&j({params:{message:b,type:v}})}),d.on("fetValidateWarningEvent",function(a,b){d.attr("validate-status",w),d.attr("validate-message",b),n&&(c.$parent.sValidateStatus=w),o&&(c.$parent.sValidateMessage=b),l&&l({params:{message:b,type:w}})
});var y=c.$watch(function(){var b=r();return b=a.isFalse(b)?!1:!0},function(b,c){b!==c&&a.isTrue(b)&&g(h())}),z=function(){},A=c.$watch(function(){var b=s();return b=a.isFalse(b)?!1:!0},function(d){a.isTrue(d)?z=c.$watch(function(){return h()},function(a,c){a!=c&&b(function(){g(a)})},!0):a.isFalse(d)&&(z||angular.noop)()});c.$on("scopeChangeValidateInit",function(a,b){var c=b.validateInit;p=c}),c.$on("scopeChangeValidateAuto",function(a,b){var d=b.validateAuto;c.$evalAsync(function(){q=d})}),d.on("$destroy",function(){(z||angular.noop)(),(y||angular.noop)(),(A||angular.noop)()})}}}}]),a.directive("fetValidateMessage",["$fetUI",function(){var a="fetValidateMessage";return{priority:101,name:a,require:"?fetField",restrict:"A",link:function(a,b){b.addClass("help-block"),b.on("fetValidateWarningEvent",function(a,c){b.html(c)}).on("fetValidateSuccessEvent",function(a,c){b.html(c)}).on("fetValidateErrorEvent",function(a,c){b.html(c)})}}}]),a.controller("fetFormController",["$scope",function(){this.setValidateInit=function(a){this.validateInit=a},this.setValidateAuto=function(a){this.validateAuto=a},this.getValidateInit=function(){return this.validateInit},this.getValidateAuto=function(){return this.validateAuto}}]),a.directive("fetForm",["$fetUI",function(a){return{name:"fetForm",scope:!0,restrict:"A",controller:"fetFormController",priority:120,link:function(b,c,d){{var e=(a.getValue(b,d,"formId"),function(){var c,e;return c=a.getScope(b,d,"swValidateInit"),e=angular.isUndefined(c)?!1:a.isTrue(c)?!0:!1}),f=function(){var c,e;return c=a.getScope(b,d,"swValidateAuto"),e=angular.isUndefined(c)?!0:a.isTrue(c)?!0:!1},g=b.$watch(function(){return e()},function(a,c){a!==c&&b.$broadcast("scopeChangeValidateInit",{validateInit:a})}),h=b.$watch(function(){return f()},function(a,c){a!==c&&b.$broadcast("scopeChangeValidateAuto",{validateAuto:a})});e(),f()}b.$broadcast("scopeChangeValidateAuto",{validateAuto:f()}),c.on("$destroy",function(){(g||angular.noop)(),(h||angular.noop)()})}}}])})}(window,document);