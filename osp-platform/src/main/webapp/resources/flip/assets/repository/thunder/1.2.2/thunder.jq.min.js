/**
 * thunder v1.2.2
 * ===============================
 * Copyright (c) 2014 Far Eastone Telecommunications Co., Ltd.
 * All Rights Reserved.
 * build time: 2015-09-04 11:14:05 
 */
!function(a,b,c){"use strict";function d(a,b){var c;return a=jQuery.trim(a||""),b=jQuery.trim(b||""),(c=a+b)&&0!==c.length?(c=null,a=a.replace(/\\/g,"/").replace(/\/+$/,""),b=b.replace(/\\/g,"/"),a?a+"/"+b.replace(/^\/+/,""):b):""}function e(){var a,c,d="Unknown",e="";screen.width&&(a=screen.width?screen.width:"",c=screen.height?screen.height:"",e+=""+a+" x "+c);var f,g,h,i=navigator.appVersion,j=navigator.userAgent,k=navigator.appName,l=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10);-1!=(g=j.indexOf("Opera"))?(k="Opera",l=j.substring(g+6),-1!=(g=j.indexOf("Version"))&&(l=j.substring(g+8))):-1!=(g=j.indexOf("MSIE"))?(k="Microsoft Internet Explorer",l=j.substring(g+5)):"Netscape"==k&&-1!=j.indexOf("Trident/")?(k="Microsoft Internet Explorer",l=j.substring(g+5),-1!=(g=j.indexOf("rv:"))&&(l=j.substring(g+3))):-1!=(g=j.indexOf("Chrome"))?(k="Chrome",l=j.substring(g+7)):-1!=(g=j.indexOf("Safari"))?(k="Safari",l=j.substring(g+7),-1!=(g=j.indexOf("Version"))&&(l=j.substring(g+8)),-1!=j.indexOf("CriOS")&&(k="Chrome")):-1!=(g=j.indexOf("Firefox"))?(k="Firefox",l=j.substring(g+8)):(f=j.lastIndexOf(" ")+1)<(g=j.lastIndexOf("/"))&&(k=j.substring(f,g),l=j.substring(g+1),k.toLowerCase()==k.toUpperCase()&&(k=navigator.appName)),-1!=(h=l.indexOf(";"))&&(l=l.substring(0,h)),-1!=(h=l.indexOf(" "))&&(l=l.substring(0,h)),-1!=(h=l.indexOf(")"))&&(l=l.substring(0,h)),m=parseInt(""+l,10),isNaN(m)&&(l=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10));var n=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(i),o=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||o||(b.cookie="testcookie",o=-1!=b.cookie.indexOf("testcookie")?!0:!1);var p=d,q=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in q){var s=q[r];if(s.r.test(j)){p=s.s;break}}var t=d;switch(/Windows/.test(p)&&(t=/Windows (.*)/.exec(p)[1],p="Windows"),p){case"Mac OS X":t=/Mac OS X (10[\.\_\d]+)/.exec(j)[1];break;case"Android":t=/Android ([\.\_\d]+)/.exec(j)[1];break;case"iOS":t=/OS (\d+)_(\d+)_?(\d+)?/.exec(i),t=t[1]+"."+t[2]+"."+(0|t[3])}var u=b.documentMode?b.documentMode:"N/A",v={screen:e,browser:k,browserVersion:l,browserDocMode:u,mobile:n,os:p,osVersion:t,cookies:o};return v}var f={full:"1.2.2",major:1,minor:2,dot:2};Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1===RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};var g,h,i,j,k="_ctid",l="_ip",m="_platinfo",n="_objectid";h={get:function(a){try{var c=a+"=",d=b.cookie.split(";");if(!d||0===d.length)return"";if(d&&"undefined"!==d)for(var e=0;e<d.length;e++)if(d[e]&&"undefined"!==d[e]){var f=jQuery.trim(d[e]);if(0===f.indexOf(c))return f.substring(c.length,f.length)}}catch(g){}return""},getFromJSON:function(a){try{var b=this.get(a);if(b&&"undefined"!==b)return JSON.parse(b)}catch(c){}return""},set:function(a,c,d){try{var e="";if(d){var f=new Date;f.setTime(f.getTime()+24*d*60*60*1e3),e="expires="+f.toGMTString()}b.cookie=a+"="+c+"; "+e}catch(g){}},setToJSON:function(a,b,c){try{this.set(a,JSON.stringify(b),c)}catch(d){}},getAll:function(){var a,c={};try{a=b.cookie.split(";");for(var d=0;d<a.length;d++){var e=a[d].split("=");e[0]&&"undefined"!==e[0]&&(c[e[0]]=unescape(e[1]))}}catch(f){}finally{e=null}return c}},i={create:function(){for(var a=[],b="0123456789abcdef",c=0;36>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);return a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-",a.join("")},getFromCookie:function(){return h.get(k)},get:function(){var a=this.getFromCookie();return a&&"undefined"!==a?a:(a=this.create(),h.set(k,a,30),a)}},j=function(){var a,b,j,k,o,p,q,r,s,t,u,v,w,x,y,z,A,B=!1,C=100,D=[],E=[],F={logAggregatorHost:"",logInfoAction:"/ClientLogServlet",logReceiverAction:"/ClientLogServlet",systemName:"unknown",systemContextPath:"/unknown",consoleAppenderStatus:"OFF",logLevel:"DEBUG",logCenterAppenderStatus:"ON",logAnalyzeLevel:"DEBUG",logDumpSize:C};return a=function(a){B=!0,a=jQuery.extend(!0,{},F,a||{}),a.logLevel=b(a.logLevel),a.logAnalyzeLevel=b(a.logAnalyzeLevel),q=d(a.logAggregatorHost,a.systemContextPath),r=d(q,a.logInfoAction),s=d(q,a.logReceiverAction),o(a.logDumpSize)||(a.logDumpSize=C),"ON"===a.consoleAppenderStatus&&D.push(function(){if("undefined"==typeof console||"undefined"==typeof console.log)return function(){};var c;return c=function(a){var b="warning"===a.toLowerCase()?"warn":a.toLowerCase(),c=console[b]||console.log;return c},function(d,e,f){if(b(d)>=a.logLevel){var g=d+": "+e+" -> "+f;try{return c(d)(g)}catch(h){return c(d).call(console,g)}}}}()),"ON"===a.logCenterAppenderStatus&&(k(h),D.push(function(){var c,d,g,k,l;return c=function(){return h.getAll()},d=function(){var a=h.getFromJSON(m);a||(a=e(),h.setToJSON(m,a));var b=k(),c={clientip:j,browserinfo:{availablewidth:b.availWidth,screenwidth:b.width,browsernm:a.browser,screenheight:b.height,osinfo:{osname:a.os,osversion:a.osVersion},version:a.browserVersion,versiondocmode:a.browserDocMode,availableheight:b.availHeight}};return c},k=function(){var a,b,c,d;return screen.width&&(a=screen.width?screen.width:"",b=screen.height?screen.height:"",c=screen.availWidth?screen.availWidth:"",d=screen.availHeight?screen.availHeight:""),{width:a,height:b,availWidth:c,availHeight:d}},g=function(){return(new Date).format("yyyy-MM-dd hh:mm:ss.S")},l=function(){return h.get(n)},function(c,e,h){if(b(c)>=a.logAnalyzeLevel){var j={};if(b(c)<=b("WARNING")?j={msg:{debuginfo:{debugmsg:e+" -> "+h}}}:b(c)==b("ERROR")?j={msg:{errorinfo:{errorcode:e,errormsg:h,stacktrace:""}}}:b(c)>=b("ANALYSIS")&&(h=h||{},h&&h.msg&&h.msg.analysisinfo?h.msg.analysisinfo.eventinfo=e:j={msg:{analysisinfo:{eventinfo:e}}},jQuery.extend(j,h)),j.lap)j.lap.clientapinfo&&(j.lap.clientapinfo.sysid=a.systemName,j.lap.clientapinfo.appname="thunder",j.lap.clientapinfo.appver=f.full);else{var k={lap:{clientapinfo:{sysid:a.systemName,appname:"thunder",appver:f.full}}};jQuery.extend(j,k)}var m={lpr:{clientprinfo:d()},ver:"1.0",ctid:i.get(),lvl:c,lct:g(),lur:{objectid:l()}};if(jQuery.extend(m,j),E.push(m),E.length>=a.logDumpSize){var n={logmsg:JSON.stringify(E)},o=jQuery.param(n),p=new Image;p.src=s+"?"+o,o=null,n=null,m=null,j=null,h=null,p=null,E=[]}}}}()))},b=function(a){switch(a){case"DEBUG":return 0;case"INFO":return 1;case"WARNING":return 2;case"ERROR":return 3;case"ANALYSIS":return 4;case"PDP":return 5;default:return 0}},o=function(a){return c.isNumeric(a)?(a=parseInt(a,10),0>a||a>C?!1:!0):!1},k=function(a){j=a.get(l),j||jQuery.get(r).success(function(b){return j=b.ip,a.set(l,j),j}).error(function(){})},t=function(a){return D.push.apply(D,a)},u=function(a){return p.logLevel=b(a),p.logLevel},v=function(a){return p.logAnalyzeLevel=b(a),p.logAnalyzeLevel},w=function(a){return p.logAggregatorHost=a,p.logAggregatorHost},x=function(a){o(a)&&(p.logDumpSize=a)},y=function(a){return p.consoleAppenderStatus=a,p.consoleAppenderStatus},z=function(a){return p.logCenterAppenderStatus=a,p.logCenterAppenderStatus},A=function(a,b,d){return c.each(D,function(c,e){return e(a,b,d)})},{setup:function(b){return b?void a(b):void a((g||{}).logConfig)},debug:function(b,c){return B||a((g||{}).logConfig),A("DEBUG",b,c)},info:function(b,c){return B||a((g||{}).logConfig),A("INFO",b,c)},warning:function(b,c){return B||a((g||{}).logConfig),A("WARNING",b,c)},error:function(b,c){return B||a((g||{}).logConfig),A("ERROR",b,c)},analysis:function(b,c){return B||a((g||{}).logConfig),A("ANALYSIS",b,c)},pdp:function(b,c){return B||a((g||{}).logConfig),A("PDP",b,c)}}}();var o="fet-form-log",p="fet-form-key",q=':getFetFormLog("tab"),:getFetFormLog("button"),:getFetFormLog("label"),:getFetFormLog("hyberlink")',r=':getFetFormLog("text"),:getFetFormLog("select"),:getFetFormLog("checkbox"),:getFetFormLog("radio")',s=function(a,b,c,d){b||a?j.analysis(d+b+" "+a,c):j.debug(d+b+" "+a,c)},t=function(a,b){var d=a||b;return"string"===jQuery.type(d)?c.trim(d):""},u=function(a,b){var d=a||b;return"string"===jQuery.type(d)?c.trim(d):""},v=function(b,d,e,f,g){var h=u(b.attr(o),e),i={lap:{clientapinfo:{location:a.location,aptid:d}}},j=function(){var a=t(c(this).attr(p),f),b=u(c(this).attr(o),e),d={eventcode:a};jQuery.extend(d,i),s(a,b,d,"CLICKED_")},k=function(){var a,b=t(c(this).attr(p)),d=u(c(this).attr(o)),e={};switch(e={eventcode:b,msg:{analysisinfo:{eventmsg:c(this).val()}}},d.toUpperCase()){case"SELECT":a=c(this).find("option:selected").text(),e.msg.analysisinfo.eventtext=a}jQuery.extend(e,i),s(b,d,e,"CHANGED_")};if("DOM"===g)switch(h.toUpperCase()){case"TAB":case"HYBERLINK":case"BUTTON":case"LABEL":b.off("click.fetFormLog").on("click.fetFormLog",j);break;case"TEXT":case"SELECT":case"CHECKBOX":case"RADIO":b.off("change.fetFormLog").on("change.fetFormLog",k)}else b.off("click.fetFormLog",q).on("click.fetFormLog",q,j),b.off("change.fetFormLog",r).on("change.fetFormLog",r,k)};c.expr[":"].getFetFormLog=function(a,b,d){var e=c(a).attr("fet-form-log");return e?e.toLowerCase()==d[3]:!1},c.fn.fetDomLog=function(a,b,d){v(c(this),a,b,d,"DOM")},c.fn.fetFormLog=function(a){v(c(this),a,null,null,"FORM")},a.thunder={cookieService:h,ctidService:i,loggingService:j,version:f}}(window,document,jQuery);