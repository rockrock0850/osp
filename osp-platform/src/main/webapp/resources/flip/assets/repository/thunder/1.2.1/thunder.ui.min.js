/**
 * thunder v1.2.1
 * ===============================
 * Copyright (c) 2014 Far Eastone Telecommunications Co., Ltd.
 * All Rights Reserved.
 * build time: 2015-04-16 17:03:40 
 */
!function(a,b,c){"use strict";define("thunderUi",["initConfig"],function(a){var d=angular.module("thunder.ui",[]);d.directive("fetAccordion",["$fetUI","$timeout",function(a,b){return{priority:102,name:"fet-accordion",scope:{accordionId:"@",allClose:"@",accordionTheme:"@",sAccordionDisplay:"="},restrict:"EA",replace:!0,transclude:!0,template:'<div class="panel-group accordion" id="{{accordionId}}" ng-transclude></div>',link:function(c,d,e){var f=c.accordionId,g=c.accordionTheme,h=c.$eval(a.getValue(c,e,"index")),i=c.sAccordionDisplay,j=a.getOptionManager().getOption("accordionDisplayOption",i),k=j.isBorder,l=j.fixed,m=1;l="auto"==angular.lowercase(l)?!1:l,g=angular.isString(g)?g:"default",b(function(){h=angular.isNumber(h)&&h<$("[accordion-id="+f+"] [fet-accordion-item]").length?h:1}),d.on("fetInitAccordion",function(){m==h&&d.find(".panel").length>=h&&d.find(".in").length<1&&d.find("[fet-accordion-item]:eq("+(m-1)+") .panel-collapse").collapse("show"),m++,k||d.find(".panel").css("border-style","none")})}}}]),d.factory("accordionService",["$fetUI",function(a){var b={};return b.collapse=function(a,b){var c="[accordion-id="+a+"] #"+b;$(c).collapse("hide")},b.expand=function(b,c,d){d=a.isTrue(d)?!0:!1;var e="[accordion-id="+b+"] #"+c;0!==$(e).length&&(d?($("[fet-accordion-item]:not([item-id="+c+"]) ").find(".panel-collapse.in").collapse("hide"),$(e).collapse("show")):$(e).collapse("show"))},b.expandAll=function(a){$("[accordion-id="+a+"]").find(".panel-collapse").collapse("show")},b.collapseAll=function(a){$("[accordion-id="+a+"]").find(".panel-collapse.in").collapse("hide")},b}]),d.directive("fetAccordionItem",["$fetUI","$compile","httpService","$parse","$timeout",function(a,b,c,d,e){var f="fetAccordionItem";return{priority:104,name:f,scope:!1,require:"?fetAccordion",restrict:"A",link:function(d,f,g){function h(a){var b="<div><h4><a>"+a+"</a></h4></div>";return b=a?v.length>1?null:'<div data-type="title"><h4><a>'+a+"</a></h4></div>":1==v.length?'<div data-type="title">'+v.eq(0).html()+"</div>":0==v.length?'<div data-type="title"><a>&nbsp</a></div>':null}var i=f.parent().attr("accordion-theme"),j=(f.parent().attr("accordion-id"),a.getValue(d,g,"itemId")),k=d.$eval(f.parent().attr("item-toggle")),l=a.isTrue(g.itemDisabled),m=a.getValue(d,g,"itemTitle"),n=a.getExpression(d,g,"onAccordionShow"),o=a.getExpression(d,g,"onAccordionShown"),p=a.getExpression(d,g,"onAccordionHide"),q=a.getExpression(d,g,"onAccordionHidden"),r=a.getValue(d,g,"itemType"),s=a.getValue(d,g,"itemPreload"),t=a.getValue(d,g,"itemAction"),u="#"+j;r=angular.isString(r)?r:"inline",i=angular.isString(i)?i:"default",f.addClass("panel panel-"+i);var v=f.children();f.prepend(h(m));var w=f.find("div:first"),x=f.children("div:odd").addClass("panel-body");w.addClass("panel-heading").children().addClass("panel-title"),l?(x.wrapAll('<div class="collapse" id="'+j+'"></div>'),w.find("a")?w.find("a").addClass("collapsed").attr({"data-toggle":"collapse"}):w.children().attr({"data-toggle":"collapse"})):(x.wrapAll('<div class="panel-collapse collapse" id="'+j+'"></div>'),w.find("a")?w.find("a").addClass("accordion-toggle collapsed").attr({"data-toggle":"collapse",href:"#"+j}):w.children().addClass("accordion-toggle").attr({"data-toggle":"collapse",href:"#"+j}));var y='<div class="panel-collapse collapse" id="'+j+'"><div class="panel-body"></div></div>';0===$(u).length&&f.append($(y));var z=function(){t?c.get(t,{}).success(function(a){var c=b(a)(d);$(u).find(".panel-body").html(c)}).error(function(){$(u).find(".panel-body").html("URL路徑錯誤,請再次確認")}):$(u).find(".panel-body").html("item-action不得為空值,請再次確認")},A=function(a){if(t){var c=b(a)(d);$(u).find(".panel-body").html(c)}else $(u).find(".panel-body").html("item-action不得為空值,請再次確認")};if("html"==angular.lowercase(r))a.isFalse(s)?f.one("show.bs.collapse",function(){z()}):z();else if("apppart"==angular.lowercase(r)){var B="<div app-part src=\"'"+t+"'\"></div>";a.isFalse(s)?f.one("show.bs.collapse",function(){A(B)}):A(B)}f.on("click",function(){k&&f.siblings().find(".panel-collapse.in").collapse("hide")}),f.on("show.bs.collapse",function(){n&&n(),f.find('[data-toggle="collapse"]').removeClass("collapsed").addClass("collapse")}),f.on("shown.bs.collapse",function(){o&&o()}),f.on("hide.bs.collapse",function(){p&&p(),f.find('[data-toggle="collapse"]').removeClass("collapse").addClass("collapsed")}),f.on("hidden.bs.collapse",function(){q&&q()}),e(function(){f.parent().triggerHandler("fetInitAccordion")})}}}]),d.directive("fetAlert",["$fetUI","$timeout",function(a,b){return{name:"fetAlert",priority:99,template:'<div role="alert" class="alert alert-{{alertTheme}} {{widthStyle}}"  ><div ng-show="sAlertDisplay.closable" id="{{alertId}}_close_btn"><button type="button" class="close" ng-click="hideCloseAction()"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button></div> <div   name="content" ng-transclude></div></div>',replace:!0,transclude:!0,restrict:"EA",scope:!0,link:function(c,d,e){function f(d){k&&1==d&&c.$apply(function(){k()}),d&&p.show(o.duration),p.data("fetIsShow",!0),a.isTrue(o.autoHide)&&(o.autoHide=5e3),angular.isNumber(o.autoHide)&&(q=b(function(){p.triggerHandler("fetHideEvent")},o.autoHide)),l&&1==d&&c.$apply(function(){l()})}function g(a){m&&1==a&&c.$apply(function(){m()}),p.hide(o.duration),p.data("fetIsShow",!1),angular.isNumber(o.autoHide)&&b.cancel(q),n&&1==a&&c.$apply(function(){n()})}var h=a.getValue(c,e,"alertId"),i=a.getValue(c,e,"alertTheme"),j=a.getScope(c,e,"sAlertDisplay"),k=a.getExpression(c,e,"onAlertShow"),l=a.getExpression(c,e,"onAlertShown"),m=a.getExpression(c,e,"onAlertHide"),n=a.getExpression(c,e,"onAlertHidden"),o=a.getOptionManager().getOption("alertDisplay",j);c.sAlertDisplay=o,c.alertTheme=i?i:"default",c.alertId=h;var p=$(d);c.hideCloseAction=function(){p.triggerHandler("fetHideEvent")};var q="";p.on("fetShowEvent",function(){b(function(){f(!0)},o.show)}).on("fetHideEvent",function(){b(function(){g(!0)},o.hide)}),p.hasClass("default-hide")?g(!1):f(!1)}}}]),d.directive("fetAlertTrigger",["$fetUI","$triggerService",function(a,b){return{name:"fetAlertTrigger",restrict:"A",priority:99,link:function(c,d,e){var f=a.getValue(c,e,"targetId");if(f){var g=a.getScope(c,e,"sAlertEvent"),h=$(d),i=a.getOptionManager().getOption("alertEvent",g);i.show==i.hide&&"click"==i.show?b.registerEvent("",i.show,h,f,"alert-id"):(b.registerEvent("show",i.show,h,f,"alert-id"),b.registerEvent("hide",i.hide,h,f,"alert-id"))}}}}]),d.directive("fetButtonGroup",["$compile","$parse","$fetUI",function(a,b,c){var d={$setViewValue:angular.noop};return{restrict:"A",require:["fetButtonGroup","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var e,f=this,g=d,h=[],i=[],j="radio"===angular.lowercase(c.buttonType)?"radio":"checkbox";f.init=function(a){g=a},f.addChild=function(a,b){return i.push(b),h.push(a)-1},f.existChildIndex=function(a){return h.indexOf(a)},f.removeChild=function(a){var c=f.existChildIndex(a);if(-1!==c){h.splice(c,1),i.splice(c,1);var d=f.inModelIndex(a);if(-1!==d){var e=g.$viewValue;e.splice(d,1),b.$evalAsync(function(){g.$setViewValue(e)})}}},f.updateChild=function(a,c){var d=h[a];if(d!==c){h[a]=c;var e=g.$viewValue;angular.isArray(e)&&(e[e.indexOf(d)]=c,b.$evalAsync(function(){g.$setViewValue(e)}))}},f.inModelIndex=function(a){var b=g.$viewValue;return b?b.indexOf(a):-1},f.select=function(a){if("radio"===j)b.$evalAsync(function(){g.$setViewValue([a])});else{var c=g.$viewValue;c&&angular.isArray(c)||(c=[]),c.push(a),b.$evalAsync(function(){g.$setViewValue(c)})}},f.unSelect=function(a){if("radio"===j)b.$evalAsync(function(){g.$setViewValue([])});else{var c=g.$viewValue;c&&angular.isArray(c)||(c=[]),c.splice(c.indexOf(a),1),b.$evalAsync(function(){g.$setViewValue(c)})}},f.getTheme=function(){return c.buttonTheme},f.getSize=function(){return c.buttonSize},e=b.$watch(function(){return g.$viewValue},function(a){var b=a;b&&angular.isArray(b)||(b=[]),angular.forEach(h,function(a,c){-1!==b.indexOf(a)?i[c].active():i[c].inactive()})}),a.on("$destroy",function(){angular.isFunction(e)&&e()})}],link:function(a,b,d,e){var f=(d.buttonType,d.buttonTheme,d.buttonJustified),g=e[0],h=e[1];c.isTrue(f)&&b.addClass("btn-group-justified"),b.addClass("btn-group btn-inline").attr("data-toggle","buttons"),h&&g.init(h)}}}]),d.directive("fetButtonItem",["$fetUI",function(a){var b={addChild:angular.noop,removeChild:angular.noop,updateChild:angular.noop,getTheme:angular.noop,inModelIndex:angular.noop,select:angular.noop,unSelect:angular.noop};return{restrict:"A",require:["fetButtonItem","^fetButtonGroup"],scope:!1,controller:["$element","$scope","$attrs",function(a){var b=this;b.inactive=function(){a.hasClass("active")&&a.removeClass("active")},b.active=function(){a.addClass("active")}}],link:function(c,d,e,f){var g,h,i,j=d.parent(),k="radio"===angular.lowercase(j.attr("button-type"))?"radio":"checkbox",l=f[0],m=f[1],n=a.getButtonSize(m.getSize()),o=e.buttonTheme||m.getTheme()||"default";h=function(){return e.ngValue?function(){return c.$eval(e.ngValue)}:function(){return d.attr("value")}}(),d.addClass("btn btn-"+o).addClass(n),(!m||m.databound)&&(m=b),g=m.addChild(h(),l),d.on("click",function(){var a=h(),b="radio"===k;return-1!==m.inModelIndex(a)?(b||(m.unSelect(a),d.removeClass("active")),!1):(m.select(a),void(b&&d.siblings(".active").removeClass("active")))}),m!==b&&(i=c.$watch(function(){return h()},function(a){m.updateChild(g,a)})),d.on("$destroy",function(){m.removeChild(h()),angular.isFunction(i)&&(i||angular.noop)()})}}}]),d.directive("fetCarousel",["$fetUI","$timeout",function(a,b){var c="fetCarousel";return{priority:102,name:c,scope:!0,restrict:"EA",replace:!0,transclude:!0,template:'<div class="carousel slide ui-ticker" data-ride="carousel" id="{{carouselId}}"><div ><div class="carousel-inner" ng-transclude></div><a class="carousel-control left" href="#{{carouselId}}" data-slide="prev"><i class="fa fa-angle-left"></i></a><a class="carousel-control right" href="#{{carouselId}}" data-slide="next"><i class="fa fa-angle-right"></i></a></div></div>',link:function(c,d,e){var f=a.getValue(c,e,"carouselId"),g=c.$eval(a.getValue(c,e,"showSpeed")),h=(a.getValue(c,e,"loop"),c.$eval(a.getValue(c,e,"index"))),i=a.getExpression(c,e,"onCarouselSilde"),j=a.getExpression(c,e,"onCarouselSild");g=angular.isNumber(g)?g:5e3,b(function(){h=angular.isNumber(h)&&h<=d.find(".carousel-inner").children().length?h:1,d.find(".carousel-inner").children().addClass("item"),0==d.find(".item").length&&d.find(".carousel-inner").append('<div class="item">&nbsp;</div>'),d.find(".item").contents().filter(function(){return 8==this.nodeType}).remove(),d.find(".item").each(function(){$.trim($(this).html())||$(this).append("&nbsp;")}),d.find(".carousel-inner").children().length>=h&&d.find(".active").length<1&&d.find(".carousel-inner").children(":eq("+(h-1)+")").addClass("active")}),c.carouselId=f,$(d).carousel({interval:g,pause:"hover",keyboard:!0}),d.on("slide.bs.carousel",function(){i&&angular.isFunction(i)&&i()}).on("slid.bs.carousel",function(){j&&angular.isFunction(j)&&j()})}}}]),d.directive("fetDatepicker",["$fetUI","$timeout","$compile",function(a,b){var c="fetDatepicker";return{priority:102,require:"?ngModel",name:c,scope:!0,restrict:"EA",template:'<div ng-switch on="dateType" ><div class="{{isRadius}}" ng-switch-when="popover"><input type="text" name="datepicker" class="form-control date date-picker" fet-input-mask mask-format="{{dateFormat}}"><span class="input-group-btn"><button ng-if="dateBtn" class="btn btn-default" type="button" name="datepickerButton"><i class="fa fa-calendar"></i></button></span></div><div class="input-group date date-picker" ng-switch-default></div></div>',link:function(c,d,e){var f=angular.lowercase(a.getValue(c,e,"dateType")),g=a.getScope(c,e,"sDatepickerDisplay"),h=(a.getScope(c,e,"swDatepickerDisable"),a.getOptionManager().getOption("datepickerDisplayOption",g)),i=angular.lowercase(h.direction),j=angular.lowercase(h.clearBtn),k=angular.lowercase(h.autoShow),l=angular.lowercase(h.dateBtn),m=angular.lowercase(h.autoClose),n=a.getValue(c,e,"startDate"),o=a.getValue(c,e,"endDate"),p=(a.getValue(c,e,"ngModel"),a.getValue(c,e,"dateFormat")),q=a.getExpression(c,e,"onDateShow"),r=a.getExpression(c,e,"onDateHide"),s=a.getExpression(c,e,"onDateSelect");k=a.isTrue(k)?!0:!1,l=a.isTrue(l)?!0:!1,m=a.isTrue(m)?!0:!1,j=a.isTrue(j)?!0:!1,f=angular.isString(f)?f:"inline",i=angular.isString(i)?i:"auto",p=angular.isString(p)?p:"yyyy/mm/dd",n=angular.isString(n)?n:!1,o=angular.isString(o)?o:!1,c.dateBtn=l,c.dateFormat=p;var t="input-btn";l&&(t="input-group"),c.isRadius=t,c.dateType=f;var u=".date-picker",v={setScopeValue:function(a){var d=this.getWatchValue();angular.isDate(d)&&angular.isDate(a)&&(a.setHours(d.getHours()),a.setMinutes(d.getMinutes()),a.setSeconds(d.getSeconds())),c.datePickerValue=a,b(function(){e.ngModel&&c.$eval("$parent."+e.ngModel+"=datePickerValue")})},getScopeValue:function(){return c.datePickerValue},clearScopeValue:function(){b(function(){d.find(u).find("td.active").removeClass("active")}),this.setScopeValue(null)},getWatchValue:function(){return c.$eval("$parent."+e.ngModel)},setDomValue:function(a){angular.isDate(a)?d.find(u).datepicker("update",a):d.find(u).datepicker("update")},getDomValue:function(){return d.find(u).datepicker("getDate")}},w={show:function(){q&&c.$evalAsync(function(){q()}),b(function(){var a=v.getScopeValue();a||$(".datepicker-dropdown table.table-condensed td.active").removeClass("active"),z()?($(".datepicker-dropdown table.table-condensed th").addClass("readonly"),d.find(u).attr("disabled",!0)):$(".datepicker-dropdown table.table-condensed th").removeClass("readonly")})},changeDate:function(){if(s&&c.$evalAsync(function(){s()}),"popover"==f){var a=$.inputmask.isValid(d.find(u).val(),{alias:c.dateFormat});if(a){var b=v.getDomValue();v.setScopeValue(b)}else v.setScopeValue(null)}else{var b=v.getDomValue();b&&(c.datePickerValue=b),v.setScopeValue(c.datePickerValue?b:null)}},hide:function(){r&&c.$evalAsync(function(){r()})},clearDate:function(){angular.isDate(c.datePickerValue)&&v.clearScopeValue(),b(function(){d.find(u).find("td.active").removeClass("active")})}},x={startDate:n,format:p,autoclose:m,orientation:i,todayHighlight:!0,language:"zh-TW",clearBtn:j,keyboardNavigation:!0,endDate:o};b(function(){d.find(u).datepicker(x).on("changeDate",function(a){w.changeDate(a)}).on("show",function(a){w.show(a)}).on("hide",function(a){w.hide(a)}).on("clearDate",function(a){w.clearDate(a)});var a=null;if(e.ngModel&&(a=c.$eval("$parent."+e.ngModel),c.datePickerValue=a),angular.isDate(a)){var f=new Date(a.getTime());f.setHours(0,0,0,0),d.find(u).datepicker("update",f)}b(function(){angular.isDate(v.getWatchValue())||d.find(u).find("td.active").removeClass("active")}),k&&!z()&&d.find(u).datepicker("show")});var y=c.$watch(function(){var a=v.getWatchValue();return angular.isDate(a)?a.getTime():null},function(a,c){a!==c&&b(function(){if(a){var b=new Date(a);b.setHours(0,0,0,0),v.setDomValue(b),v.setScopeValue(new Date(a))}else d.find(u).val("").datepicker("update"),v.setScopeValue(null)})}),z=function(){var b,d;return b=a.getScope(c,e,"swDatepickerDisable"),d=a.isTrue(b)?!0:!1},A=c.$watch(function(){var a=z();return a},function(a){b(function(){"popover"===f?a?(d.find(u).attr("disabled",!0).datepicker("setDaysOfWeekDisabled","0,1,2,3,4,5,6"),d.find('[name="datepickerButton"]').attr("disabled",!0),d.find(".input-group-btn").off("click")):(d.find(u).attr("disabled",!1).datepicker("setDaysOfWeekDisabled",""),d.find('[name="datepickerButton"]').attr("disabled",!1),d.find(".input-group-btn").on("click",function(){d.find(".form-control").datepicker("show")})):a?(d.find(u).find(".table-condensed td,th").addClass("readonly"),d.find(u).find(".table-condensed th.clear").addClass("disabled"),d.find(u).find(".table-condensed tr").on("click",function(a){return a.stopPropagation(),a.preventDefault(),!1})):(d.find(u).find(".table-condensed td,th").removeClass("readonly"),d.find(u).find(".table-condensed th.clear").removeClass("disabled"),d.find(u).find(".table-condensed tr").off("click"))})});d.on("$destroy",function(){(y||angular.noop)(),(A||angular.noop)()})}}}]),d.directive("fetDatepickerRange",["$fetUI","$timeout","$compile",function(a,b,d){var e="fetDatepickerRange";return{priority:102,require:"?ngModel",name:e,scope:!0,restrict:"EA",template:'<div class="row"><div class="date-picker input-group input-daterange"></div></div>',link:function(e,f,g){function h(a,b){return null!==a&&a!==c&&angular.isDate(a)?(a.setFullYear(b.getFullYear()),a.setMonth(b.getMonth()),a.setDate(b.getDate()),a):b}var i=angular.lowercase(a.getValue(e,g,"dateType")),j=a.getScope(e,g,"sDatepickerDisplay"),k=(a.getScope(e,g,"swDatepickerDisable"),a.getOptionManager().getOption("datepickerRangeDisplayOption",j)),l=angular.lowercase(k.direction),m=angular.lowercase(k.clearBtn),n=angular.lowercase(k.autoShow),o=angular.lowercase(k.dateBtn),p=angular.lowercase(k.autoClose),q=a.getValue(e,g,"dateFormat"),r=a.getValue(e,g,"startDate"),s=a.getValue(e,g,"endDate"),t=a.getExpression(e,g,"onDateShow"),u=a.getExpression(e,g,"onDateHide"),v=a.getExpression(e,g,"onDateSelect"),w=".date-picker",x=f.find(w),y=null,z=(new Array,{start:null,end:null});i=angular.isString(i)?i:"inline",l=angular.isString(l)?l:"auto",q=angular.isString(q)?q:"yyyy/mm/dd",r=angular.isString(r)?r:!1,s=angular.isString(s)?s:!1,e.dates=[null,null];var A=function(a){e.dates=a,e.$evalAsync(function(){e.$eval("$parent."+g.ngModel+"= dates")})},B=function(a){e.dates[0]=a,A(e.dates)},C=function(a){e.dates[1]=a,A(e.dates)},D=function(a){return angular.isArray(a)&&2==a.length?!0:!1},E=function(a){var c=P();"start"==a?(angular.isArray(c)&&angular.isDate(c[0])&&B(null),b(function(){"inline"==i?x.find(".range-start td.active").removeClass("active selected"):$(".datepicker-dropdown table.table-condensed td.active").removeClass("active selected")})):"end"==a&&(angular.isArray(c)&&angular.isDate(c[1])&&C(null),b(function(){"inline"==i?x.find(".range-end td.active").removeClass("active selected"):$(".datepicker-dropdown table.table-condensed td.active").removeClass("active selected")}))},F=e.$watch(function(){var a=P();return angular.isArray(a)?angular.isDate(a[0])?a[0].getTime():a[0]:a},function(a,b){if(a!==b&&a!==c){var d=a?new Date(a):a;N(d)}}),G=e.$watch(function(){var a=P();return angular.isArray(a)?angular.isDate(a[1])?a[1].getTime():a[1]:a},function(a,b){if(a!==b){var c=a?new Date(a):a;O(c)}}),H=function(){var b,c;return b=a.getScope(e,g,"swDatepickerDisable"),c=a.isTrue(b)?!0:!1},I=e.$watch(function(){var a=H();return a},function(c){c=a.isTrue(c)?!0:!1,b(function(){"popover"===i?c?(f.find(".date-picker input").attr("disabled",!0).datepicker("setDaysOfWeekDisabled","0,1,2,3,4,5,6"),f.find('[name="datepickerButtonFrom"],[name="datepickerButtonTo"]').attr("disabled",!0),f.find(".input-group-btn.start,.end").off("click")):(f.find(".date-picker input").attr("disabled",!1).datepicker("setDaysOfWeekDisabled",""),f.find('[name="datepickerButtonFrom"],[name="datepickerButtonTo"]').attr("disabled",!1),f.find(".input-group-btn.start").on("click",function(){f.find('[name="from"]').datepicker("show")}),f.find(".input-group-btn.end").on("click",function(){f.find('[name="to"]').datepicker("show")})):c?(f.find(w).find(".table-condensed td,th").addClass("readonly"),f.find(w).find(".table-condensed th.clear").addClass("disabled"),f.find(w).find(".table-condensed tr").on("click",function(a){return a.stopPropagation(),a.preventDefault(),!1})):(f.find(w).find(".table-condensed td,th").removeClass("readonly"),f.find(w).find(".table-condensed th.clear").removeClass("disabled"),f.find(w).find(".table-condensed tr").off("click"))})}),J={changePopoverStyle:function(a){Q("popover",{elementName:a.elementName})},changeInlineStyle:function(a){Q("inline",{className:a.className})}},K=function(a){var c=i,d=P(),g=!1;d||(d=[null,null],g=!0);var j=d[0],k=d[1];if("inline"===c)"start"===a?(j=f.find(w).find(".range-start").datepicker("getDate"),d[0]&&angular.isDate(j)&&angular.isDate(k)&&j.format("yyyy/MM/dd")==d[0].format("yyyy/MM/dd")&&J.changeInlineStyle({className:"range-start"}),d[0]=h(d[0],j),X?B(null):(e.dates=d,B(d[0]))):(k=f.find(w).find(".range-end").datepicker("getDate"),d[1]&&angular.isDate(j)&&angular.isDate(k)&&k.format("yyyy/MM/dd")==d[1].format("yyyy/MM/dd")&&J.changeInlineStyle({className:"range-end"}),d[1]=h(d[1],k),X?C(null):(e.dates=d,C(d[1])));else{var l;"start"===a?(l=$.inputmask.isValid(f.find(w).find('[name="from"]').val(),{alias:q}),l?(j=f.find('[name="from"]').datepicker("getDate"),d[0]&&angular.isDate(j)&&angular.isDate(k)&&j.format("yyyy/MM/dd")==d[0].format("yyyy/MM/dd")&&b(function(){J.changePopoverStyle({elementName:"from"})}),d[0]=h(d[0],j)):j=null):(l=$.inputmask.isValid(f.find(w).find('[name="to"]').val(),{alias:q}),l?(k=f.find('[name="to"]').datepicker("getDate"),d[1]&&angular.isDate(j)&&angular.isDate(k)&&k.format("yyyy/MM/dd")==d[1].format("yyyy/MM/dd")&&b(function(){J.changePopoverStyle({elementName:"to"})}),d[1]=h(d[1],k)):k=null),A(d)}},L=function(a){a||console.log("error !!"+a);var b=new Date(a.getTime());return b.setMonth(b.getMonth()),b.setDate(1),b},M=function(a){var b=new Date(a.getTime());return b.setHours(0,0,0,0),b},N=function(a){if(angular.isDate(a)){var c=new Date(a.getTime()),d=P();c.setHours(0,0,0,0),angular.isDate(a)&&D(d)&&angular.isDate(d[1])&&a.getTime()>d[1].getTime()&&(d[1]=h(d[1],a),A(d)),f.find(w).find('[name="from"]').datepicker("update",c),f.find(w).find(".range-start").datepicker("update",c),z.start=L(c),"inline"==i?(J.changeInlineStyle({className:"range-end"}),J.changeInlineStyle({className:"range-start"})):b(function(){J.changePopoverStyle({elementName:"from"})})}else f.find(w).find('[name="from"]').val("").datepicker("update"),f.find(w).find(".range-start").datepicker("update")},O=function(a){if(angular.isDate(a)){var c=new Date(a.getTime()),d=P();c.setHours(0,0,0,0),angular.isDate(a)&&D(d)&&angular.isDate(d[0])&&d[0].getTime()>a.getTime()&&(d[0]=h(d[0],a),A(d)),f.find(w).find('[name="to"]').datepicker("update",c),f.find(w).find(".range-end").datepicker("update",c),z.end=L(c),"inline"==i?(J.changeInlineStyle({className:"range-end"}),J.changeInlineStyle({className:"range-start"})):b(function(){J.changePopoverStyle({elementName:"to"})})}else f.find(w).find('[name="to"]').val("").datepicker("update"),f.find(w).find(".range-end").datepicker("update")},P=function(){var a=[];return g.ngModel?(a=e.$eval("$parent."+g.ngModel),D()?angular.isArray(a)&&2==a.length?(null==a[0]&&null==a[1]?f.find(w).find("td.active").removeClass("active selected"):null==a[0]?f.find(w).find(".range-start").find("td.active").removeClass("active selected"):null==a[1]&&f.find(w).find(".range-end").find("td.active").removeClass("active selected"),a):[null,null]:a):null},Q=function(a,b){var c,d="popover"==a?"dropdown":"inline",f=null,g=null,h="";c="range-start"==b.className||"range-end"==b.className?"#"+e.$id+"."+b.className:"","popover"==a&&$(".datepicker-dropdown").length%2===0&&(h="from"==b.elementName?":even":":odd");var i="popover"==a?x.find('[name="from"]').datepicker("getDate"):x.find(".range-start").datepicker("getDate"),j="popover"==a?x.find('[name="to"]').datepicker("getDate"):x.find(".range-end").datepicker("getDate"),k=P();if(angular.isArray(k)){var l=[angular.isDate(k[0])?new Date(k[0]):null,angular.isDate(k[1])?new Date(k[1]):null];if(null==l[0]||null==l[1])null!=l[0]||"from"!=b.elementName&&"range-start"!=b.className?null!=l[1]||"to"!=b.elementName&&"range-end"!=b.className||$(c+" .datepicker-"+d+" .datepicker-days table.table-condensed td.active").removeClass("active"):$(c+" .datepicker-"+d+" .datepicker-days table.table-condensed td.active").removeClass("active");else{if(!i||!j)return;g=new Date("from"==b.elementName||"range-start"==b.className?z.start?z.start.getTime():i.getTime():z.end?z.end.getTime():j.getTime()),$(c+" .datepicker-"+d+h+" .datepicker-days table.table-condensed td").each(function(){var a=parseInt($(this).text());$(this).removeClass("selected range"),f=new Date(g),$(this).hasClass("old")?(0==g.getMonth()?(f.setFullYear(g.getFullYear()-1),f.setMonth(11)):(f.setFullYear(g.getFullYear()),f.setMonth(g.getMonth()-1)),f.setDate(a)):$(this).hasClass("new")?(11==g.getMonth()?(f.setFullYear(g.getFullYear()+1),f.setMonth(0)):(f.setFullYear(g.getFullYear()),f.setMonth(g.getMonth()+1)),f.setDate(a)):(f.setFullYear(g.getFullYear()),f.setMonth(g.getMonth()),f.setDate(a)),(l[1].format("yyyy/MM/dd")==f.format("yyyy/MM/dd")||l[0].format("yyyy/MM/dd")==f.format("yyyy/MM/dd"))&&$(this).addClass("selected"),l[0].getTime()<f.getTime()&&l[1].getTime()>f.getTime()&&$(this).addClass("range")})}}};if("popover"==i){y='<input type="text" class="form-control" name="from" fet-input-mask mask-format="'+q+'" style="text-align: left;" ><span class="input-group-addon"> 至 </span><input type="text" class="form-control" name="to" fet-input-mask mask-format="'+q+'" style="text-align: left">';var R=d(y)(e);if(x.append(R),x.find('input[name="from"],input[name="to"]').datepicker({startDate:r,autoclose:p,endDate:s,format:q,orientation:l,todayHighlight:"true",language:"zh-TW",clearBtn:m}).on("changeDate",function(a){K("from"==a.target.name||"range-start"==a.target.className?"start":"end")}).on("clearDate",function(a){E("from"==a.target.name||"range-start"==a.target.className?"start":"end")}).on("show",function(a){angular.isDate(z.start)||(z.start=L(x.find('[name="from"]').datepicker("getDate"))),angular.isDate(z.end)||(z.end=L(x.find('[name="to"]').datepicker("getDate"))),J.changePopoverStyle({elementName:a.target.name}),"from"==a.target.name?t&&e.$evalAsync(function(){t()}):t&&e.$evalAsync(function(){t()})}).on("changeMonth",function(a){"from"==a.target.name||"range-start"==a.target.className?z.start=L(a.date):z.end=L(a.date),b(function(){J.changePopoverStyle({elementName:a.target.name})})}).on("changeYear",function(a){"from"==a.target.name||"range-start"==a.target.className?z.start=L(a.date):z.end=L(a.date),b(function(){J.changePopoverStyle({elementName:a.target.name})})}),b(function(){var a=P();if(angular.isArray(a)){if(angular.isDate(a[1])){var b=M(a[1]);f.find(w).find('[name="to"]').datepicker("update",b)}if(angular.isDate(a[0])){var b=M(a[0]);f.find(w).find('[name="from"]').datepicker("update",b)}n&&!H()&&f.find(".date-picker input").datepicker("show")}}),o){var S="";H()&&(S="disabled");var T='<span class="input-group-btn start"><button class="btn btn-default" type="button" name="datepickerButtonFrom" style="border-top-left-radius: 0; border-bottom-left-radius: 0;" '+S+'><i class="fa fa-calendar"></i></button></span>',U='<span class="input-group-btn end"><button class="btn btn-default" type="button" name="datepickerButtonTo" '+S+'><i class="fa fa-calendar"></i></button></span>';f.find('[name="from"]').after(T),f.find('[name="to"]').after(U)}}else{y='<div id="'+e.$id+'" class="range-start"></div><span class="input-group-addon"> 至 </span><div id="'+e.$id+'" class="range-end"></div>',x.append(y),x.find("div").datepicker({startDate:r,autoclose:p,endDate:s,format:q,orientation:l,todayHighlight:"true",language:"zh-TW",clearBtn:m}).on("changeDate",function(a){K("from"==a.target.name||"range-start"==a.target.className?"start":"end")}).on("clearDate",function(a){E("from"==a.target.name||"range-start"==a.target.className?"start":"end"),X=!1}).on("changeMonth",function(a){"from"==a.target.name||"range-start"==a.target.className?z.start=L(a.date):z.end=L(a.date),b(function(){J.changeInlineStyle({className:a.target.className})})}).on("changeYear",function(a){"from"==a.target.name||"range-start"==a.target.className?z.start=L(a.date):z.end=L(a.date),b(function(){J.changeInlineStyle({className:a.target.className})})});var V=P();if(angular.isArray(V)){if(angular.isDate(V[1])){var W=M(V[1]);e.dates[1]=W,f.find(w).find(".range-end").datepicker("update",W)}else f.find(".date-picker .range-end td.active").removeClass("active selected");if(angular.isDate(V[0])){var W=M(V[0]);e.dates[0]=W,f.find(w).find(".range-start").datepicker("update",W)}else f.find(".date-picker .range-start td.active").removeClass("active selected");J.changeInlineStyle({className:"range-end"}),J.changeInlineStyle({className:"range-start"})}else f.find(".date-picker .range-start td.active").removeClass("active selected"),f.find(".date-picker .range-end td.active").removeClass("active selected")}f.on("$destroy",function(){(F||angular.noop)(),(G||angular.noop)(),(I||angular.noop)()}),x.on("hide",function(){H()||$(".datepicker-dropdown table.table-condensed th").removeClass("disabled"),u&&e.$evalAsync(function(){u()})});var X=!1;x.find("th.clear").on("click",function(){var a=P();a||(A([null,null]),X=!0)}),x.on("changeDate",function(){v&&e.$evalAsync(function(){v()})})}}}]),d.directive("fetDropdown",["$fetUI",function(a){return{name:"fet-dropdown",scope:!0,restrict:"EA",replace:!0,transclude:"element",template:'<div class="btn-group drop{{sDropdownDisplay.direction}}"><button type="button" class="btn btn-{{dropdownTheme}} {{sDropdownDisplay.size}}">{{dropdownText}}</button><button type="button" class="btn btn-{{dropdownTheme}} {{sDropdownDisplay.size}} dropdown-toggle" data-toggle="dropdown"><i class="fa fa-angle-{{sDropdownDisplay.direction}}"></i></button></div>',compile:function(b,c,d){return{post:function(b,c,e){var f=a.getScope(b,e,"sDropdownDisplay"),g=a.getValue(b,e,"dropdownTheme"),h=a.getValue(b,e,"dropdownText").toString(),i=a.getExpression(b,e,"onDropdownShow"),j=a.getExpression(b,e,"onDropdownShown"),k=a.getExpression(b,e,"onDropdownHide"),l=a.getExpression(b,e,"onDropdownHiden");f.direction="down"==angular.lowercase(f.direction)?"bottom":f.direction;var m="";d(b.$parent,function(a){var b=a;b.addClass("dropdown-menu"),b.attr("role","menu"),m=b}),g=angular.isString(g)&&g?g:"default";a.getOptionManager().getOption("dropdownDisplay",{});angular.isString(f.size)&&("l"==angular.lowercase(f.size)?f.size="btn-lg":"s"==angular.lowercase(f.size)&&(f.size="btn-sm")),angular.isString(f.direction)&&(f.direction="bottom"==f.direction.toLowerCase()?"down":"up"),b.sDropdownDisplay=f,b.dropdownTheme=g,b.dropdownText=h,c.append(m),c.on("show.bs.dropdown",function(){i&&angular.isFunction(i)&&i()}),c.on("shown.bs.dropdown",function(){j&&angular.isFunction(j)&&j()}),c.on("hide.bs.dropdown",function(){k&&angular.isFunction(k)&&k()}),c.on("hidden.bs.dropdown",function(){l&&angular.isFunction(l)&&l()})}}}}}]),d.factory("$optionManager",function(){var a={};return a.tooltipDefault={animation:!0,container:"body",html:"false",placement:"auto",trigger:"click"},a.tooltipEventDefault={toggle:"click"},a.gritterDefault={image:null,sticky:!1,class_name:""},a.gritterDisplayDefault={show:100,hide:100,duration:500,theme:"black",autoShow:!1,autoHide:!0,position:"top-right"},a.gritterEventDefault={show:"click"},a.popoverDefault={animation:!0,container:"body",html:"true",placement:"auto"},a.popoverEventDefault={toggle:"click"},a.modalDefault={backdrop:"static",keyboard:!0,show:!1},a.alertDefault={autoShow:!1,hideDelaly:null,closable:!0,duration:0},a.selectDefault={},a.displayDefault={placement:"auto",show:200,hide:200,autoShow:!1},a.alertDisplayDefault={autoShow:!0,hideDelaly:null,closable:!0,show:0,hide:0},a.modalDisplayDefault={show:200,hide:200,autoShow:!1,esc:!0,closable:!0},a.dropdownDisplayDefault={direction:"top",size:"m"},a.fileuploadOptionsDefault={remove:"移除",selected:"選擇了: $file",invalid:"此檔案類型不允許上傳",toomany:"上傳檔案數量過多",tip:!1},a.alertTriggerEventDefault={show:"click",hide:"click"},a.tabDisplayOptionDefault={direction:"top",fixed:"auto",isBorder:!1,navDirection:""},a.accordionDisplayOptionDefault={fixed:"auto",isBorder:!1},a.fancyboxDefault={type:null,title:null,content:null,padding:10,loop:!1,scrolling:"auto",mouseWheel:!1,autoSize:!1,helpers:{title:{type:"outside"}},iframe:{scrolling:"auto",preload:!0},openEffect:"fade",closeEffect:"fade",nextEffect:"elastic",prevEffect:"elastic",nextSpeed:"500",prevSpeed:"500",closeMethod:"zoomOut",openMethod:"zoomIn",nextMethod:"changeIn",prevMethod:"changeOut",beforeLoad:null,afterLoad:null,beforeShow:null,afterShow:null,beforeClose:null,afterClose:null},a.fancyboxDisplayDefault={show:500,hide:500,autoShow:!1,autoHide:null,autoPlay:!1,high:600,width:800,esc:!0,fullScreen:!0,playSpeed:5e3},a.datepickerDisplayOptionDefault={direction:"auto",clearBtn:!0,autoShow:!1,dateBtn:!1,autoClose:!0,disabled:!1},a.datepickerRangeDisplayOptionDefault={direction:"auto",clearBtn:!0,autoShow:!1,dateBtn:!1,autoClose:!0,disabled:!1},a.timepickerDefault={animation:!1,title:null,container:"body",html:!0,delay:{show:0,hide:0}},a.timepickerDisplayDefault={autoShow:!1,autoHide:null,direction:"auto",clearBtn:!0,timeBtn:!1,secSelect:!0,disabled:!1},a.getOption=function(a,b){var c={};
switch(a){case"gritterDefault":$.extend(c,this.gritterDefault,b);break;case"gritterDisplayDefault":$.extend(c,this.gritterDisplayDefault,b);break;case"fetTooltip":$.extend(c,this.tooltipDefault,b);break;case"fetTooltipEvent":$.extend(c,this.tooltipEventDefault,b);break;case"fetPopover":$.extend(c,this.popoverDefault,b);break;case"fetPopoverEvent":$.extend(c,this.popoverEventDefault,b);break;case"fetModal":$.extend(c,this.modalDefault,b);break;case"fetAlert":$.extend(c,this.alertDefault,b);break;case"display":$.extend(c,this.displayDefault,b);break;case"alertDisplay":$.extend(c,this.alertDisplayDefault,b);break;case"alertEvent":$.extend(c,this.alertTriggerEventDefault,b);break;case"modalDisplay":$.extend(c,this.modalDisplayDefault,b);break;case"dropdownDisplay":$.extend(c,this.dropdownDisplayDefault,b);break;case"fileuploadOptions":$.extend(c,this.fileuploadOptionsDefault,b);break;case"fetFancybox":$.extend(c,this.fancyboxDefault,b);break;case"fetFancyboxDisplay":$.extend(c,this.fancyboxDisplayDefault,b);break;case"tabDisplayOption":$.extend(c,this.tabDisplayOptionDefault,b);break;case"accordionDisplayOption":$.extend(c,this.accordionDisplayOptionDefault,b);break;case"datepickerDisplayOption":$.extend(c,this.datepickerDisplayOptionDefault,b);break;case"datepickerRangeDisplayOption":$.extend(c,this.datepickerRangeDisplayOptionDefault,b);break;case"fetTimepicker":$.extend(c,this.timepickerDefault,b);break;case"fetTimepickerDisplay":$.extend(c,this.timepickerDisplayDefault,b)}return c},a}),d.factory("$fetUI",["$parse","$optionManager","loggingService","validateService",function(b,d,e,f){var g={};return g.isFalse=function(a){return a===!1||"false"==angular.lowercase(a)},g.isTrue=function(a){return a===!0||"true"==angular.lowercase(a)},g.uiBlock=function(b,c){var d=a.flipAsset||"//flip-test.fareastone.com.tw/flip-asset",e="<div></div>",f=96;if(g.isTrue(c)){var h=b.css("width")?b.css("width"):"";h=parseInt(h.replace(/px/,""));var i=(f>=h?h:f)-3;console.log(),b.block({message:e,css:{textAlign:"center",border:"none",width:i+"px",height:"12px",backgroundImage:'url("'+d+'/img/loading-bar23.gif")'},overlayCSS:{backgroundColor:"#888888"}})}else b.unblock()},g.getButtonSize=function(a){switch(a=angular.lowercase(a)){case"l":return"btn-lg";case"f":return"btn-block";case"s":return"btn-sm";default:return""}},g.log=function(a,b){alert(b+":"+a)},g.error=function(a,b){e.error(b,a)},g.debug=function(a,b){e.debug(b,a)},g.info=function(a,b){e.info(b,a)},g.warn=function(a,b){e.warn(b,a)},g.getValidateManager=function(){return f},g.getOptionManager=function(){return d},g.getValue=function(a,b,c){return b[c]},g.getScope=function(a,b,c){return a.$eval(b[c])},g.getExpression=function(a,d,e){if(d[e]){var f=d[e];f=f.replace(/\([a-zA-Z0-9,;.]*\)/,"(params)");var g=b(f);return function(b){g(a,b)}}return c},g.callBackEventByExpression=function(a,b){b&angular.isFunction(b)&&a.$apply(function(){})},g}]),d.factory("gritterService",["$fetUI",function(a){var b={},c=function(b,c,d,e){var f=a.getOptionManager(),g=f.getOption("gritterDefault",{title:b,text:c,image:d}),h=f.getOption("gritterDisplayDefault",e);if(h&&(angular.isNumber(h.autoHide)?(g.time=h.autoHide,g.sticky=!1,g._autoHide=!0):0==h.autoHide||"false"==angular.lowercase(h.autoHide)?(g.sticky=!0,g._autoHide=!1):(g.sticky=!1,g.time=6e3,g._autoHide=!0),angular.isNumber(h.duration)&&(g.fade_in_speed=h.duration,g.fade_out_speed=h.duration),angular.isString(e.theme)))switch(e.theme){case"info":case"warning":case"success":case"danger":g.class_name="alert alert-"+e.theme;break;case"white":g.class_name="gritter-light"}return g};return b.gritterOption={},b.promiseArray=[],b.add=function(a){var b;return b=$.gritter.add(a),0==a._autoHide&&this.promiseArray.push(b),b},b.addImageMessage=function(a,b,d,e){return this.add(c(a,b,d,e))},b.addMessage=function(a,b,d){return this.add(c(a,b,"",d))},b.getOption=function(a,b,d,e){return c(a,b,d,e)},b.removeAll=function(){$.gritter.removeAll(),this.promiseArray=[]},b.remove=function(a){$.gritter.remove(a)},b.getPromiseArray=function(){return this.promiseArray},b.removeFirstPromiseArray=function(){return this.promiseArray.shift()},b.removeLastPromiseArray=function(){return this.promiseArray.pop()},b.removeFirst=function(){var a=this.promiseArray.shift();angular.isUndefined(a)?b.removeAll():$.gritter.remove(a)},b.removeLast=function(){var a=this.promiseArray.pop();angular.isUndefined(a)?b.removeAll():$.gritter.remove(a)},b}]),d.factory("jqueryInputmaskProvider",["loggingService",function(a){var b="success",c="error";$.extend($.inputmask.defaults.definitions,{r:{validator:function(a){var b=function(a){var b=0,c="ABCDEFGHJKLMNPQRSTUVXYWZIO";b=c.indexOf(a.substr(0,1))+10,b=Math.floor(b/10)+b%10*9;for(var d=1;d<a.length-1;d++)b+=a.substr(d,1)*(9-d);return b+=1*a.substr(9,1)},c=!0,d=new RegExp("[A-Za-z][12]\\d{8}");if(d.test(a)){var e=b(a);if(e%10!=0)for(var f=1*a.substr(9,1),g=0;10>g;g++){var h=e-f+g;if(h%10==0){c=!1;break}}}else c=!1;return c},cardinality:10,casing:"upper",prevalidator:[{validator:"[A-Za-z]",cardinality:1},{validator:"[A-Za-z][12]",cardinality:2},{validator:"[A-Za-z][12]\\d",cardinality:3},{validator:"[A-Za-z][12]\\d{2}",cardinality:4},{validator:"[A-Za-z][12]\\d{3}",cardinality:5},{validator:"[A-Za-z][12]\\d{4}",cardinality:6},{validator:"[A-Za-z][12]\\d{5}",cardinality:7},{validator:"[A-Za-z][12]\\d{6}",cardinality:8},{validator:"[A-Za-z][12]\\d{7}",cardinality:9}]},m:{validator:"[0][9]\\d{8}",cardinality:10,prevalidator:[{validator:"[0]",cardinality:1},{validator:"[0][9]",cardinality:2},{validator:"[0][9]\\d",cardinality:3},{validator:"[0][9]\\d{2}",cardinality:4},{validator:"[0][9]\\d{3}",cardinality:5},{validator:"[0][9]\\d{4}",cardinality:6},{validator:"[0][9]\\d{5}",cardinality:7},{validator:"[0][9]\\d{6}",cardinality:8},{validator:"[0][9]\\d{7}",cardinality:9}]},t:{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9][:][0-5][0-9]",cardinality:8,prevalidator:[{validator:"[0-2]",cardinality:1},{validator:"[0][0-9]|[1][0-9]|[2][0-3]",cardinality:2},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:]",cardinality:3},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5]",cardinality:4},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9]",cardinality:5},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9][:]",cardinality:6},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9][:][0-5]",cardinality:7}]},s:{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5][0-9]",cardinality:5,prevalidator:[{validator:"[0-2]",cardinality:1},{validator:"[0][0-9]|[1][0-9]|[2][0-3]",cardinality:2},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:]",cardinality:3},{validator:"([0][0-9]|[1][0-9]|[2][0-3])[:][0-5]",cardinality:4}]}}),$.extend($.inputmask.defaults.aliases,{thousands:{greedy:!1,prefix:"",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:"*",digitsOptional:!0,clearMaskOnLostFocus:!1},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1},".":{validator:"[.]",cardinality:1}}}});var d={};return d.rocid={validate:function(a){if(!a)return b;var d=$.inputmask.isValid(a,{mask:"r"});return d?b:c},successMessage:"",errorMessage:"身份證字號檢核失敗，請確認填入內容是否正確",warningMessage:""},d.email={validate:function(a){if(!a)return b;var d=$.inputmask.isValid(a,{alias:"email"});return d?b:c},successMessage:"",errorMessage:"e-mail檢核失敗，請確認填入內容是否正確",warningMessage:""},d.mobile={validate:function(d){if(!d)return b;var e=$.inputmask.isValid(d,{alias:"decimal"});if(e){var f=$.inputmask.isValid(d,{mask:"m"});return f?b:c}return a.debug("mobile","參數型態只能為number"),c},successMessage:"",errorMessage:"手機號碼檢核失敗，請確認填入內容是否正確",warningMessage:""},d.number={validate:function(a){if(!a)return b;var d=$.inputmask.isValid(a,{alias:"decimal"});return d?b:c},successMessage:"",errorMessage:"數字型態檢核失敗，請確認填入內容是否正確",warningMessage:""},d.telephone={validate:function(a){var d=!1;if(angular.isString(a)){var e,f=!1;"(02)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||8==e.length&&(d=!0)):"(037)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||6==e.length&&(d=!0)):"(03)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(049)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||7==e.length&&(d=!0)):"(04)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||(7==e.length||8==e.length)&&(d=!0)):"(05)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(06)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(07)"==a.substring(0,4)?(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0)):"(0826)"==a.substring(0,6)?(e=a.substring(6),f=isNaN(e),f||5==e.length&&(d=!0)):"(0836)"==a.substring(0,6)?(e=a.substring(6),f=isNaN(e),f||5==e.length&&(d=!0)):"(082)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||6==e.length&&(d=!0)):"(089)"==a.substring(0,5)?(e=a.substring(5),f=isNaN(e),f||6==e.length&&(d=!0)):"(08)"==a.substring(0,4)&&(e=a.substring(4),f=isNaN(e),f||7==e.length&&(d=!0))}return d?b:c},successMessage:"",errorMessage:"電話號碼型態檢核失敗，請確認填入內容是否正確",warningMessage:""},d.date={validate:function(a,d){if(!a)return b;var e=angular.isString(d)?d:"yyyy/mm/dd";if(angular.isDate(a))return b;var f=$.inputmask.isValid(a,{alias:e});return f?b:c},successMessage:"",errorMessage:"日期型態檢核失敗，請確認填入內容是否正確",warningMessage:""},d.required={validate:function(a){var d=!0;return(angular.isUndefined(a)||null==a||""==a)&&(d=!1),d?b:c},successMessage:"",errorMessage:"必填狀態檢核失敗，請確認是否確實填入內容",warningMessage:""},d["max-length"]={validate:function(d,e){if(!d)return b;if(angular.isString(d)){var f=!0,g=!0;return g=$.inputmask.isValid(e,{alias:"decimal"}),g?(d.length>e&&(f=!1),f?b:c):(a.debug("max-length","第二參數型態只能為number"),c)}return c},successMessage:"",errorMessage:"最大長度檢核失敗，請確認填入內容是否正確",warningMessage:""},d["min-length"]={validate:function(d,e){if(!d)return b;if(angular.isString(d)){var f=!0,g=!0;return g=$.inputmask.isValid(e,{alias:"decimal"}),g?(d.length<e&&(f=!1),f?b:c):(a.debug("min-length","第二參數型態只能為number"),c)}return c},successMessage:"",errorMessage:"最小長度檢核失敗，請確認填入內容是否正確",warningMessage:""},d.time={validate:function(a){if(!a)return b;var d;d=angular.isDate(a)?a.format("hh:mm:ss"):a;var e=$.inputmask.isValid(d,{mask:"t"});return e?b:c},successMessage:"",errorMessage:"時間檢核失敗，請確認填入內容是否正確",warningMessage:""},d.timenosec={validate:function(a){if(!a)return b;var d;d=angular.isDate(a)?a.format("hh:mm"):a;var e=$.inputmask.isValid(d,{mask:"s"});return e?b:c},successMessage:"",errorMessage:"時間(沒有秒)檢核失敗，請確認填入內容是否正確",warningMessage:""},d}]),d.factory("validateService",["jqueryInputmaskProvider",function(a){var b=[],d={};return d.getValidators=function(){return b},d.register=function(a,b){if(this.getValidators[a])throw"Error,Validator can't duplicate";return b?void(this.getValidators[a]=b):c},d.getValidator=function(a){return this.getValidators[a]?this.getValidators[a]:c},d.validate=function(a){var b=$('[validate-id="'+a+'"]');b.triggerHandler("fetValidateEvent");var c={status:b.attr("validate-status"),message:b.attr("validate-message"),id:a};return c},d._validate=function(a){a.triggerHandler("fetValidateEvent");var b={status:a.attr("validate-status"),message:a.attr("validate-message"),id:a.attr("validate-id")};return b},d.validateList=function(a){for(var b=[],c=0,e=a.length;e>c;c++)b.push(d.validate(a[c]));return b},d.validateForm=function(a){var b=[];return $('[form-id="'+a+'"] [fet-validate]').each(function(){b.push(d._validate($(this)))}),b},d.reset=function(a){var b=$('[validate-id="'+a+'"]');b.triggerHandler("fetValidateResetEvent")},d.resetList=function(a){for(var b=[],c=0,e=a.length;e>c;c++)b.push(d.reset(a[c]))},d.resetForm=function(a){$('[form-id="'+a+'"] [fet-validate]').each(function(){$(this).triggerHandler("fetValidateResetEvent")})},d.register("rocid",a.rocid),d.register("date",a.date),d.register("email",a.email),d.register("number",a.number),d.register("mobile",a.mobile),d.register("telephone",a.telephone),d.register("required",a.required),d.register("max-length",a["max-length"]),d.register("min-length",a["min-length"]),d.register("time",a.time),d.register("timenosec",a.timenosec),d}]),d.factory("$triggerService",function(){return{registerEvent:function(a,b,c,d,e){var f=a+b;f=f.toLowerCase();var g,h;switch(f){case"click":case"hideclick":case"showclick":c.on("click",function(){g=$("["+e+'="'+d+'"]'),h=g.data("fetIsShow"),g.triggerHandler(0==h?"fetShowEvent":"fetHideEvent")});break;case"hidehover":c.on("mouseleave",function(){g=$("#"+d),g.triggerHandler("fetHideEvent")});break;case"showhover":c.on("mouseenter",function(){g=$("#"+d),g.triggerHandler("fetShowEvent")});case"showfocus":c.on("focusin",function(){g=$("#"+d),g.triggerHandler("fetShowEvent")});break;case"hidefocus":c.on("focusout",function(){g=$("#"+d),g.triggerHandler("fetHideEvent")})}},showById:function(a){this.show($("#"+a))},hideById:function(a){this.hide($("#"+a))},showByTrigger:function(a,b){var c="["+a+'-id="'+b+'"]';this.show(c)},show:function(a){a.triggerHandler("fetShowEvent")},hide:function(a){a.triggerHandler("fetHideEvent")},load:function(a){a.triggerHandler("fetLoadEvent")},reload:function(a){a.triggerHandler("fetReloadEvent")},upload:function(a){a.triggerHandler("fetUploadEvent")}}}),d.factory("FetAlertService",function(a){return{show:function(b){var c={id:b};a.$broadcast("onAlertShow",c)},hide:function(b){var c={id:b};a.$broadcast("onAlertHide",c)}}}),d.factory("labelFactory",function(){return{getCssString:function(a,b){var c="";return a=angular.isUndefined(a)||""==a?"label":a.toLowerCase(),b=angular.isUndefined(b)||""==b?"default":b.toLowerCase(),c=a+" "+a+"-"+b}}}),d.directive("fetFancybox",["$fetUI","$timeout","fancyboxService",function(a,c,d){var e="fetFancybox";return{name:e,restrict:"A",priority:99,scope:!1,replace:!1,transclude:!1,link:function(e,f,g){function h(){var b=a.getScope(e,g,"swFancyboxTitle");return b?b:""}function i(){var b=a.getScope(e,g,"swFancyboxContent");return b?b:""}var j=(a.getValue(e,g,"fancyboxId"),a.getScope(e,g,"swFancyboxTitle")),k=a.getScope(e,g,"swFancyboxContent"),l=a.getValue(e,g,"fancyboxType"),m=a.getScope(e,g,"sFancyboxDisplay"),n=a.getValue(e,g,"fancyboxTrigger"),o=a.getExpression(e,g,"onFancyboxShow"),p=a.getExpression(e,g,"onFancyboxShown"),q=a.getExpression(e,g,"onFancyboxHide"),r=a.getExpression(e,g,"onFancyboxHidden"),s=($(f).attr("fet-type","fancybox"),a.getOptionManager()),t=s.getOption("fetFancyboxDisplay",m),u=d.getOption(k,j,l,t);n=n?angular.lowercase(n):"click",o&&angular.isFunction(o)&&(u.beforeShow=function(){c(function(){o()})}),p&&angular.isFunction(p)&&(u.afterShow=function(){c(function(){p()})}),q&&angular.isFunction(q)&&(u.beforeClose=function(){c(function(){q()})}),r&&angular.isFunction(r)&&(u.afterClose=function(){c(function(){r()})});var v=$(f);"click"==n?v.on("click",function(){v.triggerHandler("fetFancyboxShowEvent")}):"focus"==n?v.on("focusin",function(){v.triggerHandler("fetFancyboxShowEvent")}):"hover"==n&&v.on("mouseenter",function(){v.triggerHandler("fetFancyboxShowEvent")}),a.isTrue(t.esc)&&$(b).keyup(function(a){27==a.keyCode&&v.triggerHandler("fetFancyboxHideEvent")});var w="";v.on("fetFancyboxShowEvent",function(){d.open(i(),h(),u),angular.isNumber(t.autoHide)&&(w=c(function(){v.triggerHandler("fetFancyboxHideEvent")},t.autoHide))}).on("fetFancyboxHideEvent",function(){d.close(),angular.isNumber(t.autoHide)&&c.cancel(w)}),a.isTrue(t.autoShow)&&v.triggerHandler("fetFancyboxShowEvent")}}}]),d.factory("fancyboxService",["$fetUI",function(a){var b={},c="fetFancybox",d=function(b,d,e,f){var g=a.getOptionManager(),h=g.getOption(c,{});return h.type=e?e:"inline",h.openSpeed=f.show,h.closeSpeed=f.hide,a.isTrue(f.esc)&&(h.keys={close:[27]}),angular.isNumber(f.high)&&(h.height=f.high),angular.isNumber(f.width)&&(h.width=f.width),h.autoPlay=f.autoPlay,h.playSpeed=f.playSpeed,f.fullScreen&&(h.height=9999,h.width=9999),h};return b.getOption=function(a,b,c,e){return d(a,b,c,e)},b.open=function(a,b,c){var d={};d=c,d.title=b,"html"===angular.lowercase(d.type)?(d.content=a,$.fancybox.open(d)):(d.content=null,"inline"===angular.lowercase(d.type)?$.fancybox.open("#"+a,d):$.fancybox.open(a,d))},b.show=function(a,b,c,e){var f={};f=d(a,b,c,e),f.title=b,"html"===angular.lowercase(f.type)?(f.content=a,$.fancybox.open(f)):(f.content=null,"inline"===angular.lowercase(f.type)?$.fancybox.open("#"+a,f):$.fancybox.open(a,f))},b.close=function(){$.fancybox.close()},b.trigger=function(a,b){$('[fancybox-id="'+a+'"]').triggerHandler("open"===angular.lowercase(b)?"fetFancyboxShowEvent":"fetFancyboxHideEvent")},b}]),d.directive("fetField",["$fetUI",function(){var a="fetField";return{priority:99,name:a,restrict:"EA",scope:!1,compile:function(){return{post:function(a,b){b.on("fetValidateErrorEvent",function(a,c){b.attr("class","has-error"),b.find(".help-block").triggerHandler("fetValidateErrorEvent",[c])}).on("fetValidateWarningEvent",function(a,c){b.attr("class","has-warning"),b.find(".help-block").triggerHandler("fetValidateWarningEvent",[c])}).on("fetValidateSuccessEvent",function(a,c){b.attr("class","has-success"),b.find(".help-block").triggerHandler("fetValidateSuccessEvent",[c])}).on("fetValidateResetEvent",function(){b.removeClass("has-error").removeClass("has-warning").removeClass("has-success"),b.find(".help-block").triggerHandler("fetValidateResetEvent")})}}}}}]),d.directive("fetFileUpload",["$fetUI","$parse",function(a){var b="fetFileUpload";return{priority:101,name:b,scope:{fileuploadId:"@",fileType:"@",fileCount:"@",fileuploadTip:"@",fileuploadAction:"@",sMessageOption:"=",onFileuploadRemove:"&",onFileuploadAppend:"&",onFileuploadSelect:"&",onFileInvalid:"&",onFileTooMany:"&"},restrict:"EA",replace:!0,template:'<form id="{{fileuploadId}}" action="{{fileuploadAction}}" method="post" enctype="multipart/form-data" target="upload-frame" ng-model="isShowHelp" ng-init="isShowHelp=true"><div class="row-fluid"><input type="file" /><input type="submit"  value="Submit" class="btn btn-info"/><span class="help-block" ng-show= "isShowHelp"  >{{fileuploadTip}}</span><br></div><div class="col-md-8"><iframe  ng-show= "isIframe" id="upload-frame" name="upload-frame" src="javascript: void(0)" style="border:#ccc solid 1px; height:70px; width:auto;"></iframe><div id="message"></div></div></form>',link:function(b,c,d){b.fileuploadId,b.fileType;if("file"!=d.type){var e='<div class="alert alert-block alert-danger"><h4>錯誤！</h4><p>fet-fileupload directive不支援此類型標籤，請參考api文件</p></div>';return void c.replaceWith(e)}b.isShowHelp=angular.isString(b.fileuploadTip)&&0!=a.isFalse(b.fileuploadTip)?!0:!1;var f=b.sMessageOption,g=a.getOptionManager().getOption("fileuploadOptions",f);b.fileCount||(b.fileCount="1"),b.isIframe=!1,c.submit(function(){b.isIframe=!0,b.$apply()}),c.find('input[type="file"]').MultiFile({accept:b.fileType,max:b.fileCount,STRING:{remove:g.remove,selected:g.selected},success:function(a){b.success=!0,b.successMsg=a,a&&(b.isIframe=!0,b.$apply())},error:function(a){b.error=!0,b.errorMsg=a,a&&(b.isIframe=!0,b.$apply())},onFileInvalid:function(){c.find("#message").html(g.invalid),b.onFileInvalid&&angular.isFunction(b.onFileInvalid)&&b.onFileInvalid()},onFileTooMany:function(){c.find("#message").html(g.toomany),b.onFileTooMany&&angular.isFunction(b.onFileTooMany)&&b.onFileTooMany()},onFileRemove:function(){b.onFileuploadRemove&&angular.isFunction(b.onFileuploadRemove)&&b.onFileuploadRemove()},onFileAppend:function(){b.onFileuploadAppend&&angular.isFunction(b.onFileuploadAppend)&&b.onFileuploadAppend()},onFileSelect:function(){b.isIframe=!1,b.$apply(),b.onFileuploadSelect&&angular.isFunction(b.onFileuploadSelect)&&b.onFileuploadSelect()}})}}}]),d.factory("fileuploadService",[function(){var a={};return a.upload=function(a){$("#"+a).submit()},a}]),d.directive("fetGritter",["$fetUI","$timeout","gritterService",function(a,b,c){var d="fetGritter";return{name:d,restrict:"A",priority:99,scope:!1,replace:!1,transclude:!1,link:function(d,e,f){function g(a){return a.image=i(),a.title=j(),a.text=k(),c.add(a)}function h(a){c.remove(a)}function i(){var b=a.getScope(d,f,"swGritterImage");return b?b:""}function j(){var b=a.getScope(d,f,"swGritterTitle");return b?b:""}function k(){var b=a.getScope(d,f,"swGritterContent");return b?b:""}var l,m=(a.getValue(d,f,"gritterId"),a.getScope(d,f,"swGritterTitle")),n=a.getScope(d,f,"swGritterContent"),o=a.getScope(d,f,"swGritterImage"),p=a.getValue(d,f,"gritterTheme"),q=a.getScope(d,f,"sGritterDisplay"),r=a.getValue(d,f,"gritterTrigger"),s=a.getExpression(d,f,"onGritterShow"),t=a.getExpression(d,f,"onGritterShown"),u=a.getExpression(d,f,"onGritterHide"),v=a.getExpression(d,f,"onGritterHidden"),w=$(e),x=a.getOptionManager(),y=x.getOption("gritterDisplayDefault",q),z=c.getOption(m,n,o,p,y);switch(z.before_open=function(){s&&d.$apply(function(){s()})},z.after_open=function(){t&&b(function(){t(l)},0)},z.before_close=function(a,c){z._before_close(a,c),u&&b(function(){u()},0)},z.after_close=function(){v&&b(function(){v()},0)},w.on("fetGritterShowEvent",function(){l=g(z)}),w.on("fetGritterHideEvent",function(){h(l)}),r){case"hover":w.on("mouseenter",function(){w.triggerHandler("fetGritterShowEvent")});break;case"focus":w.on("focusin",function(){w.triggerHandler("fetGritterShowEvent")});break;default:w.on("click",function(){w.triggerHandler("fetGritterShowEvent")})}a.isTrue(y.autoShow)&&b(function(){w.triggerHandler("fetGritterShowEvent")},0)}}}]),d.factory("gritterService",["$fetUI",function(a){var b={},c=function(c,d,e,f,g){var h=a.getOptionManager(),i=h.getOption("gritterDefault",{title:d,text:c,image:e}),j=h.getOption("gritterDisplayDefault",g);if(j)switch(angular.isNumber(j.autoHide)?(i.time=j.autoHide,i.sticky=!1,i._autoHide=!0):a.isFalse(j.autoHide)?(i.sticky=!0,i._autoHide=!1):(i.sticky=!1,i.time=6e3,i._autoHide=!0),angular.isNumber(j.duration)&&(i.fade_in_speed=j.duration,i.fade_out_speed=j.duration),angular.lowercase(f)){case"info":case"warning":case"success":case"danger":i.class_name="alert alert-"+f;break;case"white":i.class_name="gritter-light";break;default:i.class_name=""}return i._before_close=function(c,d){a.isTrue(d)&&b._removeUIDArray(c.selector.split("-")[2])},i};return b.gritterOption={},b.uidArray=[],b.add=function(b){var c;return c=$.gritter.add(b),a.isFalse(b._autoHide)&&this.uidArray.push(c),c},b.addImageMessage=function(a,b,d,e,f){var g=this.add(c(a,b,d,e,f));return g},b.addMessage=function(a,b,d,e){return this.add(c(a,b,"",d,e))},b.getOption=function(a,b,d,e,f){return c(a,b,d,e,f)},b.removeAll=function(){$.gritter.removeAll(),this.uidArray=[]},b.remove=function(a){var b=this.uidArray.indexOf(a);this._removeUIDArray(b),$.gritter.remove(a)},b._removeUIDArray=function(a){var b=this.uidArray.indexOf(parseInt(a));b>-1&&this.uidArray.splice(b,1)},b.getGritterKeys=function(){return this.uidArray},b.removeFirst=function(){var a=this.uidArray.shift();angular.isUndefined(a)||$.gritter.remove(a)},b.removeLast=function(){var a=this.uidArray.pop();angular.isUndefined(a)||$.gritter.remove(a)},b}]),d.directive("fetInputMask",["$fetUI",function(a){var b="fetInputMask";return{priority:99,name:b,require:["?ngModel"],restrict:"A",link:function(c,d,e,f){if(f){var g=a.getExpression(c,e,"onBeforeMask"),h=a.getExpression(c,e,"onKeyValidation"),i=null,j=angular.lowercase(a.getValue(c,e,"maskType")),k=angular.lowercase(a.getValue(c,e,"maskFormat")),l=a.getOptionManager(),m=l.getOption(b,{});switch(m={onBeforeMask:function(){g&&angular.isFunction(g)&&g()},onKeyValidation:function(){h&&angular.isFunction(h)&&h()},oncleared:function(){e.ngModel&&c.$evalAsync(function(){f[0].$setViewValue(null)})}},j){case"mobile":i="m",m.autoUnmask=!0;break;case"rocid":i="r";break;case"thousands":i=j,e.maskDigits&&(m.digits=e.maskDigits);break;case"email":i=j;break;case"integer":i=j,k&&null!=k.match("9")&&(i=k);break;case"number":i=k&&null!=k.match("9")?k:"9999999999";break;case"date":i=k&&null!=k.match("yyyy")?k:j;break;case"decimal":i=k&&null!=k.match("9")?k:"9.99";break;case"time":i="t";break;case"timenosec":i="s";break;default:i=k}$(d).inputmask(i,m)}}}}]),d.directive("fetModal",["$fetUI","$timeout",function(a,b){return{name:"fetModal",scope:!1,restrict:"EA",priority:99,link:function(c,d,e){function f(b){b.keyboard=b.esc;var c="",d=angular.lowercase(b.size);switch(d){case"l":c="modal-wide";break;case"s":c="modal-small";break;case"f":c="modal-full"}n.find(".modal-dialog").addClass(c),a.isTrue(b.animation)&&n.addClass("fade in"),b.show=a.isTrue(b.autoShow)?!0:!1,a.isFalse(b.closable)&&n.find(".modal-header >.close").hide(),n.modal(b)}var g=(a.getValue(c,e,"modalId"),a.getScope(c,e,"sModalDisplay")),h=a.getExpression(c,e,"onModalShow"),i=a.getExpression(c,e,"onModalShown"),j=a.getExpression(c,e,"onModalHide"),k=a.getExpression(c,e,"onModalHidden"),l=a.getOptionManager(),m=l.getOption("modalDisplay",g),n=$(d);$(d).children().wrapAll('<div class="modal-dialog"><div class="modal-content"></div></div>'),$(d).addClass("modal").attr("role","dialog").attr("aria-labelledby","myModalLabel1"),f(m),n.on("show.bs.modal",function(){n.data("fetIsShow",!0),h&&b(function(){h()})}),n.on("shown.bs.modal",function(){i&&b(function(){i()})}),n.on("hide.bs.modal",function(){n.data("fetIsShow",!1),j&&b(function(){j()})}),n.on("hidden.bs.modal",function(){k&&b(function(){k()})}),n.on("fetReloadEvent",function(a){n.modal(a)}).on("fetModalShowEvent",function(){n.modal("show")}).on("fetModalHideEvent",function(){n.modal("hide")}).on("fetShowEvent",function(){n.modal("show")}).on("fetHideEvent",function(){n.modal("hide")})}}}]),d.factory("modalService",["$compile","$q","$rootScope",function(a,b,c){var d='<div fet-modal modal-id="$ID" s-modal-display="{animation:false,autoShow:true,backdrop:\'static\',esc:false,closable:false}" on-modal-hidden="modalService.hidden(\'$ID\')">$TITLE_DIV<div fet-modal-body><h3>$MESSAGE</h3></div>$FOOTER_DIV</div>',e="<div fet-modal-title><h3>$TITLE</h3></div>",f="<div fet-modal-footer>$BTNS</div>",g='<button class="btn btn-primary" ng-click="modalService.ok(\'$ID\')"><i class="fa fa-check"> </i> ok</button>',h='<button data-dismiss="modal" class="btn btn-default" aria-hidden="true"><i class="fa fa-ban"> </i> cancel</button>',i={confirm:g+h,alert:g},j={},k={},l=function(){return"auto_"+Math.floor(1e6*Math.random()+1)},m=function(b,g,h){var j=d.replace("$MESSAGE",g||""),k=l();return j=j.replace("$TITLE_DIV",e.replace("$TITLE",h?h:"")),j=j.replace("$FOOTER_DIV",f.replace("$BTNS",i[b])),j=j.replace(/\$ID/g,k),angular.element("body").append(a(j)(c)),k};return c.modalService={ok:function(a){k[a]&&k[a].resolve(),j.close(a)},hidden:function(a){k[a]&&k[a].reject(),delete k[a],angular.element(a).remove()}},j.open=function(a){var b='[modal-id="'+a+'"]';$(b).triggerHandler("fetModalShowEvent")},j.close=function(a){var b='[modal-id="'+a+'"]';$(b).triggerHandler("fetModalHideEvent")},j.alertMessage=function(a,c){var d='<span class="text-info">提示訊息</span>';switch(a=angular.lowercase(a)){case"info":d='<span class="text-info">提示訊息</span>';break;case"warning":d='<span class="text-warning">警告!</span>';break;case"error":d='<span class="text-error">錯誤!</span>'}var e=b.defer(),f=m("alert",c,d);return k[f]=e,e.promise},j}]),d.directive("fetModalBody",["$timeout",function(){return{name:"fetModalBody",require:"?fetModal",scope:!1,restrict:"A",priority:98,link:function(a,b){$(b).addClass("modal-body")}}}]),d.directive("fetModalFooter",["$timeout",function(){return{name:"fetModalFooter",restrict:"A",require:"?fetModal",scope:!1,priority:97,compile:function(){return{post:function(a,b){b.addClass("modal-footer")}}}}}]),d.directive("fetModalTitle",["$timeout",function(a){return{name:"fetModalTitle",require:"?fetModal",scope:!1,restrict:"EA",priority:99,compile:function(){return{post:function(b,c){a(function(){c.addClass("modal-title"),c.wrap('<div class="modal-header"></div>'),c.parent().prepend('<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>')})}}}}}]),d.directive("fetModalTrigger",["$fetUI",function(a){return{name:"fetModalTrigger",restrict:"A",priority:101,link:function(b,c,d){function e(a){c.attr("data-toggle","modal"),c.attr("data-target",'[modal-id="'+a+'"]')}var f=a.getValue(b,d,"targetId");if(f){{a.getOptionManager().getOption("fetModal",{})}e(f)}}}}]),d.directive("fetPagination",["$fetUI","$timeout",function(a,b){var c="fetPagination";return{name:c,priority:98,template:'<div><div class="row" ng-show="$$isShowPagination"><div class="col-md-12"><div class="dataTables_paginate paging_bootstrap"><ul name="pagination" ><li class="{{preClass}}"><a href="" ng-click="goFirst()" >‹‹&nbsp第一頁</a></li><li class="{{preClass}}"><a href="" ng-click="previous()">‹&nbsp上一頁</a></li><li name="pageNumber-{{number}}"  ng-repeat="number in pageNumber track by $index"><a href="" ng-click="goNumber(number,true)" >{{number}}</a></li><li  class="{{nextClass}}"><a href="" ng-click="next()">下一頁&nbsp›</a></li><li class="{{nextClass}}"><a href="" ng-click="goLast()">最後一頁&nbsp››</a></li></ul></div></div><div class="col-md-12"><div class="dataTables_info" ng-show="$$showCountInfo">顯示第{{pageFirstCount}}筆至第{{pageLastCount}}筆，共有{{$$paginationOption.totalCount}}筆</div></div></div><div class="dataTables_info" ng-show="$$showErrorInfo">資料格式錯誤,請檢查資料來源是否正確</div></div>',restrict:"EA",scope:!0,require:"?ngModel",link:function(c,d,e,f){var g=a.getValue(c,e,"ngModel"),h=a.getValue(c,e,"totalCount"),i=a.getValue(c,e,"pageSize"),j=a.getValue(c,e,"pageCount"),k=a.getValue(c,e,"initialPage"),l=a.getValue(c,e,"displaySize"),m=(a.getScope(c,e,"swDisable"),e.triggerId),n=e.pageType||"client",o=a.getExpression(c,e,"onChangePage"),p=a.getExpression(c,e,"onLastPage"),q=null;c.pageNumber=[],c.$$readonly=!1,c.$$showCountInfo=!0,c.$$paginationOption={totalCount:parseInt(h,10)?parseInt(h,10):0,pageSize:parseInt(i,10)?parseInt(i,10):20,pageCount:parseInt(j,10)?parseInt(j,10):10,initialPage:parseInt(k,10)?parseInt(k,10):1,pageType:angular.isString(n)?n:"client"};var r=c.$$paginationOption;if(q="s"==angular.lowercase(l)?"pagination pagination-sm":"l"==angular.lowercase(l)?"pagination pagination-lg":"pagination",d.find("ul[name=pagination]").addClass(q),g&&null!=g){c.goFirst=function(){r.initialPage>r.miniPage&&!v()&&c.goNumber(r.miniPage,!0)},c.previous=function(){r.initialPage>r.miniPage&&!v()&&c.goNumber(r.initialPage-1,!0)},c.next=function(){r.initialPage<r.maxPage&&!v()&&c.goNumber(r.initialPage+1,!0)},c.goLast=function(){r.initialPage<r.maxPage&&!v()&&c.goNumber(r.maxPage,!0)},c.goNumber=function(e,f){if(v())return void b(function(){$(".pagination li a").addClass("readonly")});var g=c.pageNumber;r.initialPage=e,g&&0!=g.length?e==r.maxPage||e==r.miniPage?(t(),e==r.maxPage&&p&&angular.isFunction(p)&&p()):r.pageCount<3?t():g[r.pageCount-1]!=e||v()?g[0]==e&&(g.pop(0),g.unshift(e-1)):(g.push(e+1),g.shift(0)):t(),a.isTrue(f)&&d.triggerHandler("fetChangePageEvent",r),r.initialPage>0&&(c.pageFirstCount=(r.initialPage-1)*r.pageSize+1,c.pageLastCount=r.initialPage*r.pageSize>r.totalCount?r.totalCount:r.initialPage*r.pageSize),c.preClass=r.initialPage==r.miniPage?"prev disabled":null,c.nextClass=r.initialPage==r.maxPage?"next disabled":null};var s=function(a){a.miniPage=1,a.pageSize>a.totalCount?a.pageSize=a.totalCount:a.pageSize<a.miniPage&&(a.pageSize=a.miniPage),a.maxPage=u(),a.pageCount>a.maxPage?a.pageCount=a.maxPage:a.pageCount<a.miniPage&&(a.pageCount=a.miniPage),a.initialPage>a.maxPage?a.initialPage=a.maxPage:a.initialPage<a.miniPage&&(a.initialPage=a.miniPage)},t=function(){c.pageNumber=[];for(var a=0;a<r.pageCount;a++){var b=r.initialPage;r.initialPage===r.miniPage?b=1:r.initialPage+r.pageCount>r.maxPage?b=r.maxPage+1-r.pageCount:r.initialPage===r.maxPage&&(b=r.maxPage-r.pageCount+1),c.pageNumber[a]=b+a}c.pageNumber[0]==r.initialPage&&c.pageNumber[0]>1&&r.pageCount>2&&(c.pageNumber.pop(),c.pageNumber.unshift(r.initialPage-1))},u=function(){var a;return a=r.totalCount%r.pageSize==0?r.totalCount/r.pageSize:Math.floor(r.totalCount/r.pageSize)+1
},v=function(){var b,d;return b=a.getScope(c,e,"swDisable"),d=a.isTrue(b)?!0:!1};c.$watch(function(){return f.$viewValue},function(a){if(!angular.isObject(a))return void(c.$$isShowPagination=!1);if(0==a.length)return c.$$isShowPagination=!1,void(c.$$showErrorInfo=!0);if(c.$$isShowPagination=!0,c.$$showCountInfo=!0,c.$$showErrorInfo=!1,angular.isArray(a)||angular.isArray(a.result)){var e=angular.isArray(a.result)?a.result:a,g=angular.isArray(a.result)?a.totalCount:a.length,h={data:e,param:g};d.triggerHandler("fetDisplayPaginationEvent",h),w().triggerHandler("fetDisplayTableEvent",{param:c.$$paginationOption,data:f.$viewValue}),b(function(){d.find('li[name="pageNumber-'+c.$$paginationOption.initialPage+'"]').addClass("active").siblings().removeClass("active")})}},!0),d.on("fetDisplayPaginationEvent",function(a,b){var e=c.$$paginationOption;e.totalCount="server"==e.pageType?b.param:b.data.length,d.triggerHandler("fetUpdatePagination",e)}),d.on("fetUpdatePagination",function(a,e){s(e),c.goNumber(e.initialPage,!1),b(function(){d.find('li[name="pageNumber-'+e.initialPage+'"]').addClass("active").siblings().removeClass("active")})}),d.on("fetChangePageEvent",function(a,e){b(function(){d.find('li[name="pageNumber-'+c.$$paginationOption.initialPage+'"]').addClass("active").siblings().removeClass("active"),angular.isFunction(o)&&o({params:{initialPage:e.initialPage}}),w().triggerHandler("fetDisplayTableEvent",{param:c.$$paginationOption,data:f.$viewValue})})});var w=function(){return m?$('[table-id="'+m+'"]'):d.parent().find("[fet-table]")},x=c.$watch(function(){var a=v();return a},function(a){b(function(){a?d.find(".pagination li a").addClass("readonly"):d.find(".pagination li a").removeClass("readonly")})});d.on("$destroy",function(){(x||angular.noop)()})}}}}]),d.directive("fetPopover",["$fetUI","$timeout",function(a,b){var c="fetPopover";return{name:c,restrict:"A",priority:99,scope:!1,replace:!1,transclude:!1,link:function(d,e,f){var g=(a.getValue(d,f,"popoverId"),a.getScope(d,f,"swPopoverTitle"),a.getScope(d,f,"swPopoverContent"),a.getScope(d,f,"sPopoverDisplay")),h=a.getValue(d,f,"popoverTrigger"),i=a.getExpression(d,f,"onPopoverShow"),j=a.getExpression(d,f,"onPopoverShown"),k=a.getExpression(d,f,"onPopoverHide"),l=a.getExpression(d,f,"onPopoverHidden"),m=$(e),n=a.getOptionManager(),o=n.getOption("display",g);h=h?angular.lowercase(h):"click";var p=n.getOption(c,{title:function(){var b=a.getScope(d,f,"swPopoverTitle");return b||(b="&nbsp;"),b},content:function(){var b=a.getScope(d,f,"swPopoverContent");return b},placement:o.placement});p.delay={show:o.show,hide:o.hide},p.trigger=h,p.container=!1,m.attr("data-toggle","popover"),m.attr("tabindex",-1),m.popover(p);var q;m.on("show.bs.popover",function(){m.data("fetIsShow",!0),i&&b(function(){i()}),angular.isNumber(o.autoHide)&&(q=b(function(){m.triggerHandler("fetHideEvent")},o.autoHide))}).on("shown.bs.popover",function(){j&&b(function(){j()})}).on("hide.bs.popover",function(){k&&b(function(){k()}),b.cancel(q)}).on("hidden.bs.popover",function(){m.data("fetIsShow",!1),l&&b(function(){l()})}).on("fetPopoverShowEvent",function(){m.popover("show")}).on("fetPopoverHideEvent",function(){m.popover("hide")}).on("fetShowEvent",function(){m.popover("show")}).on("fetHideEvent",function(){m.popover("hide")}),a.isTrue(o.autoShow)&&m.triggerHandler("fetShowEvent")}}}]),d.controller("resultController",["$scope",function(a){this.getParam=function(){return a.$pagination}}]),d.directive("fetResultSet",["$fetUI","httpService","$filter",function(a,b){var c="fetResultSet";return{priority:100,name:c,restrict:"EA",scope:!1,link:function(c,d,e){var f=e.actionUrl,g=angular.lowercase(e.actionMethod)||"get",h=a.getScope(c,e,"sActionParam"),i=a.getScope(c,e,"sActionConfig");i||(i=null);var j=angular.lowercase(a.getScope(c,e,"swActionState"));j=angular.isString(j)?j:"idle";var k=function(){var b=a.getScope(c,e,"swActionState");return b=angular.isString(b)?angular.lowercase(b):"idle"},l=function(a){c.$eval(e.swActionState+'="'+a+'"')},m=null,n=function(a){var c=function(b,c,d){var e={data:b,param:c,status:d};a.element.trigger("fetResultLoadedEvent",e)};if("get"===a.method){var d={params:a.param};b.get(a.url,d).success(function(a){m=a,c(a,d,"success")}).error(function(){m=null,c(m,d,"error")})}else{var d={params:a.param,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};b.post(a.url,d).success(function(a,b){m=a,c(a,d,b)}).error(function(a,b){m=null,c(a,d,b)})}},o=c.$watch(k,function(a){switch(a){case"load":d.triggerHandler("fetResultLoadEvent",t);break;case"idle":d.triggerHandler("fetResultPreLoadEvent",t)}}),p=a.getExpression(c,e,"onResultSuccess"),q=a.getExpression(c,e,"onResultError"),r=a.getValue(c,e,"ngModel"),s=function(){return h||(h=null),h},t={method:g,url:f,param:s(),config:i,element:d};f&&(d.on("fetResultLoadEvent",function(a,b){var c=$.extend(s(),b.param),d=i;b.config&&(d=$.extned(i,b.config)),t.param=c,t.config=d,n(t)}),d.on("fetResultLoadedEvent",function(a,b){"error"==b.status?(q&&q(),l("error")):(p&&p(),l("success"),d.triggerHandler("fetDisplayResultEvent",b),c[r]=b.data)}),d.on("$destroy",function(){(o||angular.noop)()}),d.on("fetDisplayResultEvent",function(){}))}}}]),d.directive("fetSelect",["$fetUI","$timeout",function(a){return{priority:99,name:"fetSelect",scope:!1,restrict:"EA",link:function(b,c,d){var e=(a.getScope(b,d,"ngModel"),a.getScope(b,d,"swPlaceholder"),a.getScope(b,d,"swCount"),a.getExpression(b,d,"onSelectShow")),f=a.getExpression(b,d,"onSelectShown"),g=a.getExpression(b,d,"onSelectHide"),h=a.getExpression(b,d,"onSelectHidden"),i=a.getExpression(b,d,"onSelectHighlight"),j=a.getExpression(b,d,"onSelectChoose"),k=a.getExpression(b,d,"onSelectClearing"),l=a.getExpression(b,d,"onSelectRemoving"),m=a.getExpression(b,d,"onSelectRemoved"),n=a.getExpression(b,d,"onSelectFocus"),o=a.getExpression(b,d,"onSelectBlur"),p=a.getExpression(b,d,"onSelectChange"),q=c.attr("fet-type","select");if(!c.is("select")){var r="<div class='alert alert-danger'><h4>錯誤！</h4><p>fetSelect不支援此類型標籤，請參考api文件</p></div>";return void c.replaceWith(r)}var s=a.getValue(b,d,"id"),t=!0;if(!s){var r="<div class='alert alert-danger'><h4>錯誤！</h4><p>fetSelect需有ID，請參考api文件</p></div>";return void c.replaceWith(r)}a.isFalse(a.getValue(b,d,"selectClear"))&&(t=!1);var u="<option></option>";q.prepend(u);var v=function(){var c;if(c=a.getScope(b,d,"ngModel"),angular.isObject(c)){if(c.length>x())return;return c}},w=function(){var c,e;return c=a.getScope(b,d,"swPlaceholder"),e=angular.isString(c)?c:!1},x=function(){var c,e;return c=a.getScope(b,d,"swCount"),e=c?c:1},y=b.$watch(function(){var a=v();return a},function(a,b){if(b==a){var c=a,d=w(),e=x();C(e,d,c)}}),z=b.$watch(function(){var a=w();return a},function(a,b){if(a!=b){var c=v(),d=a,e=x();C(e,d,c)}}),A=b.$watch(function(){var a=x();return a},function(a,b){if(a!=b){var c=v(),d=w(),e=a;C(e,d,c)}});c.on("$destroy",function(){(z||angular.noop)(),(A||angular.noop)(),(y||angular.noop)()});var B=a.getScope(b,d,"options");if(B){var u='<input type="text" id="'+s+'" class="populate placeholder">';c.replaceWith(u)}var C=function(c,e,f){B?$("#"+s).select2({allowClear:t,placeholder:e,multiple:a.getValue(b,d,"multiple"),maximumSelectionSize:c,width:"100%",query:function(a){var b={results:[]};$.each(B,function(){(0==a.term.length||this.text.toUpperCase().indexOf(a.term.toUpperCase())>=0)&&b.results.push({id:this.id,text:this.text})}),a.callback(b)}}).select2("data",f):$("#"+s).select2({allowClear:t,placeholder:e,maximumSelectionSize:c,width:"100%"}).select2("data",f)};C(x(),w()),q.addClass("row populate placeholder"),q.on("select2-opening",function(){e&&e()}),q.on("select2-open",function(){f&&f()}),q.on("select2-close",function(){g&&g(),h&&h()}),q.on("select2-highlight",function(){i&&i()}),q.on("select2-selecting",function(){j&&j()}),q.on("select2-clearing",function(){k&&k()}),q.on("select2-removing",function(){l&&l()}),q.on("select2-removed",function(){m&&m()}),q.on("select2-focus",function(){n&&n()}),q.on("select2-blur",function(){o&&o()}),q.on("change",function(a){p&&(p(),a.added)})}}}]),d.directive("fetSlider",["$timeout","$fetUI",function(a,b){({$setViewValue:angular.noop});return{restrict:"A",require:["fetSlider","?ngModel"],controller:angular.noop,link:function(c,d,e,f){var g,h=f[1],i=function(a){return b.getScope(c,e,a)},j=function(a){return b.getValue(c,e,a)},k=[],l={min:i("swSliderMin"),max:i("swSliderMax"),range:j("sliderRange")||!1,step:parseInt(j("sliderStep"),10)||1,disabled:i("swSliderDisabled")},m=i("sSliderDisplay"),n=["swSliderMin","swSliderMax","swSliderDisabled"],o=[function(a){d.slider("option","min",parseInt(a,10))},function(a){d.slider("option","max",parseInt(a,10))},function(a){d.slider("option","disabled",b.isTrue(a))}],p=function(a){return!(isNaN(a)||null===a)},q=function(a){p(a)&&d.slider("value",parseInt(a,10))};return angular.isNumber(l.min)&&angular.isNumber(l.max)?(l.range=b.isTrue(l.range)?!0:l.range,m&&(l.orientation=angular.lowercase(m.orientation),"vertical"===l.orientation&&d.css("height",m.height||"100px")),l.range===!0&&(q=function(a){if(angular.isArray(a))for(var b=0;2>b;b++)p(a[b])&&d.slider("values",b,parseInt(a[b],10))}),void a(function(){d.slider(l),h&&(d.on("slide",function(a,b){c.$evalAsync(function(){h.$setViewValue(l.range===!0?[b.values[0],b.values[1]]:b.value)})}),g=c.$watch(function(){return h.$viewValue},q,!0),angular.forEach(n,function(a,b){k.push(c.$watch(function(){return i(a)},o[b]))}),d.on("$destroy",function(){angular.isFunction(g)&&g(),angular.forEach(k,function(a){angular.isFunction(a)&&a()})}))})):void b.debug("swSliderMin, swSliderMax are required and must be {Number} !","fetSlider")}}}]),d.directive("fetTab",["$fetUI","$compile","$timeout",function(a){var b="fetTab";return{name:b,scope:!0,restrict:"A",compile:function(){return{post:function(b,c,d){var e=(a.getValue(b,d,"tabId"),a.getScope(b,d,"sTabDisplay")),f=angular.lowercase(a.getValue(b,d,"tabType")),g=a.getValue(b,d,"index"),h=a.getOptionManager().getOption("tabDisplayOption",e),i=angular.lowercase(h.direction),j=h.fixed,k=h.isBorder,l=null;g=g<c.find("[fet-tab-item]").length?g:1;var m=c.find(".tab-content").children();m.addClass("tab-pane fade"),m.length>=g&&c.find("[fet-tab-item]:eq("+(g-1)+") a").tab("show"),"bottom"==i&&(i="below"),"portlet"==f?l="portlet-tabs":"pill"==f?l="nav nav-tabs":i&&(l="tabbable tabs-"+i),c.addClass(l);if("below"==i){var n=c.find(".tab-content").detach();c.prepend(n)}"pill"!=f&&"portlet"!=f&&k&&c.find(".tab-content").addClass("border"),j&&c.find(".tab-content").height(j+"px").css("overflowY","auto")}}}}}]),d.factory("tabService",[function(){var a={};return a.open=function(a,b){var c="[tab-id="+a+"] [fet-tab-item]:eq("+(b-1)+") a";b=angular.isNumber(b)&&b<$("[tab-id="+a+"] [fet-tab-item]").length?b:1,0!==$(c).length&&$(c).tab("show")},a}]),d.directive("fetTabItem",["$fetUI","httpService","$compile","$interpolate",function(a,b,c){var d="fetTabItem";return{priority:99,name:d,scope:!1,restrict:"A",compile:function(){return{post:function(d,e,f){var g=d.$eval(e.parents("[fet-tab]").attr("s-tab-display")),h=a.getOptionManager().getOption("tabDisplayOption",g),i=h.direction,j=a.isTrue(f.tabDisabled),k=a.getValue(d,f,"itemType"),l=a.getValue(d,f,"itemAction"),m=a.isTrue(f.itemPreload),n=a.getValue(d,f,"itemAlign"),o=a.getExpression(d,f,"onTabShow"),p=a.getExpression(d,f,"onTabShown"),q=a.getExpression(d,f,"onTabHide"),r=a.getExpression(d,f,"onTabHidden"),s=null,t=e.find("a").attr("href"),u=t.substring(1),v=e.find("a"),w=e.closest("[fet-tab-list]").siblings(".tab-content");n=angular.isString(n)?n:"",l=angular.isString(l)?l:!1,j&&(s="btn disabled"),j||v.attr({role:"tab","data-toggle":"tab"}),v.addClass(s),n&&(n="pull-"+n),"left"!=i&&"right"!=i&&(e.parent().is(".dropdown-menu")&&n?e.parents(".dropdown").addClass(n):e.addClass(n)),k=angular.isString(k)?angular.lowercase(k):"inline";var x='<div class="tab-pane fade" id="'+u+'"></div>';if(0===$(t).length&&w.append(x),"html"==k){var y=function(){l?b.get(l,{}).success(function(a){var b=c(a)(d);$(t).html(b)}).error(function(){}):$(t).html("未指定Action,請再次確認")};a.isFalse(m)?e.one("show.bs.tab",function(){y()}):y()}else if("apppart"==k){var z="<div app-part src=\"'"+l+"'\"></div>",A=function(){if(l){var a=c(z)(d);$(t).html(a)}else $(t).html("未指定Action,請再次確認")};a.isFalse(m)?e.one("show.bs.tab",function(){A()}):A()}v.on("show.bs.tab",function(){o&&o()}),v.on("shown.bs.tab",function(){p&&p()}),v.on("hide.bs.tab",function(){q&&q()}),v.on("hidden.bs.tab",function(){r&&r()})}}}}}]),d.directive("fetTabList",[function(){var a="fetTabList";return{name:a,scope:!1,restrict:"A",compile:function(a){var b=a.parent("[fet-tab]").attr("tab-type"),c="nav nav-tabs";return"pill"==b&&(c="nav nav-pills"),a.addClass(c),{post:function(){}}}}}]),d.filter("slice",function(){return function(a,b,c){return(a||[]).slice(b,c)}}),d.directive("fetTable",["$fetUI","$timeout","$filter",function(a,b,c){return{name:"fetTable",priority:99,template:'<div class="{{$$portlet}}"  ><div class="row"><div ng-show="$$isShowFilter" class="col-md-6"><div class="dataTables_length"><label><select ng-model="criteriaCol" ng-change="filter()" size="1" name="data_table_1_length" aria-controls="data_table_1" class="form-control input-small"  ng-options="col.value as col.text for col in $$filterCols"  required><option value="">請選擇欄位</option> </select> 內文篩選： <input type="text" aria-controls="data_table_1" class="form-control input-small" ng-model="criteriaText" value="{{criteriaText}}" /></label></div></div></div><table class="{{$$className}}" ></table> ',replace:!0,require:"?ngModel",transclude:!0,scope:!0,restrict:"EA",link:function(d,e,f,g,h){g||(g={$setViewValue:angular.noop});var i=a.getValue(d,f,"tableType");i=angular.lowercase(i)||"table";var j=function(){var b=a.getValue(d,f,"tableSorting");return a.isTrue(b)?!0:!1},k=function(){var b=a.getValue(d,f,"tableFilter");return a.isTrue(b)?!0:!1},l=(a.getExpression(d,f,"onTableBeforeLoad"),a.getExpression(d,f,"onTableAfterLoad"),'<span class="t-current"></span>'),m=null,n=null;switch(d.$$filterCols=[],i){case"device":m="table table-advance table-hover table-bordered table-striped table-condensed flip-content",n="dataTables_wrapper form-inline";break;case"advance":m="table table-striped table-bordered table-hover",n="dataTables_wrapper form-inline";break;case"light-table":m="table table-advance table-hover",n="dataTables_wrapper form-inline";break;default:m="table table-advance table-hover",n="dataTables_wrapper form-inline"}d.$$className=m,d.$$portlet=n,d.$$isShowFilter=k(),d.$fetResult=[],d.$$originalResult=null;var o=function(a){if(!a)return[];var b=angular.isArray(a)?a:a.result;return angular.isArray(b)?b:[],b},p=0;p=e.find("th").length;var q=function(a){0==e.find("tfoot").length&&e.append("<tfoot/>"),e.find("tfoot").html(0==a?"<tr><td colspan="+p+" style='border-top: 0px'><font color=red>Empty data in the table.</font></tr>":"")},r=d.$watch(function(){return a.getScope(d,f,"ngModel")},function(a){a=o(a),0==a.length?d.$$isShowFilter=!1:k()&&(d.$$isShowFilter=!0),d.$fetResult=a,d.$$originalResult=d.$fetResult.slice(0),h(d,function(a){e.find("table").html(""),e.find("table").append(a)}),u(),q(a.length)},!0);if(d.$$dataFilter=function(){var a={};a[d.criteriaCol]=d.criteriaText;{var b;d.$$originalResult.slice(0)}a.undefined||(b=d.criteriaText&&""!=d.criteriaText?c("filter")(d.$$originalResult,a):d.$$originalResult.slice(0),d.$fetResult=b,q(b.length))},k()){var s=d.$watch("criteriaText",function(a,b){a!=b&&d.$$dataFilter()});e.find('select[name="data_table_1_length"]').on("change",function(){d.$evalAsync(function(){d.$$dataFilter()})})}var t=function(a){var b=1==a.param.currentPage?0:(a.param.currentPage-1)*a.param.pageSize,d=b+a.param.pageSize,e=angular.isArray(a.data)?a.data:a.data.result,f=c("slice")(e,b,d);return f};e.on("fetDisplayTableEvent",function(a,b){if("client"==b.param.pageType)d.$fetResult=t(b);else{if(b.param.pageSize<b.data.length&&0===e.next('div[name="result-msg"]').length){var c='<div name="result-msg" ><div class="alert alert-warning"><h4>警告！</h4><p>回傳的資料筆數和分頁設定有錯誤</p></div></div>';$(c).insertAfter(e)}b.param.currentPage=1,d.$fetResult=t(b),g.$setViewValue(t(b))}d.$$originalResult=d.$fetResult.slice(0)}),b(function(){"light-table"==i&&e.find("th").addClass("text-center light"),e.find("th[data-title]").each(function(){var a={value:$(this).attr("data-title"),text:$(this).html()};d.$$filterCols.push(a)})});var u=function(){b(function(){"light-table"==i&&e.find("th").addClass("text-center light");j()&&e.find("th[data-title]").addClass("sorting").off("click").on("click",function(){var a=$(this),b="",e=a.attr("data-title");if(a.hasClass("sorting_asc")?(b="desc",a.removeClass("sorting_asc").addClass("sorting_desc").siblings().removeClass("sorting_asc").removeClass("sorting_desc")):(b="asc",a.removeClass("sorting_desc").addClass("sorting_asc").siblings().removeClass("sorting_asc").removeClass("sorting_desc")),e){e="asc"==b?"+"+e:"-"+e;var f=c("orderBy")(d.$fetResult,e);d.$evalAsync(function(){d.$fetResult=f})}}),e.on("click","tr",function(){var a=$(this);a.find("td span").hasClass("t-current")||(e.find("tr").removeAttr("style"),(i="device")&&(e.find(".t-current").remove(),a.find("td").eq(0).prepend(l)))}),e.on("$destroy",function(){(s||angular.noop)(),(r||angular.noop)()})})}}}}]),d.directive("fetTimepicker",["$fetUI","$compile","$timeout","validateService",function(a,c,d,e){var f="fetTimepicker";return{priority:102,name:f,require:"?ngModel",scope:!0,restrict:"EA",template:'<div class="row" ng-switch on="secSelect" ><div class="{{isRadius}} col-md-12" ng-switch-when=true><input class="form-control" name="timepicker" data-toggle="popover" fet-input-mask mask-type="time"><span ng-if="timeBtn == true" class="input-group-btn" ><button class="btn btn-default" type="button" name="timepickerButton" ><i class="fa fa-clock-o"></i></button></span></div><div class="{{isRadius}} col-md-12" ng-switch-when=false><input class="form-control" name="timepicker" data-toggle="popover" fet-input-mask mask-type="timenosec"><span ng-if="timeBtn == true" class="input-group-btn" ><button class="btn btn-default" type="button" name="timepickerButton" ><i class="fa fa-clock-o"></i></button></span></div></div>',compile:function(c,g){return{post:function(c,h,i,j){if(j){var k=a.getScope(c,i,"sTimepickerDisplay"),l=a.getScope(c,i,"swTimepickerDisable"),m=a.isTrue(l)?!0:!1,n=a.getExpression(c,i,"onTimeShow"),o=a.getExpression(c,i,"onTimeHide"),p=a.getExpression(c,i,"onTimeSelect"),q=angular.lowercase(a.getValue(c,i,"timeType"));q=q?q:"inline";{var r,s=a.getOptionManager(),t=s.getOption(f,{}),u=s.getOption("fetTimepickerDisplay",k);a.getScope(c,i,"ngModel")}r=c.$id+"_";var v=a.isTrue(u.secSelect)?!0:!1;c.secSelect=v;var w=function(){var a=g.ngModel?c.$eval("$parent."+i.ngModel):null;return angular.isDate(c.timeValue)?c.timeValue:angular.isDate(a)?a:null},x=function(){g.ngModel&&c.$eval("$parent."+i.ngModel+"=timeValue")},y=function(a){var b="",c="";m&&(c="disabled"),b="<select name='"+r+"hours' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+c+">",b+="<option value=''></option>";for(var d=0;24>d;d++)b+=d==a?"<option value='"+d+"' selected>"+d+"</option>":"<option value='"+d+"'>"+d+"</option>";return b+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>時</label>"},z=function(a){var b="",c="";m&&(c="disabled"),b="<select name='"+r+"minutes' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+c+">",b+="<option value=''></option>";for(var d=0;60>d;d++)b+=a==d?"<option value='"+d+"' selected>"+d+"</option>":"<option value='"+d+"'>"+d+"</option>";return b+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>分</label>"},A=function(a){var b="",c="";if(m&&(c="disabled"),v){b="<select name='"+r+"seconds' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+c+">",b+="<option value=''></option>";for(var d=0;60>d;d++)b+=a==d?"<option value='"+d+"' selected>"+d+"</option>":"<option value='"+d+"'>"+d+"</option>";b+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>秒</label>"}return b},B=function(a){var b="",c="";m&&(c="disabled");var d="",e=a?a.getHours():-1,f=a?a.getMinutes():-1,g=a?a.getSeconds():-1;return u.clearBtn&&(d="<div class='col-md-12 timepicker-footer'><button type='button' name='"+r+"clean' class='btn btn-info btn-sm'"+c+">清除</button><div>"),b="<button type='button' name='"+r+"destroy' class='close' aria-hidden='true'></button><br><div>"+y(e)+z(f)+A(g)+"</div>"+d};d(function(){w()&&H(w().getHours(),w().getMinutes(),w().getSeconds());var a=0,b=0,e=0;$("body").on("change",'[name="'+r+'hours"],[name="'+r+'minutes"],[name="'+r+'seconds"]',function(){var c=w();a="00"|$("body").find('[name="'+r+'hours"]').val(),b="00"|$("body").find('[name="'+r+'minutes"]').val(),e=v?"00"|$("body").find('[name="'+r+'seconds"]').val():angular.isDate(c)?c.getSeconds():0,H(a,b,e),p&&p()}),d(function(){var a="input-btn";u.timeBtn&&(a="input-group",h.find('[name="timepickerButton"]').on("click",function(){h.find('[name="timepicker"]').popover("show")})),c.isRadius=a,m&&("popover"==q?h.find('[name="timepicker"],[name="timepickerButton"]').attr("disabled",!0):h.find("select,button").attr("disabled",!0))})}),"inline"==q&&(u.timeBtn=!1),c.timeBtn=u.timeBtn;var C="";if(u.clearBtn&&(C="<button type='button' name='"+r+"clean' class='btn btn-info btn-sm'>清除</button>"),c.timepickerID="timepicker-popver-"+r,"popover"==q){d(function(){t.content=function(){return B(w())},t.template=v?'<div class="popover" style="max-width:270px" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+r+'" class="popover-content row"></div></div>':'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+r+'" class="popover-content row"></div></div>',t.placement=u.direction,h.find("input").popover(t),$("body").on("click",'[name="'+r+'destroy"]',function(){h.find("input").popover("hide")})});var D;$(b).on("mousedown touchstart",function(a){h.is(a.target)||h.find(a.target).length||$("[role=tooltip]").find(a.target).length||$("[role=tooltip] select").find(a.target).length||$("[role=tooltip] option").find(a.target).length||(d(function(){h.find("input").popover("hide")}),a.stopPropagation())}),d(function(){h.find('input[name="timepicker"]').on("show.bs.popover",function(){angular.isNumber(u.autoHide)&&(D=d(function(){h.find("input").triggerHandler("fetHideEvent")},u.autoHide))}).on("shown.bs.popover",function(){n&&d(function(){n()})}).on("hide.bs.popover",function(){d.cancel(D)}).on("hidden.bs.popover",function(){o&&d(function(){o()})}),h.find('input[name="timepicker"]').on("change",function(){var a,b=$(this).val();a=v?"time":"timenosec","success"===e.getValidator(a).validate(b)?(G($(this).val()),c.popoverContentHtml=$('[name="'+c.timepickerID+'"]').html()):I()}).on("fetTimePickerShowEvent",function(){$(this).popover("show")}).on("fetTimePickerHideEvent",function(){$(this).popover("hide")}),m||a.isTrue(u.autoShow)&&h.find("input").triggerHandler("fetTimePickerShowEvent")})}else if("inline"==q){var E=w(),F=!1;angular.isDate(E)&&(F=!0),d(function(){h.find("input").replaceWith(y(F?w().getHours():-1)+z(F?w().getMinutes():-1)+A(F?w().getSeconds():-1)+C)})}$("body").on("click",'[name="'+r+'clean"]',function(){I()});var G=function(a){var b=a.split(":"),c=b[0]||"00",d=b[1]||"00",e=b[2]||"00";H(c,d,e)},H=function(a,b,e){var f=w()||new Date;f.setHours(a,b,e,0),c.timeValue=f,$('[name="'+r+'hours"]').val(a),$('[name="'+r+'minutes"]').val(b),$('[name="'+r+'seconds"]').val(e),d(function(){h.find('input[name="timepicker"]').val(v?f.format("hh:mm:ss"):f.format("hh:mm")),x()})},I=function(){c.timeValue=null,$('[name="'+r+'hours"]').val(""),$('[name="'+r+'minutes"]').val(""),$('[name="'+r+'seconds"]').val(""),d(function(){h.find('input[name="timepicker"]').val(null)}),c.$apply(function(){x()})},J=c.$watch(function(){var a=c.$eval("$parent."+i.ngModel);return angular.isDate(a)?a.getTime():null},function(a,b){if(a!==b)if(a){var e=new Date(a);c.timeValue=e,H(e.getHours(),e.getMinutes(),e.getSeconds())}else c.timeValue=null,$('[name="'+r+'hours"]').val(""),$('[name="'+r+'minutes"]').val(""),$('[name="'+r+'seconds"]').val(""),d(function(){h.find('input[name="timepicker"]').val(null)}),c.$evalAsync(function(){x()})}),K=function(){var b,d;return b=a.getScope(c,i,"swTimepickerDisable"),d=a.isTrue(b)?!0:!1,m=d,d},L=c.$watch(function(){var a=K();return a},function(b){b=a.isTrue(b)?!0:!1,d(function(){"popover"==q?b?h.find('[name="timepicker"],[name="timepickerButton"]').attr("disabled",!0):h.find('[name="timepicker"],[name="timepickerButton"]').attr("disabled",!1):b?h.find("select,button").attr("disabled",!0):h.find("select,button").attr("disabled",!1)})});h.on("$destroy",function(){(J||angular.noop)(),(L||angular.noop)()})}}}}}}]),d.directive("fetTimepickerRange",["$fetUI","$timeout","$compile","validateService",function(a,d,e,f){var g="fetTimepickerRange";return{priority:102,require:"?ngModel",name:g,scope:!0,restrict:"EA",template:'<div class="row" ng-switch on="secSelect" ><div class="input-group col-md-12" ng-switch-when=true><input type="text" class="form-control" name="from" fet-input-mask mask-type="time"><span ng-if="timeBtn == true" class="input-group-btn"><button type="button" class="btn btn-default" type="button" name="timepickerButtonFrom" style="border-top-left-radius: 0; border-bottom-left-radius: 0;"><i class="fa fa-clock-o"></i></button></span><span class="input-group-addon"> 至 </span><input type="text" class="form-control" name="to" fet-input-mask mask-type="time"><span ng-if="timeBtn == true" class="input-group-btn"><button type="button" class="btn btn-default" type="button" name="timepickerButtonTo"><i class="fa fa-clock-o"></i></button></span></div><div class="input-group col-md-12" ng-switch-when=false><input type="text" class="form-control" name="from" fet-input-mask mask-type="timenosec"><span ng-if="timeBtn == true" class="input-group-btn"><button type="button" class="btn btn-default" type="button" name="timepickerButtonFrom" style="border-top-left-radius: 0; border-bottom-left-radius: 0;"><i class="fa fa-clock-o"></i></button></span><span class="input-group-addon"> 至 </span><input type="text" class="form-control" name="to" fet-input-mask mask-type="timenosec"><span ng-if="timeBtn == true" class="input-group-btn"><button type="button" class="btn btn-default" type="button" name="timepickerButtonTo"><i class="fa fa-clock-o"></i></button></span></div></div>',link:function(e,g,h,i){function j(a,b){var c="",d="";n&&(d="disabled"),c="<select name='"+b+"hours' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+d+">",c+="<option value=''></option>";for(var e=0;24>e;e++)c+=e==a?"<option value='"+e+"' selected>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>";return c+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>時</label>"}function k(a,b){var c="",d="";n&&(d="disabled"),c="<select name='"+b+"minutes' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+d+">",c+="<option value=''></option>";for(var e=0;60>e;e++)c+=a==e?"<option value='"+e+"' selected>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>";return c+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>分</label>"}function l(a,b){var c="",d="";if(n&&(d="disabled"),A){c="<select name='"+b+"seconds' style='width: 60px;border-top-left-radius: 0;border-bottom-left-radius: 0;border: 1px solid #e5e5e5;display: table-cell;position: relative;z-index: 2;float: left;margin-bottom: 0;height: 26px;padding: 3px 2px'"+d+">",c+="<option value=''></option>";for(var e=0;60>e;e++)c+=a==e?"<option value='"+e+"' selected>"+e+"</option>":"<option value='"+e+"'>"+e+"</option>";c+="</select><label class='col-md-1 control-label' style='width: 20px;margin-top: 5px;float: left;'>秒</label>"}return c}if(i){var m=a.getScope(e,h,"swTimepickerDisable"),n=a.isTrue(m)?!0:!1,o=a.getScope(e,h,"sTimepickerDisplay"),p=(a.getScope(e,h,"ngModel"),angular.lowercase(a.getValue(e,h,"timeType"))),q=a.getOptionManager(),r=q.getOption("fetTimepicker",{}),s=q.getOption("fetTimepickerDisplay",o),t=angular.lowercase(s.timeBtn),u=angular.lowercase(s.clearBtn);t=a.isTrue(t)?!0:!1,u=a.isTrue(u)?!0:!1;var v=a.getExpression(e,h,"onTimeShow"),w=a.getExpression(e,h,"onTimeHide"),x=a.getExpression(e,h,"onTimeSelect");p=angular.isString(p)?p:"inline","inline"==p&&(t=!1),e.timeBtn=t;var y,z;y=e.$id+"_start_",z=e.$id+"_end_";var A=a.isTrue(s.secSelect)?!0:!1;e.secSelect=A;var B=function(a){e.times=a,e.$evalAsync(function(){e.$eval("$parent."+h.ngModel+"= times")})},C=e.$watch(function(){var a=[];a=h.ngModel?e.$eval("$parent."+h.ngModel):null;var b,c=I(a);return b="1"==c||"2"==c||"3"==c?!0:!1,b?"1"==c?a:"2"==c?[a[0],null]:"3"==c?[null,a[1]]:void 0:[null,null]},function(a,b){if(!angular.equals(a,b)){var c,d=null;2==a.length&&(c=null!=a[0]?new Date(a[0]):null,d=null!=a[1]?new Date(a[1]):null,e.$evalAsync(function(){K(c,d,y,"start"),K(c,d,z,"end")}))}},!0),D=function(a){var b=F();"start"==a?(b[0]=null,K(null,null,y,"start")):(b[1]=null,K(null,null,z,"end"))},E=function(a){function b(){return k[0]=angular.isDate(g)?d(k[0],g):null,k}function d(a,b){return null===a||a===c?b:(a.setHours(b.getHours(),b.getMinutes(),b.getSeconds(),0),a)}function e(){return k[1]=angular.isDate(h)?d(k[1],h):null,k}function f(){B(k)}var g,h,i=null,j=null,k=F();if("start"===a){var l,m,n,o,p,q;l="00"|$("body").find('[name="'+y+'hours"]').val(),m="00"|$("body").find('[name="'+y+'minutes"]').val(),n=A?"00"|$("body").find('[name="'+y+'seconds"]').val():angular.isDate(k[0])?k[0].getSeconds():0,i=new Date,i.setHours(l,m,n,0),g=null==i?null:i,b(),f()}else{var l,m,n,o,p,q;o="00"|$("body").find('[name="'+z+'hours"]').val(),p="00"|$("body").find('[name="'+z+'minutes"]').val(),q=A?"00"|$("body").find('[name="'+z+'seconds"]').val():angular.isDate(k[1])?k[1].getSeconds():0,j=new Date,j.setHours(o,p,q,0),h=null==j?null:j,e(),f()}},F=function(){var a=[];a=h.ngModel?e.$eval("$parent."+h.ngModel):null;var b,c=I(a);return b="1"==c||"2"==c||"3"==c?!0:!1,H(e.times)?e.times:b?"1"==c?a:"2"==c?[a[0],null]:"3"==c?[null,a[1]]:void 0:[null,null]},G=function(a){return angular.isArray(a)&&2==a.length?!0:!1},H=function(a){return G(a)&&angular.isDate(a[0])&&angular.isDate(a[1])?!0:!1},I=function(a){return G(a)?angular.isDate(a[0])&&angular.isDate(a[1])?"1":angular.isDate(a[0])&&!angular.isDate(a[1])?"2":!angular.isDate(a[0])&&angular.isDate(a[1])?"3":"4":"5"},J=function(a,b){var c="",d="",e="";n&&(e="disabled");var f=a?a.getHours():-1,g=a?a.getMinutes():-1,h=a?a.getSeconds():-1;return u&&(d="<div class='col-md-12 timepicker-footer'><button type='button' name='"+b+"clean' class='btn btn-info btn-sm'"+e+">清除</button><div>"),c="<button type='button' name='"+b+"destroy' class='close' aria-hidden='true'></button><br><div>"+j(f,b)+k(g,b)+l(h,b)+"</div>"+d},K=function(a,b,c,f){function h(a){B(a)}var i=F();e.$evalAsync(function(){if("start"==f)if(null==a)d(function(){g.find('[name="from"]').val(null)
}),$('[name="'+c+'hours"]').val(""),$('[name="'+c+'minutes"]').val(""),$('[name="'+c+'seconds"]').val(""),i[0]=null,e.times=i;else{var j=0,k=0,l=0;l=a.getSeconds(),j=a.getHours(),k=a.getMinutes(),$('[name="'+c+'hours"]').val(j),$('[name="'+c+'minutes"]').val(k),$('[name="'+c+'seconds"]').val(l),d(function(){g.find('[name="from"]').val(A?a.format("hh:mm:ss"):a.format("hh:mm"))}),i[0]=a,e.times=i}else if("end"==f)if(null==b)d(function(){g.find('[name="to"]').val(null)}),$('[name="'+c+'hours"]').val(""),$('[name="'+c+'minutes"]').val(""),$('[name="'+c+'seconds"]').val(""),i[1]=null,e.times=i;else{var j=0,k=0,l=0;l=b.getSeconds(),j=b.getHours(),k=b.getMinutes(),$('[name="'+c+'hours"]').val(j),$('[name="'+c+'minutes"]').val(k),$('[name="'+c+'seconds"]').val(l),d(function(){g.find('input[name="to"]').val(A?b.format("hh:mm:ss"):b.format("hh:mm"))}),i[1]=b,e.times=i}h(i)})},L=function(a,b,c,d){var e,f=F();"start"==d?e=f[0]:"end"==d&&(e=f[1]),null===e&&(e=new Date),e&&(e.setHours(a,b,c,0),"start"==d?f[0]=e:"end"==d&&(f[1]=e),B(f))};d(function(){$("body").on("change",'[name="'+y+'hours"],[name="'+y+'minutes"],[name="'+y+'seconds"]',function(){E("start"),x&&x()}),$("body").on("change",'[name="'+z+'hours"],[name="'+z+'minutes"],[name="'+z+'seconds"]',function(){E("end"),x&&x()}),$("body").on("click",'[name="'+y+'clean"]',function(){D("start")}),$("body").on("click",'[name="'+z+'clean"]',function(){D("end")}),t&&(g.find('[name="timepickerButtonFrom"]').on("click",function(){g.find('[name="from"]').popover("show")}),g.find('[name="timepickerButtonTo"]').on("click",function(){g.find('[name="to"]').popover("show")})),n&&("popover"==p?g.find('[name="from"],[name="timepickerButtonFrom"],[name="to"],[name="timepickerButtonTo"]').attr("disabled",!0):g.find("select,button").attr("disabled",!1))});var M="",N="";if(u&&(M="<button type='button' name='"+y+"clean' value='清除' class='btn btn-info btn-sm'>清除</button>",N="<button type='button' name='"+z+"clean' value='清除' class='btn btn-info btn-sm'>清除</button>"),e.startTimepickerID="timepicker-popver-"+y,e.endTimepickerID="timepicker-popver-"+z,"popover"==p)d(function(){var b,c=F();if(y){r.content=function(){return c=F(),J(c[0],y)},r.template=A?'<div class="popover" style="max-width:270px" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+y+'" class="popover-content row"></div></div>':'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+y+'" class="popover-content row"></div></div>',r.placement=s.direction,g.find('[name="from"]').popover(r),b=null!=c[0]?c[0].format(A?"hh:mm:ss":"hh:mm"):c[0],g.find('[name="from"]').val(b),$("body").on("click",'[name="'+y+'destroy"]',function(){g.find('[name="from"]').popover("hide")}),$("body").on("click",'[name="'+y+'clear"]',function(){g.find('[name="from"]').val("")});var h;g.find('[name="from"]').on("show.bs.popover",function(){angular.isNumber(s.autoHide)&&(h=d(function(){g.find('[name="from"]').triggerHandler("fetHideEventFrom")},s.autoHide))}).on("shown.bs.popover",function(){v&&d(function(){v()})}).on("hide.bs.popover",function(){d.cancel(h)}).on("hidden.bs.popover",function(){w&&d(function(){w()})}),g.find('[name="from"]').on("change",function(){var a,b=$(this).val();a=A?"time":"timenosec","success"===f.getValidator(a).validate(b)?(T($(this).val()),e.popoverContentHtml=$('[name="'+e.startTimepickerID+'"]').html()):D("start")}).on("fetShowEventFrom",function(){g.find('[name="from"]').popover("show")}).on("fetHideEventFrom",function(){g.find('[name="from"]').popover("hide")}),n||a.isTrue(s.autoShow)&&g.find('[name="from"]').triggerHandler("fetShowEventFrom")}if(z){r.content=function(){return c=F(),J(c[1],z)},r.template=A?'<div class="popover" style="max-width:270px" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+z+'" class="popover-content row"></div></div>':'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div name="timepicker-popver-'+z+'" class="popover-content row"></div></div>',r.placement=s.direction,g.find('[name="to"]').popover(r),b=null!=c[1]?c[1].format(A?"hh:mm:ss":"hh:mm"):c[1],g.find('[name="to"]').val(b),$("body").on("click",'[name="'+z+'destroy"]',function(){g.find('[name="to"]').popover("hide")}),$("body").on("click",'[name="'+z+'clear"]',function(){g.find('[name="to"]').val("")});var i;g.find('[name="to"]').on("show.bs.popover",function(){angular.isNumber(s.autoHide)&&(i=d(function(){g.find('[name="to"]').triggerHandler("fetHideEventTo")},s.autoHide))}).on("shown.bs.popover",function(){v&&d(function(){v()})}).on("hide.bs.popover",function(){d.cancel(i)}).on("hidden.bs.popover",function(){w&&d(function(){w()})}),g.find('[name="to"]').on("change",function(){var a,b=$(this).val();a=A?"time":"timenosec","success"===f.getValidator(a).validate(b)?(U($(this).val()),e.popoverContentHtml=$('[name="'+e.endTimepickerID+'"]').html()):D("end")}).on("fetShowEventTo",function(){g.find('[name="to"]').popover("show")}).on("fetHideEventTo",function(){g.find('[name="to"]').popover("hide")}),n||a.isTrue(s.autoShow)&&g.find('[name="to"]').triggerHandler("fetShowEventTo")}}),$(b).on("mousedown touchstart",function(a){g.is(a.target)||g.find(a.target).length||$("[role=tooltip]").find(a.target).length||$("[role=tooltip] select").find(a.target).length||$("[role=tooltip] option").find(a.target).length||(d(function(){g.find('[name="from"]').popover("hide"),g.find('[name="to"]').popover("hide")}),a.stopPropagation())});else if("inline"==p){var O=F(),P=O[0],Q=O[1],R=!1,S=!1;angular.isDate(P)&&(R=!0),angular.isDate(Q)&&(S=!0),d(function(){y&&g.find('[name="from"]').replaceWith(j(R?P.getHours():-1,y)+k(R?P.getMinutes():-1,y)+l(R?P.getSeconds():-1,y)+M),z&&g.find('[name="to"]').replaceWith(j(S?Q.getHours():-1,z)+k(S?Q.getMinutes():-1,z)+l(S?Q.getSeconds():-1,z)+N)})}var T=function(a){var b=a.split(":"),c=b[0]||"00",d=b[1]||"00",e=b[2]||"00";L(c,d,e,"start")},U=function(a){var b=a.split(":"),c=b[0]||"00",d=b[1]||"00",e=b[2]||"00";L(c,d,e,"end")},V=function(){var b,c;return b=a.getScope(e,h,"swTimepickerDisable"),c=a.isTrue(b)?!0:!1,n=c,c},W=e.$watch(function(){var a=V();return a},function(b){b=a.isTrue(b)?!0:!1,d(function(){"popover"==p?b?g.find('[name="from"],[name="timepickerButtonFrom"],[name="to"],[name="timepickerButtonTo"]').attr("disabled",!0):g.find('[name="from"],[name="timepickerButtonFrom"],[name="to"],[name="timepickerButtonTo"]').attr("disabled",!1):b?g.find("select,button").attr("disabled",!0):g.find("select,button").attr("disabled",!1)})});g.on("$destroy",function(){(C||angular.noop)(),(W||angular.noop)()})}}}}]),d.directive("fetTooltip",["$fetUI","$timeout",function(a,b){var c="fetTooltip";return{name:c,scope:!1,priority:99,restrict:"A",replace:!1,transclude:!1,link:function(d,e,f){function g(a){n.tooltip("destroy"),n.tooltip(a)}var h=(a.getValue(d,f,"tooltipId"),a.getScope(d,f,"swTooltipContent"),a.getScope(d,f,"sTooltipDisplay")),i=a.getValue(d,f,"tooltipTrigger"),j=a.getExpression(d,f,"onTooltipShow"),k=a.getExpression(d,f,"onTooltipShown"),l=a.getExpression(d,f,"onTooltipHide"),m=a.getExpression(d,f,"onTooltipHidden"),n=$(e).attr("data-fet-type","tooltip"),o=a.getOptionManager();i=i?angular.lowercase(i):"click";var p=o.getOption("display",h),q=o.getOption(c,{title:function(){return a.getScope(d,f,"swTooltipContent")},placement:p.placement,container:!1});q.delay={show:p.show,hide:p.hide},q.trigger=i,n.tooltip(q);var r;n.on("show.bs.tooltip",function(){n.data("fetIsShow",!0),p.autoHide&&angular.isNumber(p.autoHide)&&(r=b(function(){n.triggerHandler("fetHideEvent")},p.autoHide)),b(function(){(j||angular.noop)()})}).on("shown.bs.tooltip",function(){b(function(){(k||angular.noop)()})}).on("hide.bs.tooltip",function(){n.data("fetIsShow",!1),p.autoHide&&angular.isNumber(p.autoHide)&&r&&b.cancel(r),b(function(){(l||angular.noop)()})}).on("hidden.bs.tooltip",function(){b(function(){(m||angular.noop)()})}).on("fetTooltipShowEvent",function(){n.tooltip("show")}).on("fetTooltipHideEvent",function(){n.tooltip("hide")}).on("fetShowEvent",function(){n.tooltip("show")}).on("fetHideEvent",function(){n.tooltip("hide")}).on("fetReloadEvent",function(a,b){g(b)}),a.isTrue(p.autoShow)&&n.triggerHandler("fetShowEvent")}}}]),d.directive("fetValidate",["$fetUI","$timeout",function(a,b){var c="fetValidate";return{priority:99,name:c,require:["?ngModel"],restrict:"A",link:function(c,d,e,f){function g(a){var b=[];b=v.split("|");for(var c=0;c<b.length;c++){var e=[],f=angular.lowercase(b[c]);angular.isString(f)&&(f=$.trim(f)),f.indexOf(":")>0&&(e=f.split(":"),f=e[0]);var g,h;g=z().getValidator(f);var i=!1;if(m)for(var j in m)m[j]&&angular.lowercase(j)==angular.lowercase(f)&&(angular.isUndefined(g)?(g=m[j],h=g):h=m[j],i=!0);i||angular.isUndefined(g)||(h=$.extend(g,m));var k,l=[];if(e.length>1){l=e.splice(1,1)}if(l.unshift(a),!g)return;switch(k=g.validate.apply(g.validate,l),k=angular.lowercase(k)){case y:d.trigger("fetValidateWarningEvent",h.warningMessage);break;case w:d.trigger("fetValidateSuccessEvent",h.successMessage);break;default:d.trigger("fetValidateErrorEvent",h.errorMessage)}if(k!==w)return}}function h(){var a;return f.$viewValue&&(a=f.$viewValue),a||(a=c.$eval(e.ngModel)),a}if(f){var i,j=a.getExpression(c,e,"onError"),k=a.getExpression(c,e,"onSuccess"),l=a.getExpression(c,e,"onWarning"),m=a.getScope(c,e,"sValidator"),n=e.sValidateStatus,o=e.sValidateMessage,p=(a.getValue(c,e,"validateId"),!1),q=!0,r=function(){var b,d;return b=a.getScope(c,e,"swValidateInit"),d=angular.isUndefined(b)?p:a.isTrue(b)?!0:!1},s=function(){var b,d;return b=a.getScope(c,e,"swValidateAuto"),d=angular.isUndefined(b)?q:a.isTrue(b)?!0:!1},t=function(a){d.attr("validate-status",a),c._status=a,n&&c.$evalAsync(function(){c.$eval(e.sValidateStatus+"=_status")})},u=function(a){d.attr("validate-message",a),c._message=a,o&&c.$evalAsync(function(){c.$eval(e.sValidateMessage+"=_message")})},v=a.getValue(c,e,"validateType"),w="success",x="error",y="warning",z=a.getValidateManager;i&&c.$evalAsync(function(){d.triggerHandler("fetValidateEvent")}),d.on("fetValidateEvent",function(){g(h())}),d.on("fetValidateSuccessEvent",function(a,b){t(w),u(b),k&&k({params:{message:b,type:w}})}),d.on("fetValidateErrorEvent",function(a,b){t(x),u(b),j&&j({params:{message:b,type:x}})}),d.on("fetValidateWarningEvent",function(a,b){t(y),u(b),l&&l({params:{message:b,type:y}})}),d.on("fetValidateResetEvent",function(){t(""),u(""),d.parents("[fet-field]").trigger("fetValidateResetEvent")});var A=c.$watch(function(){var b=r();return b=a.isFalse(b)?!1:!0},function(b){a.isTrue(b)&&g(h())}),B=function(){},C=c.$watch(function(){var b=s();return b=a.isFalse(b)?!1:!0},function(d){a.isTrue(d)?B=c.$watch(function(){return h()},function(a,c){a!=c&&b(function(){g(a)})},!0):a.isFalse(d)&&(B||angular.noop)()});c.$on("scopeChangeValidateInit",function(a,b){var c=b.validateInit;p=c}),c.$on("scopeChangeValidateAuto",function(a,b){var d=b.validateAuto;c.$evalAsync(function(){q=d})}),d.on("$destroy",function(){(B||angular.noop)(),(A||angular.noop)(),(C||angular.noop)()})}}}}]),d.directive("fetValidateMessage",["$fetUI",function(){var a="fetValidateMessage";return{priority:101,name:a,require:"?fetField",restrict:"A",link:function(a,b){b.addClass("help-block"),b.on("fetValidateWarningEvent",function(a,c){b.html(c)}).on("fetValidateSuccessEvent",function(a,c){b.html(c)}).on("fetValidateErrorEvent",function(a,c){b.html(c)}).on("fetValidateResetEvent",function(){b.html("")})}}}]),d.directive("fetForm",["$fetUI",function(a){return{name:"fetForm",scope:!1,restrict:"A",priority:120,link:function(b,c,d){{var e=(a.getValue(b,d,"formId"),function(){var c,e;return c=a.getScope(b,d,"swValidateInit"),e=angular.isUndefined(c)?!1:a.isTrue(c)?!0:!1}),f=function(){var c,e;return c=a.getScope(b,d,"swValidateAuto"),e=angular.isUndefined(c)?!0:a.isTrue(c)?!0:!1},g=b.$watch(function(){return e()},function(a){b.$broadcast("scopeChangeValidateInit",{validateInit:a})}),h=b.$watch(function(){return f()},function(a){b.$broadcast("scopeChangeValidateAuto",{validateAuto:a})});e(),f()}b.$broadcast("scopeChangeValidateAuto",{validateAuto:f()}),c.on("$destroy",function(){(g||angular.noop)(),(h||angular.noop)()})}}}])})}(window,document);